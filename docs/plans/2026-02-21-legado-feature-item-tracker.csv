seq,menu_file,item_id,title_ref,title_zh,domain,phase,status,owner,verify,notes
1,about.xml,@+id/menu_share_it,@string/share,分享,系统与工具,P10,done,codex,命令: dart format lib/features/settings/views/about_settings_view.dart；手工路径（待回归）: 设置->关于与诊断->右上角分享；校验顶栏新增一级分享图标且点击后直接拉起系统分享面板，分享主题为应用名并携带发布链接；异常分支保持静默无提示,对齐 legado about/menu_share_it + AboutActivity.onCompatOptionsItemSelected(menu_share_it) + Context.share 语义: 关于页顶栏补齐一级“分享”动作；点击直接分享 app_share_description 与 app_name；分享失败静默吞掉，不追加成功或失败提示
2,about.xml,@+id/menu_scoring,@string/scoring,评分,系统与工具,P10,pending,-,-,-
3,app_log.xml,@+id/menu_clear,@string/clear,清除,系统与工具,P10,done,codex,命令: dart format lib/features/settings/views/app_log_dialog.dart；手工路径（待回归）: 设置->关于与诊断->异常日志->清除；校验顶栏右侧存在“清除”一级动作且点击后无确认弹窗无成功提示并立即清空列表；点击日志弹层空白区域可关闭弹层,对齐 legado app_log/menu_clear + AppLogDialog.onMenuItemClick(menu_clear) + AppLog.clear 语义: 日志弹层顶栏保留单项“清除”动作；点击后直接清空日志集合并立即刷新列表；流程静默不追加文案提示
4,app_update.xml,@+id/menu_download,@string/action_download,下载,系统与工具,P10,done,codex,命令: dart format lib/features/settings/views/about_settings_view.dart；手工路径（待回归）: 设置->关于与诊断->检查更新->更新弹层->下载；校验更新弹层顶部存在“下载”动作且点击后提示“开始下载”，下载链接无效或拉起失败时提示“下载启动失败”并写入异常日志,对齐 legado app_update/menu_download + UpdateDialog.onMenuItemClick(menu_download) 语义: 更新弹层收敛为“版本标题+正文滚动区+顶部下载动作”；下载动作仅在 downloadUrl/fileName 有效时触发，并保持“开始下载”反馈与失败可观测
5,audio_play.xml,@+id/menu_change_source,@string/change_origin,换源,阅读与朗读,P3,done,codex,手工路径: 阅读页->底部菜单长按朗读->播放->换源; 校验播放菜单出现换源入口且点击后进入换源候选弹层,将朗读长按入口从占位提示收敛为 legado audio_play menu_change_source 同义换源动作并复用整书换源链路
6,audio_play.xml,@+id/menu_login,@string/login,登录,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书且书源配置 loginUrl)->底部菜单长按朗读->播放->登录; 校验 loginUrl 非空时显示登录入口且点击后进入登录流程，无 loginUrl 时不展示,播放菜单补齐 legado audio_play menu_login 同义入口并复用现有书源登录链路（loginUi/Web 登录）
7,audio_play.xml,@+id/menu_copy_audio_url,@string/copy_play_url,拷贝播放 URL,阅读与朗读,P3,done,codex,手工路径: 阅读页->底部菜单长按朗读->播放->拷贝播放 URL; 校验点击后剪贴板写入当前章节链接文本（允许为空）且提示“已拷贝”,播放菜单补齐 legado audio_play menu_copy_audio_url 同义入口并复用章节链接解析为当前播放 URL；复制动作保持“可空也可复制”边界并提示已拷贝
8,audio_play.xml,@+id/menu_edit_source,@string/edit_book_source,编辑书源,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书) -> 底部菜单长按朗读 -> 播放 -> 编辑书源; 校验可进入编辑书源页，取消返回不刷新，保存返回后刷新当前书源展示,播放菜单补齐 legado audio_play menu_edit_source，同步复用阅读域编辑书源链路并保持仅保存返回刷新（取消不生效）
9,audio_play.xml,@+id/menu_wake_lock,@string/audio_play_wake_lock,音频服务唤醒锁,阅读与朗读,P3,done,codex,手工路径: 阅读页->底部菜单长按朗读->播放->音频服务唤醒锁; 校验入口勾选态与开关状态同步且切换后再次进入保持状态,播放菜单补齐 legado audio_play menu_wake_lock 同义 checkable 语义并持久化到 audioPlayWakeLock
10,audio_play.xml,@+id/menu_log,@string/log,日志,阅读与朗读,P3,done,codex,手工路径: 阅读页->底部菜单长按朗读->播放->日志; 校验点击后打开日志弹层并可关闭,播放菜单补齐 legado audio_play menu_log 常驻入口并接入 showAppLogDialog；点击直接打开日志弹层且无前置条件限制
11,backup_restore.xml,@+id/menu_help,@string/help,帮助,导入导出与备份,P8,pending,-,-,-
12,backup_restore.xml,@+id/menu_log,@string/log,日志,导入导出与备份,P8,pending,-,-,-
13,book_cache.xml,@+id/menu_download,@string/action_download,下载,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_download_task_service.dart lib/features/bookshelf/views/cache_export_view.dart lib/features/bookshelf/views/cache_export_placeholder_view.dart lib/features/bookshelf/views/bookshelf_view.dart；flutter test test/widget_test.dart 通过；flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->下载->确定；校验下载前出现“提醒/是否确认缓存当前列表书籍？”，下载中顶栏动作切换“停止”，停止后回落“下载”且已缓存章节计数增长,对齐 legado CacheActivity.menu_download 与 CacheBook.start/stop 语义: 顶栏一级下载入口默认执行“当前章节到末章”批量缓存；运行中同入口切换为停止；点击前需确认且失败仅记录日志
14,book_cache.xml,@+id/menu_book_group,@string/group,分组,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->顶栏分组->切换 全部 本地 网络未分组 本地未分组,对齐 legado CacheActivity.menu_book_group 语义: 顶栏新增一级分组入口；菜单回显当前分组并按分组切换当前列表；下载与导出动作仅作用于当前分组列表
15,book_cache.xml,@+id/menu_export_all,@string/export_all,导出所有,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；flutter test test/widget_test.dart 通过；flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->更多->导出所有->选择导出文件夹；校验导出完成弹窗显示成功/跳过/失败统计与导出目录,对齐 legado CacheActivity.menu_export_all 语义: 顶栏更多菜单触发导出所有；优先复用已保存导出目录，不可用时重新选择目录；按当前列表书籍批量导出已缓存章节 TXT 并记录失败日志（自定义 Epub 导出与导出格式配置保留到 seq17/24）
16,book_cache.xml,@+id/menu_enable_replace,@string/replace_purify,替换净化,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->更多->替换净化；切换后执行导出所有并比对替换规则命中前后文本差异（TXT 与 EPUB）,对齐 legado CacheActivity.menu_enable_replace + ExportBookService.useReplace 语义: 顶栏更多菜单补齐 checkable“替换净化”入口；菜单打开按 exportUseReplace 回显勾选态；点击后翻转并持久化同名键；导出链路仅在 exportUseReplace 与书籍替换净化开关同时开启时应用替换规则
17,book_cache.xml,@+id/menu_enable_custom_export,@string/custom_export_section,自定义Epub导出章节,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；flutter test test/widget_test.dart 通过；flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->更多->自定义Epub导出章节；返回后重进缓存/导出页再次打开更多；校验勾选态切换与持久化回显,对齐 legado CacheActivity.menu_enable_custom_export 语义: 顶栏更多菜单补齐 checkable“自定义Epub导出章节”入口；菜单打开按 enableCustomExport 回显勾选态；点击后翻转并持久化同名键（导出行为联动保留到 seq18~25）
18,book_cache.xml,@+id/menu_export_web_dav,@string/export_to_web_dav,导出到 WebDav,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；flutter test test/widget_test.dart 通过；flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->更多->导出到 WebDav；返回后重进缓存/导出页再次打开更多；校验勾选态切换与持久化回显,对齐 legado CacheActivity.menu_export_web_dav 语义: 顶栏更多菜单补齐 checkable“导出到 WebDav”入口；菜单打开按 webDavCacheBackup 回显勾选态；点击后翻转并持久化同名键（实际导出上传能力由后续导出链路序号继续收敛）
19,book_cache.xml,@+id/menu_export_no_chapter_name,@string/export_no_chapter_name,TXT 不导出章节名,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；flutter test test/widget_test.dart 通过；flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->更多->TXT 不导出章节名；开启后执行导出所有并检查 txt 输出不包含章节标题，关闭后恢复章节标题输出,对齐 legado CacheActivity.menu_export_no_chapter_name + ExportBookService.includeTitle 语义: 顶栏更多菜单补齐 checkable“TXT 不导出章节名”入口；菜单打开按 exportNoChapterName 回显勾选态；点击后翻转并持久化同名键并驱动 TXT 导出章节标题开关
20,book_cache.xml,@+id/menu_export_pics_file,@string/export_pics_file,TXT 导出图片,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；flutter test test/widget_test.dart 通过；手工路径（待回归）: 书架->更多->缓存/导出->更多->TXT 导出图片->开启后执行导出所有；校验导出目录生成 {书名_作者}/images/{章节} 图片文件且开关状态可持久化回显,对齐 legado CacheActivity.menu_export_pics_file + ExportBookService.exportTxt 语义: 顶栏更多菜单补齐 checkable“TXT 导出图片”入口；菜单打开按 exportPictureFile 回显勾选态；点击后翻转并持久化同名键并在 TXT 导出中解析章节 <img src> 后按书籍/章节目录写出图片文件
21,book_cache.xml,@+id/menu_parallel_export,@string/parallel_export_book,多线程导出,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->更多->多线程导出（校验勾选态切换与持久化回显）；开启后执行导出所有（校验并发导出开关生效，导出成功/失败统计正常）,对齐 legado CacheActivity.menu_parallel_export + ExportBookService.parallelExportBook 语义: 顶栏更多菜单补齐 checkable“多线程导出”入口；菜单打开按 parallelExportBook 回显勾选态；点击后翻转并持久化同名键；导出链路按开关切换并发度（关闭=1，开启=9）
22,book_cache.xml,@+id/menu_export_folder,@string/export_folder,导出文件夹,书架/缓存/分组,P6,done,codex,手工路径: 书架->更多->缓存/导出->顶栏更多->导出文件夹；校验选择目录后返回列表无导出任务触发并在后续导出所有时可复用新目录,对齐 legado CacheActivity.menu_export_folder 语义: 顶栏更多菜单新增导出文件夹一级入口；点击后仅打开目录选择并保存 exportBookPath，取消选择静默返回且不触发导出
23,book_cache.xml,@+id/menu_export_file_name,@string/export_file_name,导出文件名,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->更多->导出文件名->输入 name + 作者 + author->确定->导出所有；校验导出文件名按规则生成且规则非法时回退默认命名并记录日志,对齐 legado CacheActivity.menu_export_file_name + Book.getExportFileName 语义: 顶栏更多菜单新增导出文件名入口；弹窗标题“导出文件名”、提示“Variable: name, author.”、输入 hint“file name js”；确认后写入同名键 bookExportFileName；TXT 导出命名改为按 JS 规则解析（变量 name/author，异常回退默认名并记录日志）
24,book_cache.xml,@+id/menu_export_type,@string/export_type,导出格式,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/cache_export_task_service.dart lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->更多->导出格式(txt/epub)->切换后执行导出所有,对齐 legado CacheActivity.menu_export_type + startExport 语义: 顶栏更多菜单新增“导出格式(当前值)”入口并回显当前格式；点击后单选切换并持久化 exportType；导出所有按 exportType 分支执行（txt/epub）
25,book_cache.xml,@+id/menu_export_charset,@string/export_charset,导出编码,书架/缓存/分组,P6,done,-,-,-
26,book_cache.xml,@+id/menu_log,@string/log,日志,书架/缓存/分组,P6,pending,-,-,-
27,book_cache_download.xml,@+id/menu_download_after,@string/menu_download_after,下载之后章节,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/cache_export_view.dart；手工路径（待回归）: 书架->更多->缓存/导出->长按顶栏下载->下载之后章节；校验触发后与顶栏“下载”一致：未运行时弹“提醒/是否确认缓存当前列表书籍？”并从当前章节缓存到末章，运行中触发则停止任务,对齐 legado CacheActivity.menu_download_after 语义: 下载按钮长按弹层新增“下载之后章节”入口；点击后与 menu_download 同义复用“当前章节到末章”缓存链路并保持运行中可停止
28,book_cache_download.xml,@+id/menu_download_all,@string/menu_download_all,下载全部章节,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/cache_export_view.dart lib/features/bookshelf/services/cache_download_task_service.dart；手工路径（待回归）: 书架->更多->缓存/导出->长按顶栏下载->下载全部章节；校验确认后从第1章开始缓存到末章并回显进度，缓存进行中再次长按触发下载全部章节应停止任务并回落“下载”态,对齐 legado CacheActivity.menu_download_all 语义: 下载按钮长按弹层新增“下载全部章节”入口；点击后在空闲态复用 sure_cache_book 确认并以 0..lastChapterIndex 范围执行缓存，运行中触发则走 CacheBook.stop 停止任务
29,book_group_manage.xml,@+id/menu_add,@string/add_group,添加分组,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/bookshelf_book_group_store.dart lib/features/bookshelf/views/bookshelf_group_manage_placeholder_dialog.dart；手工路径（待回归）: 书架->更多->分组管理->右上角添加->填写分组名称/选择封面/排序/允许下拉刷新->确定；校验名称为空提示“分组名称不能为空”且可选择封面与排序并保存；达到64组时提示“分组已达上限(64个)”并禁止继续添加,对齐 legado book_group_manage/menu_add + GroupManageDialog.menu_add + GroupEditDialog.add 语义: 分组管理弹层右上角“添加分组”一级动作点击后进入结构化编辑弹窗（分组名称/封面/排序/允许下拉刷新）；确认后按 legacy 未使用位 groupId 与 maxOrder+1 写入分组存储并刷新列表
30,book_info.xml,@+id/menu_edit,@string/edit,编辑,搜索/详情/目录,P2,done,codex,flutter test test/search_book_info_edit_helper_test.dart test/search_book_info_menu_helper_test.dart test/search_book_info_view_edit_action_test.dart 通过; 手工路径: 书架点开书籍详情->顶栏编辑->进入编辑书籍信息页,确认仅书架内书籍显示编辑入口并保持 legado menu_edit->BookInfoEditActivity 同义触发语义
67,book_read.xml,@+id/menu_toc_regex,@string/txt_toc_rule,TXT 目录规则,阅读与朗读,P3,done,codex,flutter test test/reader_txt_toc_rule_dialog_test.dart test/reader_top_menu_test.dart test/reader_legacy_menu_helper_test.dart test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->本地 TXT 书籍->顶部 TXT 目录规则->选择规则->确定,确认取消不生效且确定后立即重建目录并保持 menu_toc_regex 同义触发语义
68,book_read.xml,@+id/menu_set_charset,@string/set_charset,设置编码,阅读与朗读,P3,done,codex,flutter test test/reader_top_menu_test.dart test/reader_legacy_menu_helper_test.dart test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->本地书籍->顶部设置编码->输入 GBK -> 确定,确认设置编码入口为顶栏一级动作且阅读操作菜单不再出现该项，输入式对话框支持自由输入并在本地 TXT 与非 TXT 场景都触发目录重载，取消不生效且不追加扩展成功提示
69,book_read.xml,@+id/menu_add_bookmark,@string/bookmark_add,添加书签,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->添加书签；阅读页九宫格点击动作配置为“添加书签”后点击触发；校验均弹出书签编辑框，取消不落库，确定后新增书签并在目录书签页可见,将 menu_add_bookmark 从“有则删无则加”收敛为 legado 同义“始终打开编辑弹窗后确认新增”；默认预填当前阅读页文本并记录章节进度，书签跳转补齐按 chapterPos 恢复阅读进度
70,book_read.xml,@+id/menu_edit_content,@string/edit_content,编辑内容,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->编辑正文->重置；阅读页->阅读操作->编辑正文->关闭；阅读页->阅读操作->反转内容,补齐 menu_edit_content 正文抓取失败兜底：记录 reader.menu.<action>.fetch_content_failed 日志并回退当前显示内容；编辑页重置期间新增全屏遮罩与整页交互锁定，关闭/返回保持自动保存语义
71,book_read.xml,@+id/menu_page_anim,@string/book_page_anim,翻页动画（本书）,阅读与朗读,P3,done,codex,flutter test test/reader_legacy_menu_helper_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径: 阅读页->阅读操作->翻页动画（本书）->选择 默认/覆盖/滑动/仿真/滚动/无,菜单动作由打开界面设置收敛为 legado 同义单选弹层；新增本书翻页动画持久化并在阅读会话叠加覆盖；样式面板改全局翻页动画时清除本书覆盖以对齐 legado pageAnim=-1 边界
72,book_read.xml,@+id/menu_get_progress,@string/get_book_progress,拉取云端进度,阅读与朗读,P3,done,codex,手工路径: 阅读页(已配置 WebDav)->阅读操作->获取进度; 校验云端无进度静默返回、云端进度落后时弹“当前进度超过云端，是否覆盖为云端进度？”确认框、越界章节索引不覆盖本地进度,拉取链路收敛为 legado 同义：无配置/空目录/云端无数据时静默返回；失败仅写 reader.menu.get_progress.failed 日志；云端进度领先时直接同步并记录“自动同步阅读进度成功《书名》 章节名”日志；兼容 legado 原始 durChapterPos 场景时按章节内容长度估算章节进度
73,book_read.xml,@+id/menu_cover_progress,@string/cover_book_progress,覆盖云端进度,阅读与朗读,P3,done,codex,手工路径: 阅读页(已配置 WebDav)->阅读操作->覆盖云端进度; 校验同步开关关闭/未配置/空目录时静默返回，上传成功提示“上传成功”，上传失败提示“上传进度失败\\n<原因>”且日志页可观测,覆盖进度链路收敛为 legado 同义：先保存本地进度再上传；失败写 reader.menu.cover_progress.failed 日志并保留失败提示；菜单文案由“覆盖进度”收敛为“覆盖云端进度”
74,book_read.xml,@+id/menu_reverse_content,@string/reverse_content,反转内容,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书且当前章节已缓存正文)->阅读操作->反转内容; 校验入口仅在线书显示、点击后当前章节正文按字符级倒序并立即刷新、无缓存正文时静默返回,将 menu_reverse_content 从“按行倒序 + 缺正文提示 + 兜底拉取正文”收敛为 legado 同义“按字符倒序 + 仅处理已缓存正文 + 缺失静默返回”；菜单文案由“正文倒序”收敛为“反转内容”
75,book_read.xml,@+id/menu_simulated_reading,@string/simulated_reading,模拟追读,阅读与朗读,P3,done,codex,flutter test test/simple_reader_view_compile_test.dart 通过; flutter test test/reader_legacy_menu_helper_test.dart 通过; flutter test test/reader_catalog_sheet_test.dart 通过,将 menu_simulated_reading 从“自动阅读占位开关”收敛为 legado 同义“配置弹窗(启用/起始章节/每日章节/开始日期) -> 落盘 -> 重载阅读会话”；补齐 simulatedTotalChapterNum 同义计算并将目录可见章节数与底部章节导航上限对齐到可读章节边界
76,book_read.xml,@+id/menu_enable_replace,@string/replace_rule_title,替换净化,阅读与朗读,P3,done,codex,flutter test test/reader_legacy_menu_helper_test.dart 通过; flutter test test/simple_reader_view_compile_test.dart 通过,将 menu_enable_replace 从“启用替换规则 + 切换后 toast”收敛为 legado 同义“替换净化 checkable 入口 + 点击即切换并刷新正文（无额外提示）”；菜单文案统一为“替换净化”，状态保持按书籍级 useReplaceRule 持久化
77,book_read.xml,@+id/menu_same_title_removed,@string/same_title_removed,移除重复标题,阅读与朗读,P3,done,codex,flutter test test/reader_legacy_menu_helper_test.dart 通过; flutter test test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->阅读操作->移除重复标题,菜单文案由“同名标题去重”收敛为 legado 同义“移除重复标题”；勾选态收敛为“当前章节实际发生重复标题移除”；点击动作收敛为 legado 同义“按 !sameTitleRemoved 翻转章节级开关并重载当前章节”，仅在“当前章节未移除且已处于启用态”提示“未找到可移除的重复标题”，章节缺失场景静默返回
78,book_read.xml,@+id/menu_re_segment,@string/re_segment,重新分段,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->重新分段; 校验勾选态随书籍级开关切换并立即重载当前章节且不追加提示,动作收敛为 legado 同义“切换书籍级 reSegment 后直接重载正文”；重载前先保存当前进度并按当前章节恢复位置以避免阅读位置漂移
79,book_read.xml,@+id/menu_enable_review,@string/review,段评,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作; 校验菜单不显示“段评”且其它菜单顺序保持不变,对照 legado `book_read.xml` 中 `menu_enable_review` 默认 `visible=false` 且 `ReadBookActivity` 事件分支处于注释状态；SoupReader 补齐隐藏占位动作并保持默认不展示不触发以对齐同义语义
80,book_read.xml,@+id/menu_del_ruby_tag,@string/del_ruby_tag,删除ruby标签,阅读与朗读,P3,done,codex,手工路径: 阅读页(EPUB书籍)->阅读操作->删除ruby标签; 校验入口仅 EPUB 显示、勾选态随开关切换、切换后触发全量内容刷新并重载当前章节,对照 legado `menu_del_ruby_tag`：文案由“删除 ruby 标签”收敛为“删除ruby标签”；清理规则由“删除 ruby/rt/rp 标签”收敛为仅删除 `rt/rp`；切换后刷新由“保留当前章内存内容的清缓存”收敛为全量清缓存并重载当前章节以贴齐 `refreshContentAll`
81,book_read.xml,@+id/menu_del_h_tag,@string/del_h_tag,删除h标签,阅读与朗读,P3,done,codex,手工路径: 阅读页(EPUB书籍)->阅读操作->删除h标签; 校验入口仅 EPUB 显示、勾选态切换后整段 h1~h6 节点(含标题文本)从正文移除、切换后全量清缓存并重载当前章节且无额外提示,对照 legado menu_del_h_tag：文案由“删除 h 标签”收敛为“删除h标签”；h 标签处理由“仅去标签保留标题文本”收敛为“删除 h1~h6 整段节点内容”；切换后继续复用全量清缓存并重载当前章节链路，保持 checkable 语义
82,book_read.xml,@+id/menu_image_style,@string/image_style,图片样式,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->图片样式->选择 DEFAULT/FULL/TEXT/SINGLE; 校验样式切换后正文即时重载且 SINGLE 分支仅当前书籍强制覆盖翻页动画,对齐 legado menu_image_style 语义: 四档样式按书籍级持久化; SINGLE 联动由“全局改覆盖”收敛为“仅书籍级 pageAnim=覆盖”且不污染全局设置
83,book_read.xml,@+id/menu_update_toc,@string/update_toc,更新目录,阅读与朗读,P3,done,codex,flutter test test/reader_top_menu_test.dart test/reader_legacy_menu_helper_test.dart test/simple_reader_view_compile_test.dart test/search_book_info_refresh_helper_test.dart 通过; flutter test test/reader_catalog_sheet_test.dart 通过; 手工路径: 阅读页->阅读操作->更新目录（在线书与本地 TXT/EPUB 分别验证）,确认在线失败提示收敛为“加载目录失败”且本地失败提示收敛为 LoadTocError 前缀并移除成功扩展提示
84,book_read.xml,@+id/menu_effective_replaces,@string/effective_replaces,起效的替换,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->起效的替换; 选择命中规则进入编辑并保存返回; 选择“繁简转换”并切换模式,阅读菜单入口从规则总列表收敛为当前章节起效替换弹层；仅展示当前章节正文实际命中的替换规则并在简繁转换开启时追加“繁简转换”；编辑后按 replaceRuleChanged 语义重载当前章节
85,book_read.xml,@+id/menu_log,@string/log,日志,阅读与朗读,P3,done,codex,命令: dart format lib/features/reader/views/simple_reader_view.dart；手工路径（待回归）: 阅读页->阅读操作->日志；校验点击后直接弹出日志弹层并可关闭且保持阅读页停留,对齐 legado book_read/menu_log + ReadBookActivity.onCompatOptionsItemSelected(menu_log) 语义: 阅读菜单日志入口动作收敛为 showAppLogDialog；不再跳转异常日志页；不提前并入 menu_help(seq86)
86,book_read.xml,@+id/menu_help,@string/help,帮助,阅读与朗读,P3,done,codex,命令: dart format lib/features/reader/views/simple_reader_view.dart；手工路径（待回归）: 阅读页->阅读操作->帮助；校验点击后读取 assets/web/help/md/readMenuHelp.md 并弹出帮助文档，关闭后保持当前阅读会话不跳转异常日志页,对齐 legado book_read/menu_help + ReadBookActivity.onCompatOptionsItemSelected(menu_help) + showHelp("readMenuHelp") 语义: 帮助入口收敛为文档弹层承载；补齐同源资产 readMenuHelp.md；失败分支提示“帮助文档加载失败：<error>”
87,book_read_change_source.xml,@+id/menu_chapter_change_source,@string/chapter_change_source,单章换源,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->顶部换源按钮长按->单章换源->选择候选书源->选择目标章节; 校验当前章节正文被替换且阅读位置保持在当前章节,单章换源流程收敛为“先选书源再选目标章节后替换当前章节正文”；移除自动匹配章节后立即覆盖与成功提示扩展分支，对齐 legado ChangeChapterSourceDialog 的手动选章语义
88,book_read_change_source.xml,@+id/menu_book_change_source,@string/book_change_source,整书换源,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->顶部换源按钮长按->整书换源->选择候选书源; 校验整书来源与目录切换生效且无成功提示,分支菜单文案由“书籍换源”收敛为 legado 同义“整书换源”；整书换源成功反馈收敛为静默不再弹“已切换到...”扩展 toast；触发链路保持与 menu_change_source 同步复用整书换源流程
91,book_read_record.xml,@+id/menu_sort_read_long,@string/reading_time_sort,阅读时长排序,阅读与朗读,P3,done,codex,命令: dart format lib/core/services/settings_service.dart lib/features/reader/views/simple_reader_view.dart lib/features/bookshelf/views/reading_history_view.dart；命令: dart analyze lib/core/services/settings_service.dart lib/features/reader/views/simple_reader_view.dart lib/features/bookshelf/views/reading_history_view.dart；手工路径（待回归）: 设置->阅读记录->右上角更多->阅读时长排序；阅读页持续阅读后返回阅读记录页,对齐 legado book_read_record/menu_sort_read_long + ReadRecordActivity(sortMode=1) 语义：阅读记录页更多菜单补齐“阅读时长排序”单项入口并按 readRecordSort=1 回显勾选；点击后仅切换排序模式并按累计阅读时长降序刷新列表；补齐阅读页会话时长累计持久化与清除阅读记录时长清理；不提前并入 menu_sort/menu_sort_name/menu_sort_read_time(seq89/90/92)
92,book_read_record.xml,@+id/menu_sort_read_time,@string/last_read_time_sort,阅读时间排序,阅读与朗读,P3,pending,-,-,-
93,book_read_record.xml,@+id/menu_enable_record,@string/enable_record,开启记录,阅读与朗读,P3,done,codex,手工路径: 设置->功能 & 设置->阅读记录->右上角更多->开启记录; 校验勾选态切换与重进页面保持,对齐 legado menu_enable_record checkable 语义：菜单打开按 enableReadRecord 回显勾选；点击仅翻转开关并持久化，不追加提示；阅读进度保存保持不变且仅在开关关闭时不刷新 lastReadTime
94,book_read_refresh.xml,@+id/menu_refresh_dur,@string/menu_refresh_dur,刷新当前章节,阅读与朗读,P3,done,codex,flutter test test/reader_legacy_menu_helper_test.dart test/reader_top_menu_test.dart test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->顶部刷新按钮(点击) 与 阅读页->顶部刷新按钮(长按)->刷新当前章节; 确认 menu_refresh 与 menu_refresh_dur 同分支并默认执行刷新当前章节,
95,book_read_refresh.xml,@+id/menu_refresh_after,@string/menu_refresh_after,刷新之后章节,阅读与朗读,P3,done,codex,flutter test test/reader_refresh_scope_helper_test.dart test/reader_legacy_menu_helper_test.dart test/reader_top_menu_test.dart test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->顶部刷新按钮(长按)->刷新之后章节; 确认从当前章节开始清理后续缓存并触发当前章节重载，前序章节缓存保持不变,
96,book_read_refresh.xml,@+id/menu_refresh_all,@string/menu_refresh_all,刷新全部章节,阅读与朗读,P3,done,codex,flutter test test/reader_refresh_scope_helper_test.dart test/reader_legacy_menu_helper_test.dart test/reader_top_menu_test.dart test/simple_reader_view_compile_test.dart 通过; 手工路径: 阅读页->顶部刷新按钮(长按)->刷新全部章节; 确认从首章开始清理全量章节缓存并回写变更章节，随后重载当前章节，且无可用书源时回落当前章节重载,
97,book_read_source.xml,@+id/menu_login,@string/login,登录,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->顶部书源名->登录; 校验 loginUrl 为空时菜单不显示登录，loginUrl 非空点击后可进入登录流程（表单登录或网页登录）,登录动作改为按 bookSourceUrl 回查当前书源后再触发，缺失时提示“未找到书源”，以对齐 legado SourceLoginActivity 的实时状态边界
98,book_read_source.xml,@+id/menu_chapter_pay,@string/chapter_pay,购买,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书,VIP未购买章节)->顶部书源名->章节购买->确定; 校验仅 loginUrl 非空且当前章节 isVip=true 且 isPay!=true 显示入口，确认后按 payAction 结果分流（URL 打开网页，truthy 结果清缓存并刷新目录），异常仅写日志且不追加扩展提示
99,book_read_source.xml,@+id/menu_edit_source,@string/edit_book_source,编辑书源,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->顶部书源名->编辑书源; 校验点击后按当前 sourceUrl 回查书源并进入编辑书源页，弹层期间若书源被删除则提示未找到书源，编辑后仅保存返回时刷新阅读页书源显示,编辑动作由使用弹层快照 source 直接打开收敛为 legado 同义的按 bookSourceUrl 实时回查后打开；保存返回才刷新菜单书源显示以对齐 RESULT_OK 回调语义
100,book_read_source.xml,@+id/menu_disable_source,@string/disable_book_source,禁用书源,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->顶部书源名->禁用书源; 校验点击后按 bookSourceUrl 回查当前书源并直接写库禁用，无确认弹窗且无成功提示,禁用动作由弹层快照 source 直接写库收敛为 legado 同义的按 bookSourceUrl 实时回查后禁用；回查缺失时提示“未找到书源”
164,book_toc.xml,@+id/menu_split_long_chapter,@string/split_long_chapter,拆分超长章节,搜索/详情/目录,P2,done,codex,手工路径: 书籍详情页->查看目录->更多->拆分超长章节; 校验仅本地 TXT 显示勾选态并切换后即时重建目录,目录页补齐 menu_split_long_chapter 勾选入口并复用本地 TXT 重解析链路; 切换后同步刷新目录列表与勾选状态
166,book_toc.xml,@+id/menu_use_replace,@string/use_replace,使用替换,搜索/详情/目录,P2,done,codex,手工路径: 书籍详情页->查看目录->更多->使用替换; 校验固定文案+勾选态切换且不弹成功提示，切换后目录标题即时按替换规则刷新,目录页补齐 menu_use_replace 全局开关并持久化到 tocUiUseReplace；展示链路收敛为 tocUiUseReplace && 书籍启用替换规则
167,book_toc.xml,@+id/menu_load_word_count,@string/load_word_count,加载字数,搜索/详情/目录,P2,done,codex,flutter test test/search_book_info_view_compile_test.dart test/simple_reader_view_compile_test.dart test/reader_catalog_sheet_test.dart 通过; 手工路径: 书籍详情页->查看目录->更多->加载字数; 校验固定文案+勾选态切换且不弹成功提示，目录项字数按开关即时显隐,目录页补齐 menu_load_word_count 全局开关并持久化到 toc_ui_load_word_count；目录项在开关开启且存在可用字数时显示 xx字/xx万字
170,book_toc.xml,@+id/menu_log,@string/log,日志,搜索/详情/目录,P2,done,codex,命令: dart format lib/features/search/views/search_book_info_view.dart；命令: dart analyze lib/features/search/views/search_book_info_view.dart；手工路径（待回归）: 书籍详情页->查看目录->更多->日志；校验点击后直接打开日志弹层并可关闭且无前置条件限制,目录页更多菜单补齐 menu_log 常驻入口并接入 showAppLogDialog；点击后直接打开日志弹层并保持当前目录页状态不变
171,bookmark.xml,@+id/menu_export,@string/export,导出,书架/缓存/分组,P6,done,codex,命令: dart format lib/core/database/repositories/bookmark_repository.dart lib/features/reader/services/reader_bookmark_export_service.dart lib/features/reader/views/all_bookmark_view.dart lib/features/settings/views/settings_view.dart；手工路径（待回归）: 设置->功能 & 设置->书签->右上角更多->导出；校验导出成功提示且导出文件名为 bookmark-yyMMddHHmmss.json,对齐 legado AllBookmarkActivity.menu_export 语义: 补齐“设置->书签->所有书签”入口与全量书签承载页；顶栏更多菜单新增“导出”并按 bookmarkDao.all 同义排序（bookName/bookAuthor/chapterIndex/chapterPos）导出 JSON；取消导出静默返回，失败写 ExceptionLogService(node=all_bookmark.menu_export)
172,bookmark.xml,@+id/menu_export_md,@string/export_md,导出(MD),书架/缓存/分组,P6,done,codex,命令: dart format lib/features/reader/services/reader_bookmark_export_service.dart lib/features/reader/views/all_bookmark_view.dart；手工路径（待回归）: 设置->功能 & 设置->书签->右上角更多->导出(MD)；校验导出文件名为 bookmark-yyMMddHHmmss.md 且提示“导出成功”并在取消目录选择时静默返回,对齐 legado AllBookmarkActivity.menu_export_md 语义: 顶栏更多菜单补齐“导出(MD)”动作并复用同一目录选择流程；导出内容按 bookmarkDao.all 顺序输出 Markdown 分组（书名作者/章节/原文/摘要）；失败记录 ExceptionLogService(node=all_bookmark.menu_export_md)
173,bookshelf_manage.xml,@+id/menu_book_group,@string/group,分组,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->顶栏分组->切换 全部 本地 网络未分组 本地未分组；校验搜索框提示随分组回显“筛选 • 分组名”且列表即时切换,对齐 legado BookshelfManageActivity.menu_book_group 语义: 顶栏新增一级“分组”入口；分组选项按 bookGroup 顺序动态展示并回显当前选中项；选择后更新当前分组并按分组重算当前列表；批量换源/清理缓存动作仅作用于当前分组+当前筛选结果中的选中集合。保留差异: 当前 Book 模型未迁移 audio/updateError 类型位 且书籍分组位写入链路待 seq180 回补，音频/更新失败分组及自定义分组命中依赖 membership 映射
174,bookshelf_manage.xml,@+id/menu_group_manage,@string/group_manage,分组管理,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->顶栏分组->分组管理；校验分组弹层出现“分组管理”一级入口，点击后进入分组管理弹窗并在关闭后回刷分组上下文（含当前分组回显/无效分组回退）,对齐 legado BookshelfManageActivity.menu_group_manage 语义: 在分组子菜单首项补齐“分组管理”入口；点击后触发 GroupManageDialog 同层级弹窗；关闭后恢复当前页面并刷新分组数据
175,bookshelf_manage.xml,@+id/menu_export_all_use_book_source,@string/export_all_use_book_source,导出所有书的书源,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/services/bookshelf_manage_export_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->右上角更多->导出所有书的书源；校验默认文件名为 bookSource.json 且取消导出静默返回并在成功后可复制导出路径,对齐 legado BookshelfManageActivity.menu_export_all_use_book_source 语义: 顶栏菜单补齐“导出所有书的书源”入口；导出集合按在用线上书源收敛（过滤本地与 WebDav 标签来源并仅导出书源仓库可命中项）；导出失败提示错误摘要并保留可观测日志
176,bookshelf_manage.xml,@+id/menu_open_book_info_by_click_title,@string/open_book_info_by_click_title,点击书名打开详情,书架/缓存/分组,P6,done,codex,命令: dart format lib/core/services/settings_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->右上角更多->点击书名打开详情 开关切换；开启后点击书名进入书籍详情且点击行其余区域仅切换勾选；关闭后点击书名回落为勾选操作,对齐 legado BookshelfManageActivity.menu_open_book_info_by_click_title + BookAdapter 语义: 顶栏菜单补齐 checkable 开关“点击书名打开详情”并持久化同名键 openBookInfoByClickTitle；开启时书名点击直达 SearchBookInfoView.fromBookshelf 详情页且不影响整行勾选入口；关闭时书名点击与整行点击同义为勾选切换
177,bookshelf_menage_sel.xml,@+id/menu_del_selection,@string/delete,删除,书架/缓存/分组,P6,done,codex,命令: dart format lib/core/services/settings_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；命令: dart analyze lib/core/services/settings_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->删除->取消或确认；校验确认弹层包含“删除源文件”开关并回显上次选择 且确认后仅删除选中书籍并保持成功静默,对齐 legado BookshelfManageActivity.menu_del_selection + BookshelfManageViewModel.deleteBook 语义: 书架管理选中态补齐“删除”一级动作；触发后弹出“提醒/是否确认删除？”确认层并提供“删除源文件”开关且持久化 legacy 同名键 deleteBookOriginal；确认后按选中集合批量删书 本地书始终清理封面文件 且在开关开启时额外删除本地源文件 失败分支写 ExceptionLogService 节点
178,bookshelf_menage_sel.xml,@+id/menu_update_enable,@string/allow_update,允许更新,书架/缓存/分组,P6,done,codex,命令: dart format lib/core/services/settings_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；命令: dart analyze lib/core/services/settings_service.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->允许更新；校验动作为一级入口且点击后保持成功静默，书架“更新目录”候选计数可恢复包含已选网络书籍,对齐 legado BookshelfManageActivity.menu_update_enable + BookshelfManageViewModel.upCanUpdate 语义: 书架管理选中态补齐“允许更新”一级动作；点击后按当前可见选中集批量写入 canUpdate=true 并保持页面停留；失败写 ExceptionLogService(node=bookshelf_manage.menu_update_enable) 且提示错误摘要
179,bookshelf_menage_sel.xml,@+id/menu_update_disable,@string/disable_update,禁止更新,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->禁止更新；校验动作为一级入口且点击后保持成功静默，返回书架“更新目录”时已选网络书籍不再进入更新候选,对齐 legado BookshelfManageActivity.menu_update_disable + BookshelfManageViewModel.upCanUpdate 语义: 书架管理选中态补齐“禁止更新”一级动作；点击后按当前可见选中集批量写入 canUpdate=false 并保持页面停留；失败写 ExceptionLogService(node=bookshelf_manage.menu_update_disable) 且提示错误摘要。保留差异: 当前 Book 模型未迁移 legacy updateError 类型位，无法执行 removeType(updateError) 副作用
180,bookshelf_menage_sel.xml,@+id/menu_add_to_group,@string/add_to_group,加入分组,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->加入分组->勾选分组并确定；校验仅当前可见选中书籍命中分组筛选 且取消保持静默返回,对齐 legado BookshelfManageActivity.menu_add_to_group + GroupSelectDialog + upGroup(addToGroupRequestCode) 语义: 书架管理选中态补齐“加入分组”一级动作；触发后打开分组多选弹层并按 groupId>=0 集合选择分组；确认后按当前可见选中集合批量写入 membership=membership|selectedGroupBits 并持久化到 bookshelf.book_group_membership_map；失败写 ExceptionLogService(node=bookshelf_manage.menu_add_to_group) 且提示错误摘要。回补 seq173 记录的分组位写入缺口
181,bookshelf_menage_sel.xml,@+id/menu_change_source,@string/change_source_batch,批量换源,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->批量换源->选择书源并确认；校验“选择书源”页支持搜索过滤与换源间隔(0~9999秒)配置，执行中回显 current/total 且可取消,对齐 legado BookshelfManageActivity.menu_change_source + SourcePickerDialog + BookshelfManageViewModel.changeSource 语义: 书架管理选中态补齐“批量换源”一级动作；点击后进入书源选择页并提供换源间隔菜单；确认后按选中集逐本换源，单书失败仅记录可观测日志且不中断整批，执行中支持取消
182,bookshelf_menage_sel.xml,@+id/menu_clear_cache,@string/clear_cache,清理缓存,书架/缓存/分组,P6,done,codex,命令: dart format lib/core/database/repositories/book_repository.dart lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本书->清理缓存；校验成功提示“成功清理缓存”且仅清理选中书籍缓存,对齐 legado BookshelfManageActivity.menu_clear_cache + BookshelfManageViewModel.clearCache 语义: 书架管理选中态补齐“清理缓存”一级动作；点击后按选中集批量清理章节缓存并统一提示成功；失败写 ExceptionLogService(node=bookshelf_manage.menu_clear_cache) 且提示错误摘要
183,bookshelf_menage_sel.xml,@+id/menu_check_selected_interval,@string/check_selected_interval,选中所选区间,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_manage_placeholder_view.dart；手工路径（待回归）: 书架->更多->书架管理->勾选多本(非连续)->选中所选区间；校验当前可见列表最小与最大已选索引之间书籍全部补选 且“已选 N / total”计数同步更新并保持静默无提示,对齐 legado BookshelfManageActivity.menu_check_selected_interval + BookAdapter.checkSelectedInterval 语义: 书架管理选中态补齐“选中所选区间”一级动作；点击后仅按当前可见列表扩展连续选区并刷新计数；全流程不写库不弹提示
184,change_cover.xml,@+id/menu_start_stop,@string/stop,停止,系统与工具,P10,done,codex,命令: dart format lib/features/search/views/search_book_cover_change_view.dart；手工路径（待回归）: 书籍详情->编辑书籍信息->封面换源->右上角刷新/停止；校验进入页面后自动进入搜索中态并回显“停止”动作（含停止图标），点击“停止”立即取消当前搜索并回落“刷新”动作，再次点击“刷新”可重启搜索且候选列表重置,对齐 legado change_cover/menu_start_stop + ChangeCoverDialog.onMenuItemClick(menu_start_stop) + ChangeCoverViewModel.startOrStopSearch 语义: 顶栏同入口动作在“刷新/停止”间切换；运行中点击停止可中断封面换源请求并回落刷新态；动作文案与图标随搜索状态同步且流程不追加成功提示
200,code_edit.xml,@+id/menu_save,@string/action_save,保存,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->本地导入或网络导入->导入候选列表->打开->右上角保存；校验编辑承载标题固定为 edit 且顶栏仅保留一级保存图标动作，点击后关闭并回写候选源 JSON；点击遮罩关闭时保持静默且不落盘,对齐 legado code_edit/menu_save + CodeDialog.onMenuItemClick(menu_save) + ImportBookSourceDialog.onCodeSave 语义: 导入候选“打开”承载收敛为 code_edit 同义编辑态；顶栏仅保留一级保存动作且保存后只回传文本并关闭承载；不追加取消二级动作和成功提示
201,content_edit.xml,@+id/menu_save,@string/action_save,保存,阅读与朗读,P3,done,codex,手工路径: 阅读页->阅读操作->编辑正文->清空正文后点保存 或 关闭; 校验不覆盖当前章节已缓存正文并返回阅读页,编辑正文保存链路补齐 legado menu_save 同义空正文边界：仅当正文非空时才落库覆盖章节内容；保留保存后返回阅读页且正文刷新
202,content_edit.xml,@+id/menu_reset,@string/reset,重置,阅读与朗读,P3,done,codex,手工路径: 阅读页(网络书)->阅读操作->编辑正文->重置 与 阅读页(本地 TXT/EPUB)->阅读操作->编辑正文->重置; 校验重置后编辑框回填源正文并刷新当前章节，失败时无重置失败弹窗,编辑正文重置链路补齐 legado menu_reset 同义：先清缓存再回源读取正文；网络书失败时静默保留当前编辑内容并记录日志；本地书改为从本地文件回读章节正文
204,content_search.xml,@+id/menu_enable_replace,@string/replace,替换,阅读与朗读,P3,done,codex,手工路径: 阅读页->搜索正文->输入关键词搜索->搜索面板顶栏更多->替换->再次搜索; 校验勾选态切换有效且仅影响全文搜索替换流程，退出全文搜索后开关恢复默认关闭,对齐 legado SearchContentActivity.menu_enable_replace 语义：补齐全文搜索 checkable“替换”入口；点击仅翻转搜索态开关不自动重跑；搜索链路按“搜索替换开关 && 书籍替换净化开关”决定是否应用替换规则
205,content_select_action.xml,@+id/menu_replace,@string/replace,替换,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->替换->保存规则; 校验默认 pattern 为选中文本逐行 trim 后结果 且 scope 为 书名;书源URL,对齐 legado TextActionMenu.menu_replace：补齐翻页阅读长按选中文本入口并接入 文本操作->替换；替换编辑页按 selectedText(逐行trim) 预填 pattern 且 scope 预填 bookName;bookSourceUrl；保存后回写规则并刷新当前章节
207,content_select_action.xml,@+id/menu_bookmark,@string/bookmark,书签,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->书签->取消/确定; 校验取消不落库，确定后新增书签且目录书签页可见并可跳转,对齐 legado TextActionMenu.menu_bookmark：补齐文本操作->书签入口；点击后以选中文本预填书签编辑弹窗，取消不写库，确定后写库并刷新书签状态
208,content_select_action.xml,@+id/menu_aloud,@string/read_aloud,朗读,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->朗读(点击/长按); 校验点击按模式执行“朗读选择内容/从选择处开始一直朗读”，长按任意文本操作菜单项可在两种模式间切换并持久化,对齐 legado TextActionMenu.menu_aloud：补齐文本操作“朗读”入口；默认模式朗读选中文本，长按切换后改为从选择处开始持续朗读；模式键持久化为 contentSelectSpeakMod
209,content_select_action.xml,@+id/menu_dict,@string/dict,字典,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->字典; 校验弹出字典面板、默认加载首个启用规则并支持规则切换后重新查询,对齐 legado TextActionMenu.menu_dict：补齐文本操作“字典”入口；点击后打开字典弹层并以 selectedText 发起词典查询（规则按 enabled + sortNumber 排序）
210,content_select_action.xml,@+id/menu_search_content,@string/search_content,全文搜索,阅读与朗读,P3,done,codex,flutter test test/reader_search_navigation_helper_test.dart 与 flutter test test/reader_top_menu_test.dart 通过；手工路径: 阅读页->搜索正文->输入关键词->搜索->上一个/下一个命中,将全文搜索从“仅当前章节命中”收敛为 legado 同义“跨章节命中列表 + 跨章节跳转”；保持在线书仅检索已缓存章节并在搜索面板展示章节维度结果信息
211,content_select_action.xml,@+id/menu_browser,@string/browser,浏览器,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->浏览器; 校验选中文本为http或https时外部浏览器直开且失败提示ERROR; 非网址文本按关键词发起网页搜索,对齐legado TextActionMenu.menu_browser语义：选中文本为绝对网址时走ACTION_VIEW; 非绝对网址时走ACTION_WEB_SEARCH; 异常提示localizedMessage为空时回退ERROR
212,content_select_action.xml,@+id/menu_share_str,@string/share,分享,阅读与朗读,P3,done,codex,手工路径: 阅读页(翻页模式)->长按正文词句->文本操作->分享; 校验打开系统分享面板且分享内容为选中文本并且不追加成功或失败提示,对齐 legado TextActionMenu.menu_share_str：补齐文本操作“分享”入口；点击后调用系统文本分享（subject=分享 且 text=selectedText）；分享异常静默吞掉不追加提示
213,crash_log.xml,@+id/menu_clear,@string/clear,清除,系统与工具,P10,done,codex,命令: dart format lib/features/settings/views/exception_logs_view.dart；手工路径（待回归）: 设置->开发工具->异常日志->清除；校验顶栏右侧存在“清除”一级动作且点击后无确认弹窗无成功提示并立即清空列表；清空后列表保持留白态,对齐 legado crash_log/menu_clear + CrashLogsDialog.onMenuItemClick(menu_clear) + CrashViewModel.clearCrashLog 语义: 异常日志页顶栏保留单项“清除”动作；点击后直接清空异常日志并立即刷新列表；流程静默不追加确认与成功提示
214,dialog_text.xml,@+id/menu_close,@string/close,关闭,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_debug_text_view.dart lib/features/settings/views/app_help_dialog.dart；手工路径（待回归）: 订阅->规则订阅->订阅源调试->更多->列表源码/正文源码->右上角关闭；设置->帮助文档弹层->右上角关闭；校验文本承载页与帮助弹层顶栏均仅保留“关闭”一级动作且点击后直接关闭承载，无额外复制入口与成功提示,对齐 legado dialog_text/menu_close + TextDialog.onMenuItemClick(menu_close) 语义: 通用文本承载顶栏收敛为单项“关闭”；点击后仅执行 dismiss/pop，不附带复制、保存或提示等扩展副作用
215,dict_rule.xml,@+id/menu_add,@string/create,新建,规则与净化,P5,done,codex,命令: dart format lib/features/reader/views/dict_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/widget_test.dart 通过；手工路径（待回归）: 设置->源管理->替换净化->字典规则->右上角加号->进入字典规则编辑页; 校验点击后打开空白编辑页且不自动保存,对齐 legado DictRuleActivity.menu_add 语义: 顶栏一级新建入口点击后仅打开空白字典规则编辑页；不触发导入链路且不自动落库
216,dict_rule.xml,@+id/menu_import_local,@string/import_local,本地导入,规则与净化,P5,done,codex,手工路径: 设置->源管理->替换净化->字典规则->右上角更多->本地导入->选择txt/json->勾选候选->导入; 校验候选列表显示新增/已有且默认仅勾选新增；确认后按名称覆盖写入并返回列表可见,对齐 legado DictRuleActivity.menu_import_local 语义: 仅允许txt/json本地文件导入；导入前展示候选并按本地同名规则标记新增/已有；默认勾选新增并仅导入勾选项
217,dict_rule.xml,@+id/menu_import_onLine,@string/import_on_line,网络导入,规则与净化,P5,done,codex,手工路径: 设置->源管理->替换净化->字典规则->右上角更多->网络导入->输入URL并导入; 校验URL可进入候选列表且默认仅勾选新增；确认后按名称覆盖写入并刷新列表；历史记录支持点选回填与删除,对齐 legado DictRuleActivity.menu_import_onLine 语义: 网络导入先弹URL输入层并维护 dictRuleUrls 历史；确认后进入导入字典规则候选弹层；仅导入勾选项并保持新增默认选中
218,dict_rule.xml,@+id/menu_import_qr,@string/import_by_qr_code,二维码导入,规则与净化,P5,done,codex,手工路径: 设置->源管理->替换净化->字典规则->右上角更多->二维码导入->扫码导入; 校验扫码结果可进入候选列表且默认仅勾选新增；确认后按名称覆盖写入并刷新列表；扫码取消或空结果静默返回,对齐 legado DictRuleActivity.menu_import_qr 语义: 点击后仅拉起扫码并将扫码文本直接交给导入字典规则候选弹层；候选状态与默认勾选规则保持新增优先；二维码导入不写入 dictRuleUrls 网络历史
219,dict_rule.xml,@+id/menu_import_default,@string/import_default_rule,导入默认规则,规则与净化,P5,done,codex,flutter test test/simple_reader_view_compile_test.dart 与 flutter test test/widget_test.dart 通过；手工路径: 设置->源管理->替换净化->字典规则->右上角更多->导入默认规则；校验默认规则按名称覆盖写入且列表刷新；重复导入不清理非默认规则,对齐 legado DictRuleActivity.menu_import_default 语义: 点击后直接导入默认字典规则；导入行为按 name 覆盖写入（REPLACE）并保留非同名本地规则；不追加成功提示
221,dict_rule_edit.xml,@+id/menu_save,@string/action_save,保存,规则与净化,P5,done,codex,命令: dart format lib/features/reader/views/dict_rule_edit_view.dart lib/features/reader/views/dict_rule_manage_view.dart lib/features/reader/services/dict_rule_store.dart；手工路径（待回归）: 设置->源管理->替换净化->字典规则->右上角加号->填写名称/URL规则/显示规则->保存；手工路径（待回归）: 设置->源管理->替换净化->字典规则->点击已有规则->修改名称后保存,对齐 legado DictRuleEditDialog.menu_save 语义: 编辑页提供顶栏一级保存入口；保存时仅提交 name/urlRule/showRule 并保留 enabled/sortNumber；管理页按“删除旧名再按新名写入”刷新规则列表；保存成功不追加扩展提示
223,dict_rule_edit.xml,@+id/menu_paste_rule,@string/paste_rule,粘贴规则,规则与净化,P5,done,codex,flutter test test/simple_reader_view_compile_test.dart 通过；手工路径: 设置->源管理->替换净化->字典规则->任一规则->更多->粘贴规则; 校验剪贴板为空提示“剪贴板没有内容”，非法JSON提示“格式不对”，合法JSON对象仅回填名称/URL规则/显示规则且不自动保存,对齐 legado DictRuleEditDialog.menu_paste_rule 语义: 读取剪贴板文本后按 DictRule JSON 对象解析；成功仅执行 upRuleView 回填编辑表单；失败分支提示固定口径且不触发保存
224,dict_rule_sel.xml,@+id/menu_enable_selection,@string/enable_selection,启用所选,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/dict_rule_store.dart lib/features/reader/views/dict_rule_manage_view.dart；手工路径（待回归）: 设置->源管理->替换净化->字典规则->多选->勾选至少一条禁用规则->更多->启用所选; 校验所选规则 enabled 置为 true 且“禁用”标记消失并保持静默不提示,对齐 legado DictRuleActivity.menu_enable_selection 语义: 多选菜单“启用所选”仅对当前选中集合批量写入 enabled=true 并刷新列表；不追加成功提示且保持页面停留
225,dict_rule_sel.xml,@+id/menu_disable_selection,@string/disable_selection,禁用所选,规则与净化,P5,done,codex,命令: dart format lib/features/reader/views/dict_rule_manage_view.dart；手工路径（待回归）: 设置->源管理->替换净化->字典规则->多选->勾选至少一条启用规则->更多->禁用所选; 校验所选规则 enabled 置为 false 且“禁用”标记出现并保持静默不提示,对齐 legado DictRuleActivity.menu_disable_selection 语义: 多选菜单“禁用所选”仅对当前选中集合批量写入 enabled=false 并刷新列表；不追加成功提示且保持页面停留
226,dict_rule_sel.xml,@+id/menu_export_selection,@string/export_selection,导出所选,规则与净化,P5,done,codex,手工路径: 设置->源管理->替换净化->字典规则->多选->勾选规则->更多->导出所选; 校验默认文件名 exportDictRule.json 且取消导出静默返回并在成功后弹出路径可复制,对齐 legado DictRuleActivity.menu_export_selection 语义: 仅导出当前选中规则为 JSON 数组；导出成功后展示路径并支持复制
228,direct_link_upload_config.xml,@+id/menu_paste_rule,@string/paste_rule,粘贴规则,导入导出与备份,P8,done,codex,命令: dart format lib/features/settings/models/direct_link_upload_rule.dart lib/features/settings/services/direct_link_upload_config_service.dart lib/features/settings/views/direct_link_upload_config_view.dart lib/features/settings/views/other_settings_view.dart；手工路径（待回归）: 设置->其它设置->源设置->直链上传规则->右上角更多->粘贴规则；校验合法 JSON 对象仅回填上传URL和下载URL规则和注释和是否压缩，空剪贴板或非法 JSON 提示“剪贴板为空或格式不对”且不自动保存,对齐 legado DirectLinkUploadConfig.menu_paste_rule 语义: 读取剪贴板文本并按 Rule JSON 对象解析；成功仅执行 upView 回填表单；失败统一提示“剪贴板为空或格式不对”，不触发保存与跳转
229,direct_link_upload_config.xml,@+id/menu_import_default,@string/import_default_rule,导入默认规则,导入导出与备份,P8,done,codex,命令: dart format lib/features/settings/models/direct_link_upload_rule.dart lib/features/settings/services/direct_link_upload_config_service.dart lib/features/settings/views/direct_link_upload_config_view.dart lib/features/settings/views/other_settings_view.dart；手工路径（待回归）: 设置->其它设置->源设置->直链上传规则->右上角更多->导入默认规则->选择任一默认规则；校验仅回填上传URL和下载URL规则和注释和是否压缩且页面保持停留不自动保存,对齐 legado DirectLinkUploadConfig.menu_import_default 语义: 弹出默认规则选择器并展示 defaultRules；选中后仅执行 upView 回填当前表单，不触发保存与关闭
230,explore_item.xml,@+id/menu_edit,@string/edit,编辑,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一书源->编辑；校验长按菜单文案为“编辑”且点击后按当前 sourceUrl 打开书源编辑页；手工路径（待回归）: 长按菜单打开后在其他入口删除该书源再点击编辑；校验进入空白编辑承载且流程无异常,对齐 legado explore_item/menu_edit + ExploreAdapter.showMenu(menu_edit) + ExploreFragment.editSource + BookSourceEditActivity.initData 语义: 发现页长按菜单编辑动作收敛为以 sourceUrl 作为唯一编辑 key，点击后实时回查当前书源并进入编辑承载；源缺失时保持 legacy 同义空白编辑边界；不提前并入 menu_top(seq231)
231,explore_item.xml,@+id/menu_top,@string/to_top,置顶,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一书源->置顶；校验点击后目标书源移动到发现列表首位且流程静默无提示；手工路径（待回归）: 长按菜单打开后在其他入口删除该书源再点击置顶；校验流程静默返回且已删除书源不会被重新写回,对齐 legado explore_item/menu_top + ExploreAdapter.showMenu(menu_top) + ExploreFragment.toTop + ExploreViewModel.topSource + BookSourceDao.minOrder/upOrder 语义: 发现页长按菜单置顶动作收敛为点击后仅按 sourceUrl 回查当前书源并执行 customOrder=minOrder-1 写库；源缺失场景静默返回且不重插记录；不提前并入 menu_del(seq235)
232,explore_item.xml,@+id/menu_login,@string/login,登录,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一含 loginUrl 的书源->登录；校验 loginUrl 非空时展示“登录”入口，点击后先按 sourceUrl 回查当前书源并按 loginUi 原始非空/空值分流到表单登录或网页登录；手工路径（待回归）: 长按菜单打开后在其他入口删除该书源再点击登录；校验提示“未找到书源”并静默返回,对齐 legado explore_item/menu_login + ExploreAdapter.showMenu(menu_login) + SourceLoginActivity 语义: 发现页长按菜单登录动作收敛为以 sourceUrl 作为 key 的统一登录承载，loginUi 判定改为原始字符串非空；不提前并入 menu_search(seq233)
233,explore_item.xml,@+id/menu_search,@string/search,搜索,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一书源->搜索；校验点击后进入搜索页且范围显示当前书源；手工路径（待回归）: 长按菜单打开后在其他入口删除该书源再点击搜索；校验搜索页范围回退全部书源且流程无异常,对齐 legado explore_item/menu_search + ExploreAdapter.showMenu(menu_search) + ExploreFragment.searchBook + SearchScope 语义: 发现页长按菜单搜索动作收敛为按当前条目快照写入 SearchScope(name::url) 后直达搜索页；移除 scoped 入口对 sourceUrl 回查与异步改写依赖；不提前并入 menu_refresh(seq234)
234,explore_item.xml,@+id/menu_refresh,@string/refresh,刷新,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一书源->刷新；校验菜单文案为“刷新”且点击后清理该书源发现缓存，若条目已展开则立即重载发现入口且流程静默无提示；手工路径（待回归）: 长按菜单打开后点击刷新再展开该书源；校验重新展开会按新规则重拉发现入口并不复用旧缓存,对齐 legado explore_item/menu_refresh + ExploreAdapter.showMenu(menu_refresh) + clearExploreKindsCache 语义: 发现页长按菜单刷新动作保持常驻可见且仅执行发现缓存清理与条目刷新；不追加成功提示与中间弹层；不提前并入 menu_del(seq235)
235,explore_item.xml,@+id/menu_del,@string/delete,删除,系统与工具,P10,done,codex,命令: dart format lib/features/discovery/views/discovery_view.dart；手工路径（待回归）: 发现->长按任一书源->删除->取消/确定；校验长按菜单文案为“删除”，确认弹窗文案为“提醒/是否确认删除？\n<书源名>”，取消静默返回且确认后书源从发现列表移除且无成功提示；手工路径（待回归）: 发现->长按菜单打开后在其他入口删除该书源->返回点击删除并确认；校验流程静默无崩溃且不会重建已删书源,对齐 legado explore_item/menu_del + ExploreAdapter.showMenu(menu_del) + ExploreFragment.deleteSource + ExploreViewModel.deleteSource + SourceHelp.deleteBookSource 语义: 发现页长按菜单删除动作收敛为 legacy 同义“删除”；确认弹窗收敛为“提醒/是否确认删除？\n<书源名>”；确认后按 sourceUrl 执行删库并清理 sourceVariable_*；失败分支仅记录 ExceptionLogService(node=explore_item.menu_del)；不提前并入 qr_code_scan/action_choose_from_gallery(seq280)
236,file_chooser.xml,@+id/menu_create,@string/create_folder,创建文件夹,导入导出与备份,P8,done,codex,命令: dart format lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->选择文件夹->创建文件夹->输入新文件夹名并确定；书架->更多->选择文件夹->创建文件夹->不输入名称直接确定；校验创建成功后 importBookPath 写回新目录且空输入提示“文件夹名不能为空”,对齐 legado file_chooser/menu_create + FilePickerDialog.createFolder 语义: 选择文件夹入口新增“创建文件夹”分支并弹出名称输入框；空名称拦截且不关闭弹层；确认后按当前导入目录创建子目录并执行路径越界防护与失败日志记录
237,file_long_click.xml,@+id/menu_del,@string/delete,删除,导入导出与备份,P8,done,codex,命令: dart format lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->智能扫描->长按候选文件->删除；校验长按弹出仅含“删除”的菜单且删除成功后候选即时移除且流程不弹成功提示；手工路径（待回归）: 同入口长按候选文件->取消；校验候选列表与勾选状态保持不变,对齐 legado file_long_click/menu_del + FileManageActivity.showFileMenu 语义: 智能扫描候选条目补齐长按菜单“删除”；触发后直接调用删除链路并按实际删除结果刷新当前候选列表，删除中禁用重复触发且不追加成功提示
240,group_manage.xml,@+id/menu_add,@string/add_group,添加分组,书架/缓存/分组,P6,done,codex,命令: dart format lib/features/rss/views/rss_group_manage_view.dart；手工路径（待回归）: 订阅源管理->筛选与分组->分组管理->右上角添加->输入分组名并确定；校验弹窗标题为“添加分组”且空输入静默返回且非空仅批量更新未分组源,对齐 legado group_manage/menu_add + RssSource GroupManageDialog.addGroup 语义: 分组管理右上角添加入口弹出输入框并以非空输入触发 addGroup；提交后仅将未分组源写入该分组并保持静默无成功提示
241,import_book.xml,@+id/menu_select_folder,@string/select_folder,选择文件夹,导入导出与备份,P8,done,codex,命令: dart format lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->选择文件夹->选择任一可访问目录；书架->更多->添加本地->打开文件选择器；校验选择文件夹仅保存目录且取消静默返回，后续添加本地默认从已选目录打开,对齐 legado ImportBookActivity.menu_select_folder 语义: 书架“更多”菜单补齐同层级“选择文件夹”入口；点击后拉起目录选择并仅保存 importBookPath，取消不覆盖历史目录；后续本地导入文件选择默认复用该目录，非法目录/异常保持可观测失败提示并不覆盖旧值
246,import_book.xml,@+id/menu_scan_folder,@string/scan_folder,智能扫描,导入导出与备份,P8,done,codex,命令: dart format lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；命令: dart analyze lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->智能扫描->勾选文件->导入；校验扫描仅覆盖已选目录及子目录下 txt/epub 并支持勾选导入与失败明细,对齐 legado ImportBookActivity.menu_scan_folder 语义: 书架“更多”菜单补齐同层级“智能扫描”入口；点击后递归扫描 importBookPath 目录及子目录并展示候选列表；确认后仅导入已勾选项并汇总成功/失败结果，取消保持静默
247,import_book.xml,@+id/menu_import_file_name,@string/import_file_name,导入文件名,导入导出与备份,P8,done,codex,命令: dart format lib/features/import/book_import_file_name_rule_service.dart lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->导入文件名->输入规则并确定；书架->更多->添加本地->选择 txt 或 epub；校验规则持久化且导入时按 src 变量解析 name author,对齐 legado ImportBookActivity.menu_import_file_name 语义: 新增同层级“导入文件名”入口并弹出 JS 输入框提示“使用js处理文件名变量src，将书名作者分别赋值到变量name author”；点击确定仅保存 bookImportFileName；后续本地导入按规则覆盖 name author，规则异常记录日志并回退默认命名
248,import_book_sel.xml,@+id/menu_del_selection,@string/delete,删除,导入导出与备份,P8,done,codex,命令: dart format lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；命令: dart analyze lib/features/import/import_service.dart lib/features/bookshelf/views/bookshelf_view.dart；手工路径（待回归）: 书架->更多->智能扫描->勾选若干文件->删除；校验仅删除已勾选文件且候选项即时移除并保持静默,对齐 legado ImportBookActivity.menu_del_selection 语义: 智能扫描候选弹层补齐“删除”动作；触发后按当前勾选集合执行文件删除并在动作结束后从候选列表移除所选项；删除流程不追加成功提示，导入与删除分流保持独立
249,import_replace.xml,@+id/menu_new_group,@string/diy_source_group,自定义源分组,导入导出与备份,P8,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；手工路径（待回归）: 设置->源管理->替换净化->文本替换规则->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->自定义源分组；校验默认标题“自定义源分组”且设置分组后标题回显“【分组名】”并支持“+【分组名】”追加模式,对齐 legado import_replace/menu_new_group + ImportReplaceRuleDialog.alertCustomGroup + ImportReplaceRuleViewModel.importSelect 语义: 导入候选弹层补齐“自定义源分组”入口与“覆盖/追加”策略；确认导入时仅对已勾选规则应用分组改写（空分组不改写 覆盖模式直接写入分组 追加模式按 legacy 分组分隔规则去重后写回）并保持流程静默
250,import_source.xml,@+id/menu_new_group,@string/diy_source_group,自定义源分组,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->自定义源分组；校验默认标题“自定义源分组”且设置分组后标题回显“【分组名】”并支持“+【分组名】”追加模式,对齐 legado import_source/menu_new_group + ImportBookSourceDialog.alertCustomGroup + ImportBookSourceViewModel.importSelect 语义: 导入候选弹层补齐“自定义源分组”同层级入口并改为独立设置弹窗；确认导入时仅对已勾选书源应用分组改写（空分组不改写 覆盖模式直接写入分组 追加模式按 legacy 分组分隔规则去重后写回）并保持流程静默
251,import_source.xml,@+id/menu_select_new_source,@string/select_new_source,选中新增源,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->选中新增源；校验新增候选存在时仅切换新增候选勾选态（全选则取消 未全选则全选）且不影响更新/已有候选,对齐 legado import_source/menu_select_new_source + ImportBookSourceDialog.onMenuItemClick 语义: 导入候选弹层动作文案收敛为“选中新增源”；触发时仅遍历新增候选切换勾选状态并保持空新增集合静默 no-op
252,import_source.xml,@+id/menu_select_update_source,@string/select_update_source,选中更新源,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->选中更新源；校验更新候选存在时仅切换更新候选勾选态（全选则取消 未全选则全选）且不影响新增/已有候选,对齐 legado import_source/menu_select_update_source + ImportBookSourceDialog.onMenuItemClick 语义: 导入候选弹层动作文案收敛为“选中更新源”；触发时仅遍历更新候选切换勾选状态并保持空更新集合静默 no-op
253,import_source.xml,@+id/menu_keep_original_name,@string/keep_original_name,保留原名,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->保留原名->切换后取消弹层并重新进入；校验策略项文案为“保留原名”且切换后勾选状态保持；导入提交时仅影响“是否沿用本地书源名称”而不影响保留分组/保留启用状态,对齐 legado import_source/menu_keep_original_name + ImportBookSourceDialog.onMenuItemClick + ImportBookSourceViewModel.importSelect 语义: 导入候选弹层将“保留本地名称”文案收敛为 legacy 同义“保留原名”；切换动作即时持久化名称保留策略并在导入提交阶段仅控制名称覆盖边界
254,import_source.xml,@+id/menu_keep_group,@string/keep_group,保留分组,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->保留分组->切换后取消弹层并重新进入；校验策略项文案为“保留分组”且切换后勾选状态保持；导入提交时仅影响“是否沿用本地书源分组”而不影响保留原名/保留启用状态,对齐 legado import_source/menu_keep_group + ImportBookSourceDialog.onMenuItemClick + ImportBookSourceViewModel.importSelect 语义: 导入候选弹层将“保留本地分组”文案收敛为 legacy 同义“保留分组”；切换动作即时持久化分组保留策略并在导入提交阶段仅控制分组覆盖边界
255,import_source.xml,@+id/menu_keep_enable,@string/keep_enable,保留启用状态,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_list_view.dart；手工路径（待回归）: 设置->源管理->书源管理->更多->导入(本地/网络/扫码任一路径)->导入候选弹层->保留启用状态->切换后取消弹层并重新进入；校验策略项文案为“保留启用状态”且切换后勾选状态保持；导入提交时仅影响“是否沿用本地书源启用/发现启用状态”而不影响保留原名/保留分组,对齐 legado import_source/menu_keep_enable + ImportBookSourceDialog.onMenuItemClick + ImportBookSourceViewModel.importSelect 语义: 导入候选弹层“保留启用状态”切换动作改为即时持久化并在导入提交阶段仅控制 enabled/enabledExplore 覆盖边界
278,open_url_confirm.xml,@+id/menu_disable_source,@string/disable_source,禁用源,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_login_webview_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一含 loginUrl 的书源->登录(Web)->在页面内触发外部应用 scheme 跳转->跳转确认弹窗->禁用源；校验点击后当前登录页关闭且目标书源 enabled 置为 false，无确认弹窗与成功提示,对齐 legado open_url_confirm/menu_disable_source + OpenUrlConfirmDialog.onMenuItemClick + OpenUrlConfirmViewModel.disableSource 语义: 外部跳转确认弹窗补齐“禁用源”动作，点击后按 sourceUrl 回查并静默写库 enabled=false，再关闭当前承载页；不提前并入 menu_delete_source(seq279)
279,open_url_confirm.xml,@+id/menu_delete_source,@string/delete_source,删除源,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_login_webview_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一含 loginUrl 的书源->登录(Web)->在页面内触发外部应用 scheme 跳转->跳转确认弹窗->删除源->确认；校验先弹“提醒/是否确认删除？”二次确认，确认后当前登录页关闭且目标书源被删除并清理 sourceVariable_*,对齐 legado open_url_confirm/menu_delete_source + OpenUrlConfirmDialog.onMenuItemClick + OpenUrlConfirmViewModel.deleteSource + SourceHelp.deleteSource 语义: 外部跳转确认弹窗补齐“删除源”动作；点击后先弹 legacy 同义二次确认框，确认后按 sourceUrl 执行“删库 + 清理源变量”并关闭当前承载页；全流程无成功提示，异常仅日志可观测；不提前并入 save/menu_save(seq347)
280,qr_code_scan.xml,@+id/action_choose_from_gallery,@string/gallery,图库,系统与工具,P10,done,codex,命令: dart format lib/features/common/views/qr_scan_view.dart；手工路径（待回归）: 任一支持扫码入口(如 书源编辑/规则导入)->进入扫码页->右上角图库->选择含二维码图片；校验扫码页右上角出现“图库”动作，选图后命中二维码则返回文本并关闭扫码页；手工路径（待回归）: 同入口->右上角图库->选择无二维码图片 或 解析异常图片；校验扫码页直接关闭并返回空结果；手工路径（待回归）: 同入口->右上角图库->取消选图；校验扫码页保持当前状态且不退出,对齐 legado qr_code_scan/action_choose_from_gallery + QrCodeActivity.onCompatOptionsItemSelected(action_choose_from_gallery) + HandleFileContract(IMAGE) + SelectImageContract + QRCodeUtils.parseCodeResult 语义: 扫码页顶栏补齐一级“图库”动作；触发后拉起系统图片选择并按 `analyzeImage` 解析二维码，命中结果即返回文本关闭扫码页，未命中/解析异常返回空结果并关闭扫码页，取消选图保持扫码页不退出；异常分支记录 ExceptionLogService(node=qr_code_scan.action_choose_from_gallery)；不提前并入 verification_code/menu_ok(seq402)
281,replace_edit.xml,@+id/menu_save,@string/action_save,保存,规则与净化,P5,done,codex,命令: dart format lib/features/replace/models/replace_rule.dart lib/features/replace/views/replace_rule_edit_view.dart lib/features/replace/views/replace_rule_list_view.dart lib/features/reader/views/simple_reader_view.dart；flutter test test/search_view_compile_test.dart test/simple_reader_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->替换净化->文本替换规则->编辑任一规则->右上角保存；校验无效规则提示 save error 且保存失败不退出页面,对齐 legado ReplaceEditActivity.menu_save 语义: 点击保存先执行规则有效性校验；order 为 Int.MIN_VALUE 时按 maxOrder+1 分配；保存成功关闭编辑页且不提示成功；保存失败提示 save error 并停留当前页
283,replace_edit.xml,@+id/menu_paste_rule,@string/paste_rule,粘贴规则,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_edit_view.dart；手工路径: 设置->源管理->替换净化->文本替换规则->编辑任一规则->右上角更多->粘贴规则; 校验空剪贴板提示“剪贴板为空”且非法JSON提示“格式不对”，合法JSON对象仅回填编辑表单并停留当前页不自动保存,对齐 legado ReplaceEditActivity.menu_paste_rule 语义: 粘贴入口位于编辑页更多菜单；剪贴板解析成功仅执行 upReplaceView 等价表单回填；失败分支固定口径提示且不触发保存与跳转
293,replace_rule_item.xml,@+id/menu_bottom,@string/to_bottom,置底,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->任一规则右侧更多->置底；校验目标规则后移且无成功提示；对齐 legado ReplaceRuleActivity.menu_bottom 与 ReplaceRuleViewModel.toBottom 的静默置底语义
294,replace_rule_item.xml,@+id/menu_del,@string/delete,删除,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->任一规则右侧更多->删除->取消/确定；校验菜单含删除入口、弹出“提醒 + 是否确认删除？\\n规则名”确认框、确认后删除并刷新且无成功提示；对齐 legado ReplaceRuleAdapter.menu_del 与 ReplaceRuleActivity.delete 的删除确认语义
295,replace_rule_sel.xml,@+id/menu_enable_selection,@string/enable_selection,启用所选,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->多选->勾选至少一条禁用规则->更多->启用所选；校验仅所选规则 enabled 置为 true 且列表保持当前页静默刷新；对齐 legado ReplaceRuleActivity.menu_enable_selection 与 ReplaceRuleViewModel.enableSelection 的批量启用语义
296,replace_rule_sel.xml,@+id/menu_disable_selection,@string/disable_selection,禁用所选,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->多选->勾选至少一条启用规则->更多->禁用所选；校验仅所选规则 enabled 置为 false 且列表保持当前页静默刷新；对齐 legado ReplaceRuleActivity.menu_disable_selection 与 ReplaceRuleViewModel.disableSelection 的批量禁用语义
297,replace_rule_sel.xml,@+id/menu_top_sel,@string/selection_to_top,置顶所选,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->多选->勾选至少两条规则->更多->置顶所选；校验所选规则按当前列表顺序批量上移到顶部且无成功提示；对齐 legado ReplaceRuleActivity.menu_top_sel 与 ReplaceRuleViewModel.topSelect 的静默批量置顶语义
298,replace_rule_sel.xml,@+id/menu_bottom_sel,@string/selection_to_bottom,置底所选,规则与净化,P5,done,codex,命令: dart format lib/features/replace/views/replace_rule_list_view.dart；flutter test test/search_view_compile_test.dart test/widget_test.dart 通过,手工路径: 设置->源管理->替换净化->文本替换规则->多选->勾选至少两条规则->更多->置底所选；校验所选规则按当前列表顺序批量下移到底部且无成功提示；对齐 legado ReplaceRuleActivity.menu_bottom_sel 与 ReplaceRuleViewModel.bottomSelect 的静默批量置底语义
300,rss_articles.xml,@+id/menu_login,@string/login,登录,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一含 loginUrl 的订阅源进入文章列表->右上角更多->登录；校验 loginUrl 非空时显示“登录”入口且点击后按 loginUi 非空/空值分流到表单登录/网页登录，loginUrl 为空时不展示入口,对齐 legado rss_articles/menu_login + RssSortActivity.onMenuOpened/onCompatOptionsItemSelected + SourceLoginActivity 语义: RSS 文章列表页补齐同层级“登录”动作并按 rssSource.sourceUrl 触发统一登录承载；不提前并入 menu_refresh_sort(seq301)
301,rss_articles.xml,@+id/menu_refresh_sort,@string/refresh_sort,刷新分类,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；dart analyze lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->刷新分类；校验“刷新分类”入口常驻可见（无 loginUrl 时仅显示刷新分类），点击后清理当前源 sort 缓存并立即重算分类预览（分类数量/Tab 显隐按重算结果更新）,对齐 legado rss_articles/menu_refresh_sort + RssSortActivity.onCompatOptionsItemSelected(menu_refresh_sort) + RssSortViewModel.clearSortCache + RssSource.removeSortCache 语义: RSS 文章列表页补齐“刷新分类”动作；点击后仅清理当前源分类缓存并触发分类重建，不追加成功提示；不提前并入 menu_read_record(seq305)
302,rss_articles.xml,@+id/menu_set_source_variable,@string/set_source_variable,设置源变量,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；dart analyze lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->设置源变量；校验菜单新增“设置源变量”且点击后打开变量编辑承载（标题“设置源变量”、说明文案“源变量可在js中通过source.getVariable()获取”）；输入空串或 JSON 后保存并重进同入口，校验仅写入 sourceVariable_<sourceUrl> 且内容可回显，取消保持静默不落盘,对齐 legado rss_articles/menu_set_source_variable + RssSortActivity.setSourceVariable + VariableDialog(menu_save) + BaseSource.setVariable 语义: RSS 文章列表页补齐“设置源变量”同层级动作；点击后打开源变量编辑承载并按保存键写入 sourceVariable_<sourceUrl>（空串可保存），取消与成功均不追加提示；不提前并入 menu_edit_source(seq303)/menu_switch_layout(seq304)/menu_clear(seq306)
303,rss_articles.xml,@+id/menu_edit_source,@string/edit_source,编辑源,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->编辑源；校验点击后按当前 sourceUrl 打开订阅源编辑页并回显该源信息；在编辑页修改名称或分类后点击保存返回，校验文章列表页标题与分类预览刷新；在编辑页直接返回取消，校验文章列表页不触发刷新,对齐 legado rss_articles/menu_edit_source + RssSortActivity.onCompatOptionsItemSelected(menu_edit_source) + editSourceResult(RESULT_OK->initData/upFragments) 语义: RSS 文章列表页补齐“编辑源”同层级动作；点击后按 rssSource.sourceUrl 打开 RssSourceEditView，且仅保存返回(result=true)刷新页面状态与分类预览，取消保持静默；不提前并入 menu_switch_layout(seq304)/menu_clear(seq306)
304,rss_articles.xml,@+id/menu_switch_layout,@string/switchLayout,切换布局,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->切换布局；校验每次点击按 articleStyle 轮换 0->1->2->0 且页面“布局模式”回显同步更新；手工路径（待回归）: 连续切换后返回订阅列表再重进同一源；校验布局模式回显保持上次切换结果,对齐 legado rss_articles/menu_switch_layout + RssSortActivity.onCompatOptionsItemSelected(menu_switch_layout) + RssSortViewModel.switchLayout 语义: RSS 文章列表页补齐“切换布局”同层级动作；点击后仅对当前源执行 articleStyle 轮换并持久化，流程静默且不新增成功提示；失败分支仅记录 ExceptionLogService(node=rss_articles.menu_switch_layout)；不提前并入 menu_clear(seq306)
305,rss_articles.xml,@+id/menu_read_record,@string/read_record,阅读记录,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->阅读记录；校验菜单新增“阅读记录”并打开 RSS 阅读记录页，记录列表为空时显示“暂无阅读记录”，点击“清空”后出现“确定删除 N 条阅读记录吗？”确认框，确认后清空列表且页面保持可继续操作；对齐 legado rss_articles/menu_read_record + RssSortActivity.onCompatOptionsItemSelected(menu_read_record) + ReadRecordDialog 语义: RSS 文章列表页补齐“阅读记录”同层级动作；点击后打开阅读记录承载并复用既有清空确认链路；不提前并入 menu_set_source_variable(seq302)/menu_edit_source(seq303)/menu_switch_layout(seq304)/menu_clear(seq306)
306,rss_articles.xml,@+id/menu_clear,@string/clear,清除,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->清除；校验触发后无确认弹窗无成功提示且页面保持可继续操作；手工路径（待回归）: 同一订阅源先触发抓取文章后执行清除并重进列表；校验该源文章缓存已清空,对齐 legado rss_articles/menu_clear + RssSortActivity.onCompatOptionsItemSelected(menu_clear) + RssSortViewModel.clearArticles + RssArticleDao.delete 语义: RSS 文章列表页补齐“清除”同层级动作；点击后仅按当前 sourceUrl 清空 RSS 文章缓存并静默返回；失败分支仅记录 ExceptionLogService(node=rss_articles.menu_clear)；不提前并入 rss_favorites/menu_group(seq307)
307,rss_favorites.xml,@+id/menu_group,@string/group,分组,RSS,P7,done,codex,命令: dart run build_runner build --delete-conflicting-outputs；dart format lib/features/rss/views/rss_articles_placeholder_view.dart lib/core/database/repositories/rss_star_repository.dart lib/features/rss/models/rss_star.dart lib/core/database/drift/source_drift_database.dart lib/main.dart；手工路径（待回归）: 订阅->右上角收藏->收藏夹->右上角分组；校验分组菜单动态展示所有收藏分组且点击后切换当前分组列表；手工路径（待回归）: 收藏仅有 1 个分组时进入收藏夹；校验顶部滑动分组控件隐藏但“分组”入口仍可触发,对齐 legado rss_favorites/menu_group + RssFavoritesActivity.onCompatCreateOptionsMenu/upGroupsMenu/onCompatOptionsItemSelected(item.groupId==menu_group) + RssStarDao.flowGroups/flowByGroup 语义: 收藏页由占位承载切换为收藏夹承载并补齐“分组”顶栏一级动作；分组项基于 rss_star_records.group_name 动态生成并按组名排序，点击后切换当前分组列表且全流程静默；不提前并入 menu_del_group(seq308)/menu_del_all(seq309)
308,rss_favorites.xml,@+id/menu_del_group,@string/delete_select_group,删除当前分组,RSS,P7,done,codex,命令: dart format lib/core/database/repositories/rss_star_repository.dart lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->右上角收藏->收藏夹->右上角更多->删除当前分组->取消/确定；校验出现确认文案“确定删除\n<当前分组>分组”且取消不删确认后仅删除当前分组收藏并静默返回；手工路径（待回归）: 收藏为空时同入口触发删除当前分组；校验流程静默返回不崩溃,对齐 legado rss_favorites/menu_del_group + RssFavoritesActivity.deleteGroup + RssStarDao.deleteByGroup 语义: 收藏夹补齐“更多->删除当前分组”单项动作；点击后以当前分组为目标弹确认框并在确认后按 group_name 删除收藏记录；取消保持静默且失败分支仅记录 ExceptionLogService(node=rss_favorites.menu_del_group)；不提前并入 menu_del_all(seq309)
309,rss_favorites.xml,@+id/menu_del_all,@string/delete_all,删除所有,RSS,P7,done,codex,命令: dart format lib/core/database/repositories/rss_star_repository.dart lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->右上角收藏->收藏夹->右上角更多->删除所有->取消/确定；校验出现确认文案“确定删除\n<全部>收藏”且取消不删确认后删除全部收藏并静默返回；手工路径（待回归）: 收藏为空时同入口触发删除所有；校验仍弹确认框且确认后流程静默不崩溃,对齐 legado rss_favorites/menu_del_all + RssFavoritesActivity.deleteAll + RssStarDao.deleteAll 语义: 收藏夹补齐“更多->删除所有”单项动作；点击后弹确认框并在确认后清空全部收藏记录；取消保持静默且失败分支仅记录 ExceptionLogService(node=rss_favorites.menu_del_all)；不提前并入 rss_main_item/menu_top(seq310)
310,rss_main_item.xml,@+id/menu_top,@string/to_top,置顶,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_subscription_view.dart；手工路径（待回归）: 订阅->长按任一启用订阅源->置顶；校验目标源移动到启用列表顶部且不弹成功提示；手工路径（待回归）: 源被删除后再次触发置顶；校验流程静默返回不崩溃,对齐 legado rss_main_item/menu_top + RssAdapter.showMenu(menu_top) + RssFragment.toTop + RssViewModel.topSource 语义: 长按订阅源条目动作面板保持“置顶”入口；点击后按 customOrder=minOrder-1 写库并静默刷新；失败分支仅记录 ExceptionLogService(node=rss_main_item.menu_top)；不提前并入 menu_edit(seq311)/menu_disable(seq312)/menu_del(seq313)
311,rss_main_item.xml,@+id/menu_edit,@string/edit,编辑,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_subscription_view.dart；手工路径（待回归）: 订阅->长按任一启用订阅源->编辑；校验动作面板仅保留 置顶/编辑/禁用/删除 四项并点击编辑后直接打开订阅源编辑页；手工路径（待回归）: 编辑页直接返回取消；校验订阅列表保持静默且不触发额外刷新,对齐 legado rss_main_item/menu_edit + RssAdapter.showMenu(menu_edit) + RssFragment.edit 语义: 长按订阅源条目动作面板保持 legacy 同层级四项结构并移除扩展入口分组筛选；点击编辑仅按 sourceUrl 打开 RssSourceEditView 且无确认弹窗/无成功提示/无保存结果分支；不提前并入 menu_disable(seq312)/menu_del(seq313)
312,rss_main_item.xml,@+id/menu_disable,@string/disable_source,禁用源,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_subscription_view.dart；手工路径（待回归）: 订阅->长按任一启用订阅源->禁用；校验目标源从“启用订阅源”列表移除且无确认弹窗/无成功提示；手工路径（待回归）: 源被删除后再次触发禁用；校验流程静默返回不崩溃,对齐 legado rss_main_item/menu_disable + RssAdapter.showMenu(menu_disable) + RssFragment.disable + RssViewModel.disable 语义: 长按订阅源条目动作面板保持“禁用”入口；点击后按 sourceUrl 回查当前源并写入 enabled=false；源不存在时静默返回；失败分支仅记录 ExceptionLogService(node=rss_main_item.menu_disable)；不提前并入 menu_del(seq313)
313,rss_main_item.xml,@+id/menu_del,@string/delete,删除,RSS,P7,done,codex,命令: dart format lib/core/database/repositories/rss_source_repository.dart lib/features/rss/views/rss_subscription_view.dart；手工路径（待回归）: 订阅->长按任一启用订阅源->删除->取消/确定；校验确认弹窗标题为“提醒”且文案为“确定删除\n<源名>”并且取消保持静默不删；手工路径（待回归）: 同入口确认删除后重进该源文章列表；校验源记录移除且该源 rssArticles 缓存与 sourceVariable_<sourceUrl> 同步清理且无成功提示；手工路径（待回归）: 源被删除后再次触发删除；校验流程静默返回不崩溃，对齐 legado rss_main_item/menu_del + RssAdapter.showMenu(menu_del) + RssFragment.del + RssViewModel.del + SourceHelp.deleteRssSources 语义: 长按订阅源条目动作面板保持“删除”入口；点击后弹 legacy 同义确认文案“确定删除\n<sourceName>”，确认后按 sourceUrl 回查并执行删源 + 清理该源文章缓存 + 删除源变量，源不存在时静默返回；失败分支仅记录 ExceptionLogService(node=rss_main_item.menu_del)；不提前并入 rss_read/menu_rss_star(seq315)
314,rss_read.xml,@+id/menu_rss_refresh,@string/refresh,刷新,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一 singleUrl 订阅源进入 RSS 阅读页->右上角刷新；校验顶栏新增“刷新”一级动作且点击后刷新状态更新为最近刷新时间与次数并保持全流程静默无成功提示；对齐 legado rss_read/menu_rss_refresh + ReadRssActivity.onCompatOptionsItemSelected(menu_rss_refresh) + ReadRssViewModel.refresh 语义: RSS 阅读页补齐顶栏一级“刷新”入口并保持动作静默执行与页面可继续操作；不提前并入 menu_rss_star(seq315)/menu_share_it(seq316)/menu_aloud(seq317)/menu_login(seq318)/menu_browser_open(seq319)
315,rss_read.xml,@+id/menu_rss_star,@string/favorite,收藏,RSS,P7,done,codex,命令: dart format lib/core/database/repositories/rss_star_repository.dart lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->右上角收藏->任一收藏条目进入阅读页->右上角星标；校验初始为实心星标且点击后弹收藏设置弹层，删除收藏后星标回落为空心；手工路径（待回归）: 订阅->点击 singleUrl 订阅源进入 RSS 阅读页；校验无文章命中时顶栏不显示星标入口；对齐 legado rss_read/menu_rss_star + ReadRssActivity.onPrepareOptionsMenu/onCompatOptionsItemSelected(menu_rss_star) + RssFavoritesDialog + ReadRssViewModel.addFavorite/updateFavorite/delFavorite 语义: RSS 阅读页补齐顶栏一级星标入口并按 link 命中文章时显示；点击后先确保当前文章入收藏再打开“收藏设置”弹层，支持编辑标题/分组与删除收藏，取消保持静默；星标图标按是否在收藏中切换，不提前并入 menu_share_it(seq316)/menu_aloud(seq317)/menu_browser_open(seq319)
316,rss_read.xml,@+id/menu_share_it,@string/share,分享,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一 singleUrl 订阅源进入 RSS 阅读页->右上角分享；校验顶栏新增“分享”一级动作且点击后直接触发系统分享当前 link；手工路径（待回归）: 订阅->从无 link 的入口进入 RSS 阅读页->右上角分享；校验弹出轻提示“Null url”且不出现成功或失败弹窗；对齐 legado rss_read/menu_share_it + ReadRssActivity.onCompatOptionsItemSelected(menu_share_it) + Context.share 语义: RSS 阅读页补齐顶栏一级“分享”入口；点击后按 link 命中分享文本并直接走系统分享；未命中时提示 Null url；分享异常静默吞掉；不提前并入 menu_aloud(seq317)/menu_browser_open(seq319)
317,rss_read.xml,@+id/menu_aloud,@string/read_aloud,朗读,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一 singleUrl 订阅源进入 RSS 阅读页（link 命中文章）->右上角朗读；校验新增一级“朗读”动作且首次点击后图标切换为停止并在页面回显“朗读中”；手工路径（待回归）: 同入口再次点击朗读；校验朗读停止且图标回落为喇叭并保持全流程静默无成功提示；手工路径（待回归）: 订阅->从无 link 或无正文命中入口进入 RSS 阅读页->右上角朗读；校验流程静默返回且不弹提示；对齐 legado rss_read/menu_aloud + ReadRssActivity.onPrepareOptionsMenu/onCompatOptionsItemSelected(menu_aloud)/readAloud + ReadRssViewModel.readAloud 语义: RSS 阅读页补齐顶栏一级“朗读”入口并按播放态在“朗读/停止”图标间切换；触发时优先提取当前文章正文文本并调用 TTS，空文本场景静默返回；失败分支仅记录 ExceptionLogService(node=rss_read.menu_aloud)；不提前并入 menu_browser_open(seq319)
318,rss_read.xml,@+id/menu_login,@string/login,登录,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一 singleUrl 订阅源进入 RSS 阅读页（origin 命中 sourceUrl 且配置 loginUrl）->右上角更多->登录；校验 loginUrl 非空时显示“登录”入口且点击后按 loginUi 非空或空值分流到表单登录或网页登录，loginUrl 为空或 origin 未命中 sourceUrl 时不展示入口；对齐 legado rss_read/menu_login + ReadRssActivity.onMenuOpened/onCompatOptionsItemSelected + SourceLoginActivity 语义: RSS 阅读页在保留顶栏“刷新”一级动作前提下补齐“更多->登录”单项入口；显隐按 origin 命中的 rssSource.loginUrl 控制，触发按 rssSource.sourceUrl 进入统一登录承载；不提前并入 menu_rss_star(seq315)/menu_share_it(seq316)/menu_aloud(seq317)/menu_browser_open(seq319)
319,rss_read.xml,@+id/menu_browser_open,@string/open_in_browser,浏览器打开,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_articles_placeholder_view.dart；手工路径（待回归）: 订阅->点击任一 singleUrl 订阅源进入 RSS 阅读页->右上角更多->浏览器打开；校验可直接拉起系统浏览器且无成功提示；手工路径（待回归）: 订阅->从无 link 的入口进入 RSS 阅读页->右上角更多->浏览器打开；校验提示“url null”且页面保持当前阅读页,对齐 legado rss_read/menu_browser_open + ReadRssActivity.onCompatOptionsItemSelected(menu_browser_open) + Context.openUrl 语义: RSS 阅读页更多菜单补齐“浏览器打开”入口并保持与登录同层级；触发优先命中当前阅读 URL（link->article.link->origin）后外部浏览器打开；无 URL 时提示 url null；打开失败仅记录 ExceptionLogService(node=rss_read.menu_browser_open) 并提示 open url error；不提前并入 rss_read_record/menu_clear(seq320)
320,rss_read_record.xml,@+id/menu_clear,@string/clear,清除,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_read_record_view.dart；手工路径（待回归）: 订阅->点击任一订阅源进入文章列表->右上角更多->阅读记录->右上角清空；校验即使记录列表为空也可触发确认弹窗且标题为“提醒”文案为“确定删除\nN 阅读记录”；手工路径（待回归）: 同入口确认清空后返回列表；校验执行 deleteAllRecord 后列表清空且无成功提示,对齐 legado rss_read_record/menu_clear + ReadRecordDialog.onMenuItemClick(menu_clear) + RssSortViewModel.countRecords/deleteAllRecord 语义: 阅读记录页补齐 legacy 同义“清除”触发边界（空列表不禁用）并保持确认后 deleteAllRecord + 成功静默；失败分支仅记录 ExceptionLogService(node=rss_read_record.menu_clear)；不提前并入 rss_source/menu_group(seq321)
321,rss_source.xml,@+id/menu_group,@string/menu_action_group,分组,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角分组；校验弹层标题为“分组”，动作顺序为“分组管理/启用/禁用/需要登录/未分组/动态分组”；手工路径（待回归）: 订阅源管理->右上角分组->点击任一动态分组；校验搜索框写入 group:<分组名> 并立即筛选；手工路径（待回归）: 订阅源条目右侧更多；校验不再出现“筛选与分组”扩展入口,对齐 legado rss_source/menu_group + RssSourceActivity.onPrepareOptionsMenu/upGroupMenu/onCompatOptionsItemSelected(item.groupId==source_group) 语义: RSS 源管理页收敛顶栏“分组”动作语义与菜单顺序，移除“全部/筛选与分组”扩展入口；动态分组项按 flowGroups 生成并点击写入 group:<name> 即时筛选；不提前并入 menu_group_manage(seq322)/menu_enabled_group(seq323)/menu_disabled_group(seq324)/menu_group_null(seq326)
322,rss_source.xml,@+id/menu_group_manage,@string/group_manage,分组管理,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart lib/features/rss/views/rss_group_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角分组->分组管理；校验点击后以同层弹层承载“分组管理”而非整页跳转，顶部可执行“添加/完成”；手工路径（待回归）: 分组管理弹层->添加/编辑/删除分组->完成->重新打开分组菜单；校验动态分组列表按 flowGroups 回刷并可继续点击 group:<分组名> 筛选,对齐 legado rss_source/menu_group_manage + RssSourceActivity.onCompatOptionsItemSelected(menu_group_manage) + GroupManageDialog + RssSourceDao.flowGroups 语义: RSS 源管理页补齐“分组管理”同层弹层触发，弹层内支持添加/编辑/删除并依赖 flowGroups 自动回刷；不提前并入 menu_enabled_group(seq323)/menu_disabled_group(seq324)/menu_group_null(seq326)
323,rss_source.xml,@+id/menu_enabled_group,@string/enabled,已启用,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_manage_helper.dart lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；flutter test test/rss_source_manage_helper_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角分组->已启用；校验动作文案为“已启用”且点击后搜索框写入“已启用”并仅展示 enabled=true 订阅源；手工路径（待回归）: 搜索框输入“启用”；校验仍命中启用筛选结果（旧词兼容）,对齐 legado rss_source/menu_enabled_group + RssSourceActivity.onCompatOptionsItemSelected(menu_enabled_group) + upSourceFlow(flowEnabled) 语义: RSS 源管理页分组弹层将“启用”收敛为“已启用”，触发后查询词写入 legacy 同义“已启用”并即时筛选启用源；查询解析兼容旧词“启用”避免历史输入失效；不提前并入 menu_disabled_group(seq324)/menu_group_null(seq326)
324,rss_source.xml,@+id/menu_disabled_group,@string/disabled,已禁用,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_manage_helper.dart lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；flutter test test/rss_source_manage_helper_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角分组->已禁用；校验动作文案为“已禁用”且点击后搜索框写入“已禁用”并仅展示 enabled=false 订阅源；手工路径（待回归）: 搜索框输入“禁用”；校验仍命中禁用筛选结果（旧词兼容）,对齐 legado rss_source/menu_disabled_group + RssSourceActivity.onCompatOptionsItemSelected(menu_disabled_group) + upSourceFlow(flowDisabled) 语义: RSS 源管理页分组弹层将“禁用”收敛为“已禁用”，触发后查询词写入 legacy 同义“已禁用”并即时筛选禁用源；查询解析兼容旧词“禁用”避免历史输入失效；不提前并入 menu_group_null(seq326)/menu_add(seq327)
325,rss_source.xml,@+id/menu_group_login,@string/need_login,需要登录,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_manage_helper.dart lib/features/rss/views/rss_source_manage_view.dart；dart analyze lib/features/rss/services/rss_source_manage_helper.dart lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->右上角筛选与分组->需要登录；校验点击后查询词写入“需要登录”并立即筛选仅展示 loginUrl 非空的订阅源；手工路径（待回归）: 搜索框输入“需登录”；校验旧词仍能命中同一登录筛选结果,对齐 legado rss_source/menu_group_login + RssSourceActivity.onCompatOptionsItemSelected(menu_group_login) + upSourceFlow(flowLogin) 语义: RSS 源管理页筛选弹层将“需登录”收敛为“需要登录”并保持 legacy 同义触发；查询解析新增“需登录”兼容分支避免旧输入失效；不提前并入 menu_import_local(seq328)
326,rss_source.xml,@+id/menu_group_null,@string/no_group,未分组,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_manage_helper.dart；flutter test test/rss_source_manage_helper_test.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角分组->未分组；校验点击后查询词写入“未分组”并仅展示 sourceGroup 为空/空白或包含“未分组”的订阅源；手工路径（待回归）: 搜索框输入“无分组”；校验旧词仍命中未分组筛选结果,对齐 legado rss_source/menu_group_null + RssSourceActivity.onCompatOptionsItemSelected(menu_group_null) + upSourceFlow(flowNoGroup) + RssSourceDao.flowNoGroup 语义: RSS 源管理页保持“分组->未分组”入口写入 legacy 同义查询词“未分组”并即时筛选未分组源；查询解析新增“无分组”旧词兼容避免历史输入回退普通搜索；不提前并入 menu_add(seq327)
327,rss_source.xml,@+id/menu_add,@string/add_rss_source,新建订阅源,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->右上角更多->新建订阅源；校验由“更多”菜单首项进入新增订阅源编辑页且不再保留顶栏+直达入口；手工路径（待回归）: 清空订阅源后进入管理页空态->新建订阅源；校验空态动作文案收敛为“新建订阅源”并可打开新增编辑页,对齐 legado rss_source/menu_add + RssSourceActivity.onCompatOptionsItemSelected(menu_add) + startActivity<RssSourceEditActivity> 语义: RSS 源管理页补齐“更多->新建订阅源”一级入口并移除非 legacy 顶栏加号直达入口；点击后固定打开新增订阅源编辑承载且全流程静默；不提前并入 menu_list_src(seq333)
328,rss_source.xml,@+id/menu_import_local,@string/import_local,本地导入,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角设置(订阅源管理)->右上角更多->本地导入->选择 txt/json 文件->导入 RSS 源弹层；校验候选状态显示新增/更新/已有且默认勾选新增+更新，保留原名/保留分组/保留启用状态与自定义分组策略可生效；确认后静默关闭弹层并刷新订阅源列表；取消选档或取消导入保持静默,对齐 legado rss_source/menu_import_local + RssSourceActivity.onCompatOptionsItemSelected(menu_import_local) + HandleFileContract(FILE txt/json) + ImportRssSourceDialog/ImportRssSourceViewModel 语义: RSS 源管理页补齐“更多->本地导入”入口并固定仅允许 txt/json 本地文件；读取成功后进入候选导入弹层，候选按 sourceUrl + lastUpdateTime 标记新增/更新/已有且默认勾选新增+更新；导入提交仅处理勾选项并保持成功静默；不提前并入 menu_import_onLine(seq329)/menu_import_qr(seq330)/menu_import_default(seq331)
329,rss_source.xml,@+id/menu_import_onLine,@string/import_on_line,网络导入,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角设置(订阅源管理)->右上角更多->网络导入->输入 http/https URL；校验先弹 URL 输入层（标题“网络导入”、placeholder=url）并可进入导入 RSS 源候选弹层；手工路径（待回归）: 网络导入输入层->历史记录点选回填与删除；校验历史键 rssSourceRecordKey 可回填和删除回写且仅 http/https 输入入历史；手工路径（待回归）: 候选弹层->确认导入；校验新增/更新默认勾选且提交成功静默关闭,对齐 legado rss_source/menu_import_onLine + RssSourceActivity.showImportDialog(importRecordKey=rssSourceRecordKey) + ImportRssSourceDialog/ImportRssSourceViewModel 语义: RSS 源管理页补齐“更多->网络导入”入口；点击后先走 URL 输入层并维护同名历史键；确认后复用既有 RSS 候选导入状态机（新增/更新/已有）与静默提交边界；不提前并入 menu_import_qr(seq330)/menu_import_default(seq331)
330,rss_source.xml,@+id/menu_import_qr,@string/import_by_qr_code,二维码导入,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->右上角设置(订阅源管理)->右上角更多->二维码导入->扫码后进入导入 RSS 源弹层；校验扫码文本可直接进入候选导入且默认勾选新增+更新；手工路径（待回归）: 扫码取消或空结果；校验静默返回且不写网络导入历史,对齐 legado rss_source/menu_import_qr + RssSourceActivity.onCompatOptionsItemSelected(menu_import_qr) + QrCodeResult + ImportRssSourceDialog/ImportRssSourceViewModel 语义: RSS 源管理页补齐“更多->二维码导入”入口；点击后拉起扫码并将扫码结果直接交给既有 RSS 候选导入状态机；扫码取消或空结果静默返回且二维码分支不写 rssSourceRecordKey 历史；不提前并入 menu_import_default(seq331)
331,rss_source.xml,@+id/menu_import_default,@string/import_default_rule,导入默认规则,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->右上角设置(订阅源管理)->右上角更多->导入默认规则；校验点击后直接执行默认订阅源导入（不弹候选层、无成功提示）并刷新列表；手工路径（待回归）: 导入前先将默认分组 sourceGroup=legado 的订阅源改名后再触发导入默认规则；校验默认源恢复为 assets/rss/rssSources.json 定义内容且非 legado 分组订阅源不受影响,对齐 legado rss_source/menu_import_default + RssSourceActivity.onCompatOptionsItemSelected(menu_import_default) + RssSourceViewModel.importDefault + DefaultData.importDefaultRssSources 语义: RSS 源管理页补齐“更多->导入默认规则”入口；点击后执行 deleteDefault(sourceGroup=legado)+insert(default rssSources) 直接导入链路；不经过候选导入弹层且成功静默
333,rss_source_debug.xml,@+id/menu_list_src,@string/list_src,列表源码,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_debug_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->编辑任一订阅源->右上角调试源->订阅源调试->右上角更多->列表源码；校验无论列表源码是否为空都直接打开源码承载页且标题固定为 Html 且不出现空源码拦截提示,对齐 legado rss_source_debug/menu_list_src + RssSourceDebugActivity.onCompatOptionsItemSelected(menu_list_src) + TextDialog 标题 Html 直接承载 listSrc 语义: 订阅源调试页在“更多”菜单首项补齐“列表源码”入口并直接承载原始列表响应（空值不拦截）；不改动 menu_content_src(seq334)/rss_source_item/menu_top(seq335)
334,rss_source_debug.xml,@+id/menu_content_src,@string/content_src,正文源码,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_debug_service.dart lib/features/rss/views/rss_source_debug_view.dart lib/features/rss/views/rss_source_edit_view.dart；dart analyze lib/features/rss/services/rss_source_debug_service.dart lib/features/rss/views/rss_source_debug_view.dart lib/features/rss/views/rss_source_edit_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->编辑任一订阅源->右上角调试源->订阅源调试->右上角更多->正文源码；校验无论正文源码是否为空都直接打开源码承载页且标题固定为 Html 且不出现空源码拦截提示,对齐 legado rss_source_debug/menu_content_src + RssSourceDebugActivity.onCompatOptionsItemSelected(menu_content_src) + TextDialog 标题 Html 直接承载 contentSrc 语义: 订阅源调试页补齐“正文源码”单项入口并直接承载原始正文响应且移除空源码拦截；为保证入口可达同步在订阅源编辑页补齐“调试源”触发并保持进入调试前先保存草稿
335,rss_source_item.xml,@+id/menu_top,@string/to_top,置顶,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->任一订阅源右侧更多->置顶；校验目标源移动到当前列表顶部且不弹成功提示；手工路径（待回归）: 在其它入口删除该源后回到管理页继续触发置顶；校验流程静默返回且不发生已删除源被重新插入,对齐 legado rss_source_item/menu_top + RssSourceAdapter.showMenu(menu_top) + RssSourceActivity.toTop + RssSourceViewModel.topSource 语义: 条目更多菜单收敛为置顶/置底/删除并保持置顶入口首项；点击后先按 sourceUrl 回查当前源未命中静默返回命中后按 minOrder-1 写入 customOrder 并由列表流刷新；失败分支仅记录 ExceptionLogService(node=rss_source_item.menu_top)；不提前并入 menu_bottom(seq336)/menu_del(seq337)
336,rss_source_item.xml,@+id/menu_bottom,@string/to_bottom,置底,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；flutter test test/rss_source_manage_view_compile_test.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->任一订阅源右侧更多->置底；校验目标源移动到当前列表底部且不弹成功提示；手工路径（待回归）: 在其它入口删除该源后回到管理页继续触发置底；校验流程静默返回且不发生已删除源被重新插入,对齐 legado rss_source_item/menu_bottom + RssSourceAdapter.showMenu(menu_bottom) + RssSourceActivity.toBottom + RssSourceViewModel.bottomSource 语义: 条目更多菜单保持置顶/置底/删除三项且置底入口次序不变；点击后先按 sourceUrl 回查当前源未命中静默返回命中后按 maxOrder+1 写入 customOrder 并由列表流刷新；失败分支仅记录 ExceptionLogService(node=rss_source_item.menu_bottom)；不提前并入 menu_del(seq337)
337,rss_source_item.xml,@+id/menu_del,@string/delete,删除,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->任一订阅源右侧更多->删除->取消/确定；校验确认弹窗标题为“提醒”且文案为“确定删除\\n<源名>”，取消保持静默不删；手工路径（待回归）: 同入口确认删除后返回管理页；校验目标源被删除且该源文章缓存与 sourceVariable_<sourceUrl> 同步清理且无成功提示；手工路径（待回归）: 在其它入口删除该源后回到管理页再次触发删除；校验流程静默返回不崩溃,对齐 legado rss_source_item/menu_del + RssSourceAdapter.showMenu(menu_del) + RssSourceActivity.del + RssSourceViewModel.del + SourceHelp.deleteRssSources 语义: 条目更多菜单保持“删除”入口；点击后先移除当前条目选中态再弹 legacy 同义确认文案“提醒/确定删除\\n<sourceName>”；仅确认后按 sourceUrl 回查并执行删源+清理该源文章缓存+删除源变量，源不存在时静默返回；失败分支仅记录 ExceptionLogService(node=rss_source_item.menu_del)；不提前并入 menu_enable_selection(seq338)
338,rss_source_sel.xml,@+id/menu_enable_selection,@string/enable_selection,启用所选,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少一条已禁用订阅源->底部更多->启用所选；校验仅所选源 enabled 置为 true 且无成功提示；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发启用所选；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_enable_selection + RssSourceActivity.onMenuItemClick(menu_enable_selection) + RssSourceViewModel.enableSelection 语义: 多选批量操作首项补齐“启用所选”；触发后仅对当前可见选中集合按 sourceUrl 回查命中源并批量写 enabled=true；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_enable_selection)；不提前并入 menu_disable_selection(seq339)
339,rss_source_sel.xml,@+id/menu_disable_selection,@string/disable_selection,禁用所选,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少一条已启用订阅源->底部更多->禁用所选；校验仅所选源 enabled 置为 false 且无成功提示；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发禁用所选；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_disable_selection + RssSourceActivity.onMenuItemClick(menu_disable_selection) + RssSourceViewModel.disableSelection 语义: 多选批量操作新增“禁用所选”入口并保持顺序紧随“启用所选”；触发后仅对当前可见选中集合按 sourceUrl 回查命中源并批量写 enabled=false；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_disable_selection)；不提前并入 menu_add_group(seq340)
340,rss_source_sel.xml,@+id/menu_add_group,@string/add_group,添加分组,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少一条订阅源->底部更多->添加分组->输入分组名称->确定；校验仅当前可见所选源追加该分组且无成功提示；手工路径（待回归）: 在添加分组弹窗输入关键字并点选候选分组后确定；校验候选来自现有分组且可回填输入框；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发添加分组；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_add_group + RssSourceActivity.selectionAddToGroups + RssSourceViewModel.selectionAddToGroups 语义: 多选批量操作新增“添加分组”入口并保持顺序位于“禁用所选”后“导出所选”前；点击后弹出“添加分组”输入框并提供已有分组候选；仅输入非空时对当前可见选中集合按 sourceUrl 回查命中源后执行 addGroup 并批量写库；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_add_group)；不提前并入 menu_remove_group(seq341)
341,rss_source_sel.xml,@+id/menu_remove_group,@string/remove_group,移除分组,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少一条含分组的订阅源->底部更多->移除分组->输入分组名称->确定；校验仅当前可见所选源移除对应分组且无成功提示；手工路径（待回归）: 在移除分组弹窗输入关键字并点选候选分组后确定；校验候选来自现有分组且可回填输入框；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发移除分组；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_remove_group + RssSourceActivity.selectionRemoveFromGroups + RssSourceViewModel.selectionRemoveFromGroups 语义: 多选批量操作新增“移除分组”入口并保持顺序位于“添加分组”后“导出所选”前；点击后弹出“移除分组”输入框并提供已有分组候选；仅输入非空时对当前可见选中集合按 sourceUrl 回查命中源后执行 removeGroup 并批量写库；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_remove_group)；不提前并入 menu_top_sel(seq342)
342,rss_source_sel.xml,@+id/menu_top_sel,@string/selection_to_top,置顶所选,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少两条订阅源->底部更多->置顶所选；校验所选源按当前选中集合旧顺序整体上移至列表顶部且无成功提示；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发置顶所选；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_top_sel + RssSourceActivity.onMenuItemClick(menu_top_sel) + RssSourceViewModel.topSource 语义: 多选批量操作新增“置顶所选”入口并保持顺序位于“移除分组”后“导出所选”前；触发后仅对当前可见选中集合按 sourceUrl 回查命中源并按 customOrder 升序后批量写 customOrder=minOrder-1-index；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_top_sel)；不提前并入 menu_bottom_sel(seq343)
343,rss_source_sel.xml,@+id/menu_bottom_sel,@string/selection_to_bottom,置底所选,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少两条订阅源->底部更多->置底所选；校验所选源按当前选中集合旧顺序整体下移至列表底部且无成功提示；手工路径（待回归）: 其它入口先删除其中一条选中源后返回管理页继续触发置底所选；校验已删除源静默跳过且不被回插,对齐 legado rss_source_sel/menu_bottom_sel + RssSourceActivity.onMenuItemClick(menu_bottom_sel) + RssSourceViewModel.bottomSource 语义: 多选批量操作新增“置底所选”入口并保持顺序位于“置顶所选”后“导出所选”前；触发后仅对当前可见选中集合按 sourceUrl 回查命中源并按 customOrder 升序后批量写 customOrder=maxOrder+1+index；无确认弹窗、无成功提示；失败分支仅记录 ExceptionLogService(node=rss_source_sel.menu_bottom_sel)；不提前并入 menu_share_source(seq345)
344,rss_source_sel.xml,@+id/menu_export_selection,@string/export_selection,导出所选,RSS,P7,done,codex,命令: dart format lib/features/rss/services/rss_source_import_export_service.dart lib/features/rss/views/rss_source_manage_view.dart；dart analyze lib/features/rss/services/rss_source_import_export_service.dart lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->右上角设置(订阅源管理)->勾选若干订阅源->底部更多->导出所选；校验默认文件名为 exportRssSource.json 且取消保存静默返回；手工路径（待回归）: 导出成功后查看提示框；校验标题为“导出成功”且可复制导出路径,对齐 legado rss_source_sel/menu_export_selection + RssSourceActivity.onMenuItemClick(menu_export_selection) + RssSourceViewModel.saveToFile 语义: RSS 源管理页补齐多选承载与“批量操作->导出所选”单项入口；导出集合仅取当前可见选中源并固定默认文件名 exportRssSource.json；取消导出静默返回且成功后展示路径并支持复制；不提前并入 menu_share_source(seq345)/menu_check_selected_interval(seq346)
345,rss_source_sel.xml,@+id/menu_share_source,@string/share_selected_source,分享选中源,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选至少一条订阅源->底部更多->分享选中源；校验可直接拉起系统分享面板且过程无额外提示；手工路径（待回归）: 关闭系统分享面板后返回管理页；校验页面停留当前列表且无额外弹窗,对齐 legado rss_source_sel/menu_share_source + RssSourceActivity.onMenuItemClick(menu_share_source) + RssSourceViewModel.saveToFile 语义: 多选批量操作新增“分享选中源”入口并保持顺序位于“导出所选”后“选中所选区间”前；触发后仅取当前可见选中集合生成临时 JSON 并直接调用系统分享；无确认弹窗、无成功提示；分享异常静默返回且不追加复制兜底；不提前并入 menu_check_selected_interval(seq346)
346,rss_source_sel.xml,@+id/menu_check_selected_interval,@string/check_selected_interval,选中所选区间,RSS,P7,done,codex,命令: dart format lib/features/rss/views/rss_source_manage_view.dart；手工路径（待回归）: 订阅->规则订阅->订阅源管理->勾选多条非连续订阅源->底部更多->选中所选区间；校验当前可见列表中最小/最大已选索引之间条目被连续补选且底栏计数即时刷新并保持静默无提示,对齐 legado rss_source_sel/menu_check_selected_interval + RssSourceActivity.onMenuItemClick(menu_check_selected_interval) + RssSourceAdapter.checkSelectedInterval 语义: 多选批量操作新增“选中所选区间”入口并保持顺序位于“分享选中源”后；触发后仅按当前可见列表中已选项最小/最大索引补齐连续选区并刷新计数；不写库、不弹提示；不提前并入 P10-seq4(menu_download)
347,save.xml,@+id/menu_save,@string/action_save,保存,导入导出与备份,P8,done,codex,命令: dart format lib/features/source/views/source_edit_legacy_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑书源（legacy）->更多->设置源变量->修改变量后右上角保存；校验变量编辑弹层使用顶栏一级保存动作，保存后关闭并写入 sourceVariable_<bookSourceUrl>，取消不落盘且全流程无成功提示,对齐 legado save.xml + VariableDialog.onMenuItemClick(menu_save) + BookSourceEditActivity.setSourceVariable 语义: 设置源变量承载改为顶栏一级保存动作并保持“保存即回写变量并关闭、取消不保存、异常仅可观测”边界；不提前并入 rss_articles/menu_login(seq300)
349,server_config.xml,@+id/menu_save,@string/action_save,保存,导入导出与备份,P8,done,codex,命令: dart format lib/features/bookshelf/views/remote_books_server_config_view.dart；手工路径（待回归）: 书架->更多->远程书籍->更多->服务器配置->新建或编辑服务器->修改名称或地址或账号或密码->右上角保存；校验仅在点击顶栏保存后写入服务器列表并关闭页面；手工路径（待回归）: 同页面修改后直接返回上一页；校验草稿不落盘,对齐 legado ServerConfigDialog.menu_save 语义: 配置页采用草稿态编辑并由顶栏一级“保存”统一提交；保存成功静默关闭页面且不自动切换当前选中服务器；保存失败提示“保存出错\\n<原因>”
350,servers.xml,@+id/menu_add,@string/create,新建,导入导出与备份,P8,done,codex,命令: dart format lib/features/bookshelf/models/remote_server.dart lib/features/bookshelf/services/remote_server_store.dart lib/features/bookshelf/views/remote_books_server_config_view.dart lib/features/bookshelf/views/remote_books_servers_view.dart lib/features/bookshelf/views/remote_books_placeholder_view.dart；手工路径（待回归）: 书架->更多->远程书籍->更多->服务器配置->右上角新建->填写名称地址账号密码->保存；校验保存后返回服务器列表且新增条目可见,对齐 legado ServersDialog.menu_add 语义: 服务器配置列表页补齐顶栏一级“新建”入口；点击后打开服务器配置编辑页并保存到服务器列表；不自动改写当前选中服务器，需通过“默认/取消/确定”底部动作确认选择
386,theme_list.xml,@+id/menu_import,剪贴板导入,剪贴板导入,主题与外观,P9,done,codex,命令: dart format lib/features/settings/models/theme_config_entry.dart lib/features/settings/services/theme_config_service.dart lib/features/settings/views/theme_config_list_view.dart lib/features/settings/views/settings_view.dart；手工路径（待回归）: 设置->主题->主题列表->右上角剪贴板导入；校验剪贴板为空时静默返回且不弹提示；非法主题 JSON 提示“格式不对，添加失败”；合法 Config JSON 导入后按 themeName 同名覆盖并刷新列表,对齐 legado theme_list/menu_import + ThemeListDialog.onMenuItemClick(menu_import) + ThemeConfig.addConfig 语义: 主题列表页补齐顶栏“剪贴板导入”动作；读取剪贴板首条文本后仅按单对象 Config 解析与颜色合法性校验导入；成功静默刷新且失败提示固定口径；不提前并入 theme_config/menu_theme_mode(seq385)
387,txt_toc_rule.xml,@+id/menu_add,@string/add,添加,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart lib/features/reader/views/txt_toc_rule_edit_view.dart；手工路径（待回归）: 设置->源管理->目录规则->右上角添加->填写名称与正则->保存；校验新增规则落库并显示在列表且名称为空提示“名称不能为空”且非法正则提示“正则语法错误或不支持(txt)：...”；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleActivity.menu_add 与 TxtTocRuleEditDialog.menu_save 语义: 顶栏新增“添加”一级入口；点击后进入规则编辑页；保存前校验名称与正则；仅保存成功回写规则并刷新列表
393,txt_toc_rule_edit.xml,@+id/menu_save,@string/action_save,保存,规则与净化,P5,done,codex,命令: dart format lib/features/reader/views/txt_toc_rule_edit_view.dart；手工路径（待回归）: 设置->源管理->目录规则->点击任一规则->修改名称/正则/示例后保存；清空示例后保存；校验保存后列表刷新且示例可被清空且不追加成功提示,对齐 legado TxtTocRuleEditDialog.menu_save 语义: 顶栏一级保存入口仅在校验通过后回传并关闭编辑页；保存提交字段仅 name/rule/example 并保留 id/enabled/serialNumber；修复示例清空无法保存的问题以贴齐 toString 空串写回边界
396,txt_toc_rule_item.xml,@+id/menu_top,@string/to_top,置顶,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/search_book_info_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->目录规则->任一规则右侧更多->置顶；校验目标规则移动到列表顶部且无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleAdapter.showMenu(menu_top) 与 TxtTocRuleViewModel.toTop 语义: 条目更多菜单新增“置顶”入口；点击后将目标规则 serialNumber 写为当前最小值减一并静默刷新列表
397,txt_toc_rule_item.xml,@+id/menu_bottom,@string/to_bottom,置底,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/search_book_info_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->目录规则->任一规则右侧更多->置底；校验目标规则移动到列表底部且无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleAdapter.showMenu(menu_bottom) 与 TxtTocRuleViewModel.toBottom 语义: 条目更多菜单新增“置底”入口；点击后将目标规则 serialNumber 写为当前最大值加一并静默刷新列表
398,txt_toc_rule_item.xml,@+id/menu_del,@string/delete,删除,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/search_book_info_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->目录规则->任一规则右侧更多->删除->取消/确定；校验先移除当前选中态后弹出“提醒/是否确认删除？\\n规则名”，取消不删库、确认后条目移除且无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleAdapter.showMenu(menu_del) 与 TxtTocRuleActivity.del 语义: 条目更多菜单新增“删除”入口；触发顺序保持“先移除选中态再弹确认框”；仅确认后删库并静默刷新列表
399,txt_toc_rule_sel.xml,@+id/menu_enable_selection,@string/enable_selection,启用所选,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/search_book_info_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->目录规则->多选->勾选至少一条禁用规则->更多->启用所选；校验仅选中规则 enabled 置为 true 且列表保持静默刷新无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleActivity.menu_enable_selection 与 TxtTocRuleViewModel.enableSelection 语义: 多选菜单“启用所选”仅对当前选中集合批量写入 enable=true 并刷新列表；不追加成功提示且保持页面停留
400,txt_toc_rule_sel.xml,@+id/menu_disable_selection,@string/disable_selection,禁用所选,规则与净化,P5,done,codex,命令: dart format lib/features/reader/services/txt_toc_rule_store.dart lib/features/reader/views/txt_toc_rule_manage_view.dart；flutter test test/simple_reader_view_compile_test.dart test/search_book_info_view_compile_test.dart 通过；手工路径（待回归）: 设置->源管理->目录规则->多选->勾选至少一条启用规则->更多->禁用所选；校验仅选中规则 enabled 置为 false 且列表保持静默刷新无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado TxtTocRuleActivity.menu_disable_selection 与 TxtTocRuleViewModel.disableSelection 语义: 多选菜单“禁用所选”仅对当前选中集合批量写入 enable=false 并刷新列表；不追加成功提示且保持页面停留
402,verification_code.xml,@+id/menu_ok,@string/ok,确认,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_debug_legacy_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->调试->输入 key -> 顶栏确认；校验顶栏新增一级确认图标且点击后触发与回车提交同义的调试执行流程并进入“调试运行中...”,对齐 legado verification_code/menu_ok + VerificationCodeDialog.onMenuItemClick(menu_ok) 语义: 调试承载页补齐一级“确认”动作，点击后按当前输入 key 直接提交调试（等价于输入后确认）；不提前并入 menu_disable_source(seq403)/menu_delete_source(seq404)
403,verification_code.xml,@+id/menu_disable_source,@string/disable_source,禁用源,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_debug_legacy_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->调试->右上角更多->禁用源；校验点击后当前调试页关闭且目标书源 enabled 置为 false 且无确认弹窗/无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado verification_code/menu_disable_source + VerificationCodeDialog.onMenuItemClick(menu_disable_source) + VerificationCodeViewModel.disableSource 语义: 调试承载页更多菜单补齐“禁用源”动作；点击后按 sourceUrl 回查并静默写库 enabled=false 且成功后关闭当前承载页；失败仅记录 ExceptionLogService(node=source.debug.verification_code.menu_disable_source) 可观测输出；不提前并入 menu_delete_source(seq404)
404,verification_code.xml,@+id/menu_delete_source,@string/delete_source,删除源,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_debug_legacy_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->调试->右上角更多->删除源->取消/确定；校验先弹“提醒/是否确认删除？\n<书源名>”二次确认且取消不删库；确认后当前调试页关闭并删除目标书源且清理 sourceVariable_* 且无成功提示；按仓库约束开发阶段未执行 flutter analyze,对齐 legado verification_code/menu_delete_source + VerificationCodeDialog.onMenuItemClick(menu_delete_source) + VerificationCodeViewModel.deleteSource + SourceHelp.deleteSource 语义: 调试承载页更多菜单补齐“删除源”动作；点击后先弹 legacy 同义二次确认框“提醒/是否确认删除？\n<书源名>”；确认后按 sourceUrl 执行删库与 sourceVariable 清理并关闭当前承载页；失败仅记录 ExceptionLogService(node=source.debug.verification_code.menu_delete_source) 可观测输出；不提前并入 web_view/menu_ok(seq405)
405,web_view.xml,@+id/menu_ok,@string/ok,确认,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->进入网页验证页后点击顶栏确认；校验顶栏新增一级确认图标且点击后关闭当前网页承载页并返回上级；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->进入网页承载页后点击顶栏确认；校验同样关闭并返回阅读页；按仓库约束开发阶段未执行 flutter analyze,对齐 legado web_view/menu_ok + WebViewActivity.onCompatOptionsItemSelected(menu_ok) 语义: 网页承载页补齐顶栏一级“确认”动作，点击后执行确认关闭当前承载页；不提前并入 menu_open_in_browser(seq406)/menu_copy_url(seq407)/menu_full_screen(seq408)/menu_disable_source(seq409)/menu_delete_source(seq410)
406,web_view.xml,@+id/menu_open_in_browser,@string/open_in_browser,浏览器打开,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->右上角更多->浏览器打开；校验外部浏览器被拉起且当前网页承载页保持停留；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->右上角更多->浏览器打开；校验外部浏览器按初始章节链接拉起且当前承载页不关闭；按仓库约束开发阶段未执行 flutter analyze,对齐 legado web_view/menu_open_in_browser + WebViewActivity.onCompatOptionsItemSelected(menu_open_in_browser) + Context.openUrl 语义: 网页承载页更多菜单补齐“浏览器打开”动作；点击后按 baseUrl 拉起系统外部浏览器且成功路径静默不关闭当前页；失败分支记录 ExceptionLogService(node=source.web_view.menu_open_in_browser) 并提示 open url error；不提前并入 menu_copy_url(seq407)/menu_full_screen(seq408)/menu_disable_source(seq409)/menu_delete_source(seq410)
407,web_view.xml,@+id/menu_copy_url,@string/copy_url,拷贝 URL,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->右上角更多->拷贝 URL；校验复制内容为 initialUrl(baseUrl) 且提示“复制完成”；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->右上角更多->拷贝 URL；校验行为同义且当前网页承载页保持停留；手工路径（待回归）: 阅读页->章节购买触发 payAction 网页->右上角更多->拷贝 URL；校验行为同义；按仓库约束开发阶段未执行 flutter analyze，对齐 legado web_view/menu_copy_url + WebViewActivity.onCompatOptionsItemSelected(menu_copy_url) + Context.sendToClip 语义: 网页承载页更多菜单补齐“拷贝 URL”动作；点击后复制 baseUrl 到剪贴板并提示复制完成；完成后回到全局 detail_later 队列继续推进 P2-seq170(book_toc/menu_log)
408,web_view.xml,@+id/menu_full_screen,@string/full_screen,全屏,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->右上角更多->全屏->返回；校验点击全屏后网页承载进入无顶栏全屏态且返回键先退出全屏再停留网页承载页；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->右上角更多->全屏->返回；校验行为同义且退出全屏后仍停留当前承载页；按仓库约束开发阶段未执行 flutter analyze,对齐 legado web_view/menu_full_screen + WebViewActivity.onCompatOptionsItemSelected(menu_full_screen) + toggleFullScreen 语义: 网页承载页更多菜单补齐“全屏”动作；点击后切换全屏状态并隐藏顶栏与系统栏；返回键优先退出全屏后再走页面返回；不提前并入 menu_disable_source(seq409)/menu_delete_source(seq410)
409,web_view.xml,@+id/menu_disable_source,@string/disable_source,禁用源,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart lib/features/source/views/source_edit_view.dart lib/features/reader/views/simple_reader_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->右上角更多->禁用源；校验点击后目标书源 enabled 置为 false 且当前网页承载页关闭且无确认弹窗/无成功提示；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->右上角更多->禁用源；校验行为同义且页面关闭返回阅读承载；按仓库约束开发阶段未执行 flutter analyze,对齐 legado web_view/menu_disable_source + WebViewActivity.onCompatOptionsItemSelected(menu_disable_source) + WebViewModel.disableSource + SourceHelp.enableSource 语义: 网页承载页更多菜单补齐“禁用源” destructive 动作；仅在 sourceOrigin 非空时显示；点击后按 sourceUrl 回查并静默写库 enabled=false 后关闭当前承载页；失败仅记录 ExceptionLogService(node=source.web_view.menu_disable_source) 可观测输出；不提前并入 menu_delete_source(seq410)
410,web_view.xml,@+id/menu_delete_source,@string/delete_source,删除源,系统与工具,P10,done,codex,命令: dart format lib/features/source/views/source_web_verify_view.dart；手工路径（待回归）: 设置->源管理->书源管理->任一书源->编辑->调试面板->高级工具->网页验证（Cloudflare）->右上角更多->删除源->取消/确定；校验先弹“提醒/是否确认删除？\n<书源名>”且取消不删库；确认后删除目标书源并清理 sourceVariable_* 且当前网页承载页关闭且无成功提示；手工路径（待回归）: 阅读页->菜单->章节链接->应用内网页打开->右上角更多->删除源->取消/确定；校验行为同义；按仓库约束开发阶段未执行 flutter analyze,对齐 legado web_view/menu_delete_source + WebViewActivity.onCompatOptionsItemSelected(menu_delete_source) + WebViewModel.deleteSource + SourceHelp.deleteSource 语义: 网页承载页更多菜单补齐“删除源” destructive 动作；仅在 sourceOrigin 非空时显示；点击后先弹 legacy 同义二次确认框“提醒/是否确认删除？\n<书源名>”；确认后按 sourceUrl 执行删库与 sourceVariable 清理并关闭当前承载页；失败仅记录 ExceptionLogService(node=source.web_view.menu_delete_source) 可观测输出；不提前并入 web_view/menu_copy_url(seq407)
