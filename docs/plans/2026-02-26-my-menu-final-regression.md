# 2026-02-26 「我的」菜单终回归单（Final Regression）

- 状态: `draft`
- 关联计划: `PLANS.md` -> `2026-02-26 legado「我的」全量迁移（除 Web 服务）`
- 回归口径: 按一级入口执行，逐项记录证据与结果
- 强制约束: `flutter analyze` 仅在提交前最终一步执行一次（不得提前执行、不得重复执行）
- 字段约束: 每项必须包含 `入口`、`步骤`、`结果或预期结果`、`异常分支`、`处理动作`、`关联锚点`、`证据位置`、`执行结果`；当结果为 `失败/阻塞` 时必须补充 `问题分级`

## 执行记录约定

- 结果值枚举: `通过/失败/阻塞/待执行`
- 问题分级 `S0`: 阻断级，主链路不可用或与迁移范围冲突，必须阻断提交流程。
- 问题分级 `S1`: 高优先级，主链路可达但行为偏差明显，需在当前迁移阶段修复。
- 问题分级 `S2`: 中优先级，非主链路偏差或交互/文案不一致，需排期修复并记录风险。
- 问题分级 `S3`: 低优先级，不影响主链路可用性的优化项，进入后续迭代。
- 处理动作格式: `处理动作: [动作类型]|[问题分级]|[责任人]|[截止日期 YYYY-MM-DD]|[状态]|[证据锚点或备注]`
- 处理动作示例: `处理动作: 修复中|S1|owner:MY-18|截止:2026-02-27|状态:处理中|关联:#my-final-regression-r-07`
- EX-01 占位约束: `EX-01` 仅记录占位入口的可见性与受限提示验证，不得新增 `webService` 实现步骤，不得扩展为功能开发验收。

## 回归项（一级入口，统一章节编号/锚点）

<a id="my-final-regression-r-01"></a>
### R-01 书源管理
- 章节编号/锚点: `R-01` / `#my-final-regression-r-01`
- 入口: `我的 -> 书源管理`
- 步骤:
  1. 进入书源管理页，确认列表加载、排序/筛选入口可用。
  2. 打开顶栏菜单，执行导入、调试、编辑等关键动作的可达性检查。
  3. 选择一条书源执行启用/禁用、编辑、删除（取消与确认）分支检查。
- 预期结果:
  - 一级入口可达，主菜单与条目菜单齐全。
  - 关键动作执行后状态可回显，取消操作不改变原状态。
- 异常分支:
  - 导入失败、删除失败、调试失败时有明确提示。
  - 取消删除后列表与选中态保持不变。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-01-book-source.md`
- 关联锚点: `#my-final-regression-r-01`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-01`

<a id="my-final-regression-r-02"></a>
### R-02 TXT目录规则
- 章节编号/锚点: `R-02` / `#my-final-regression-r-02`
- 入口: `我的 -> TXT目录规则`
- 步骤:
  1. 进入规则列表，检查新增、编辑、启用/禁用、批量选择入口。
  2. 触发帮助、复制规则、粘贴规则动作。
  3. 执行批量删除并分别验证取消/确认两条分支。
- 预期结果:
  - 菜单入口、选中态操作与编辑流程完整可达。
  - 批量删除后列表刷新正确，规则状态同步更新。
- 异常分支:
  - 粘贴非法规则、导入失败、帮助加载失败有可观测提示。
  - 删除取消后不发生数据变更。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-02-txt-toc-rule.md`
- 关联锚点: `#my-final-regression-r-02`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-02`

<a id="my-final-regression-r-03"></a>
### R-03 替换净化
- 章节编号/锚点: `R-03` / `#my-final-regression-r-03`
- 入口: `我的 -> 替换净化`
- 步骤:
  1. 进入替换规则列表，检查新增、编辑、启用/禁用与分组筛选。
  2. 执行帮助、复制规则、粘贴规则动作。
  3. 执行批量删除并验证取消/确认分支。
- 预期结果:
  - 顶栏、选中态、条目动作可达且状态流转正确。
  - 编辑后规则即时回显并可被读取链路使用。
- 异常分支:
  - 导入失败、粘贴格式错误、帮助加载失败时有明确提示。
  - 删除取消后列表及选中态回退正常。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-03-replace-rule.md`
- 关联锚点: `#my-final-regression-r-03`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-03`

<a id="my-final-regression-r-04"></a>
### R-04 字典规则
- 章节编号/锚点: `R-04` / `#my-final-regression-r-04`
- 入口: `我的 -> 字典规则`
- 步骤:
  1. 进入字典规则列表，检查新增、编辑、启用/禁用、批量选择。
  2. 执行帮助、复制规则、粘贴规则动作。
  3. 执行批量删除并验证取消/确认分支。
- 预期结果:
  - 规则管理主链路可达，操作结果可回显。
  - 编辑与启用状态在重进页面后保持一致。
- 异常分支:
  - 粘贴格式错误、导入失败、帮助加载失败可观测。
  - 删除取消后不产生数据改动。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-04-dict-rule.md`
- 关联锚点: `#my-final-regression-r-04`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-04`

<a id="my-final-regression-r-05"></a>
### R-05 备份与恢复
- 章节编号/锚点: `R-05` / `#my-final-regression-r-05`
- 入口: `我的 -> 备份与恢复`
- 步骤:
  1. 进入页面检查本地备份、本地恢复、WebDav 配置与恢复入口。
  2. 执行本地备份与本地恢复（仅验证可达与提示，不破坏现有数据）。
  3. 验证恢复忽略项配置入口及保存回显。
- 预期结果:
  - 备份/恢复入口完整可用，配置保存后可回显。
  - WebDav 相关入口可达，失败时可观测并可回退策略明确。
- 异常分支:
  - 备份路径不可写、远端不可达、恢复文件非法时有明确提示。
  - WebDav 恢复失败时不应导致本地配置异常污染。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-05-backup-restore.md`
- 关联锚点: `#my-final-regression-r-05`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-05`

<a id="my-final-regression-r-06"></a>
### R-06 主题设置
- 章节编号/锚点: `R-06` / `#my-final-regression-r-06`
- 入口: `我的 -> 主题设置`
- 步骤:
  1. 进入主题主页，检查主题模式、主题列表、封面设置、启动样式入口。
  2. 执行主题切换并重进页面确认回显。
  3. 在主题列表执行应用、删除、分享（或等价动作）可达性检查。
- 预期结果:
  - 一级和二级入口层级正确，主题相关状态可持久化。
  - 主题应用后阅读相关页面表现与配置一致。
- 异常分支:
  - 主题资源缺失、导入失败、删除失败时有明确提示。
  - 非法配置输入被拦截且不污染已生效配置。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-06-theme-settings.md`
- 关联锚点: `#my-final-regression-r-06`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-06`

<a id="my-final-regression-r-07"></a>
### R-07 其它设置
- 章节编号/锚点: `R-07` / `#my-final-regression-r-07`
- 入口: `我的 -> 其它设置`
- 步骤:
  1. 进入其它设置，核对基础开关、源设置、维护动作入口可达。
  2. 修改至少一项开关与一项数值配置并重进页面验证回显。
  3. 执行一个维护动作并验证确认弹窗及结果提示。
- 预期结果:
  - 配置项编辑、保存、重进回显链路完整。
  - 维护动作具备二次确认与执行反馈。
- 异常分支:
  - 输入越界、目录不可选、维护执行失败时可观测。
  - 取消确认后配置与数据保持原状。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md`
- 关联锚点: `#my-final-regression-r-07`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-07`

<a id="my-final-regression-r-08"></a>
### R-08 书签
- 章节编号/锚点: `R-08` / `#my-final-regression-r-08`
- 入口: `我的 -> 书签`
- 步骤:
  1. 进入书签页，检查导出、导出(MD)菜单入口。
  2. 点击任一书签进入详情并执行定位阅读动作。
  3. 回到列表确认状态变化（如有）和可重复操作性。
- 预期结果:
  - 导出与详情/定位阅读链路完整可达。
  - 成功/失败提示与日志节点可观测。
- 异常分支:
  - 导出失败、定位失败时有明确提示且不崩溃。
  - 空列表状态下文案与操作禁用逻辑正确。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-08-bookmark.md`
- 关联锚点: `#my-final-regression-r-08`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-08`

<a id="my-final-regression-r-09"></a>
### R-09 阅读记录
- 章节编号/锚点: `R-09` / `#my-final-regression-r-09`
- 入口: `我的 -> 阅读记录`
- 步骤:
  1. 进入页面验证搜索、总阅读时长、清空入口可见。
  2. 触发单条删除与全量清空，分别验证取消/确认分支。
  3. 切换排序或开关项后重进页面，验证回显一致。
- 预期结果:
  - 搜索、统计、清理链路完整且状态流转正确。
  - 删除/清空后列表与统计值同步更新。
- 异常分支:
  - 删除失败、清空失败时有明确提示。
  - 取消删除或取消清空后数据保持不变。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-09-read-record.md`
- 关联锚点: `#my-final-regression-r-09`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-09`

<a id="my-final-regression-r-10"></a>
### R-10 文件管理
- 章节编号/锚点: `R-10` / `#my-final-regression-r-10`
- 入口: `我的 -> 文件管理`
- 步骤:
  1. 进入文件管理页，检查目录浏览、返回上级、搜索/筛选（如有）。
  2. 执行新建文件夹并刷新列表确认结果。
  3. 长按或更多菜单执行删除/重命名（若提供）并验证取消/确认分支。
- 预期结果:
  - 文件浏览与基础管理动作可达，操作后列表正确刷新。
  - 新建/删除/重命名等动作结果可观测。
- 异常分支:
  - 名称非法、名称重复、权限不足、IO 异常时有提示。
  - 取消删除后文件树状态不变。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-10-file-manage.md`
- 关联锚点: `#my-final-regression-r-10`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-10`

<a id="my-final-regression-r-11"></a>
### R-11 关于
- 章节编号/锚点: `R-11` / `#my-final-regression-r-11`
- 入口: `我的 -> 关于`
- 步骤:
  1. 进入关于页，逐项检查帮助文档、更新日志、协议文档、日志动作入口。
  2. 执行至少一个日志类动作（如保存日志或清理日志）并记录提示。
  3. 检查版本信息与文档跳转是否可达。
- 预期结果:
  - 菜单与条目入口完整，文档页面可打开。
  - 日志类动作成功/失败均有明确反馈。
- 异常分支:
  - 文档资源缺失、写入失败、跳转失败可观测。
  - 取消确认后不执行破坏性动作。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-11-about.md`
- 关联锚点: `#my-final-regression-r-11`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-11`

<a id="my-final-regression-r-12"></a>
### R-12 退出
- 章节编号/锚点: `R-12` / `#my-final-regression-r-12`
- 入口: `我的 -> 退出`
- 步骤:
  1. 在我的页触发退出动作，检查确认弹窗（若设计包含）。
  2. 先走取消分支，确认仍停留当前会话。
  3. 再走确认分支，确认退出行为与后续落点符合预期。
- 预期结果:
  - 退出动作可达且具备安全确认。
  - 取消退出不影响当前状态，确认退出后会话状态按设计更新。
- 异常分支:
  - 退出失败或状态未清理时有可观测提示。
  - 重复触发退出不会造成异常状态。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-12-exit.md`
- 关联锚点: `#my-final-regression-r-12`
- 执行结果: `通过`
- 处理动作: `维持现状|S3|owner:MY-19|截止:2026-02-26|状态:已完成|关联:#my-final-regression-r-12`

<a id="my-final-regression-r-13"></a>
### R-13 EX-01
- 章节编号/锚点: `R-13` / `#my-final-regression-r-13`
- 入口: `我的 -> Web 服务（EX-01）`
- 步骤:
  1. 检查一级入口中 `EX-01` 的展示状态与可点击状态。
  2. 连续点击入口并返回重进后再次点击，记录当前行为（占位提示或受限跳转）。
  3. 确认不会误进入未授权/未纳入范围的扩展流程（不进入实现）。
- 预期结果:
  - `EX-01` 行为符合当前范围约束（仅占位/冻结，不引入扩展实现）。
  - 用户可见提示语义明确；重复点击后状态稳定，不造成功能误导。
- 异常分支:
  - 误进入扩展链路、无提示静默失败、文案语义冲突需标记问题。
  - 重复点击或返回重进后若出现进入实现链路，需记录为阻塞项。
- 证据位置: `docs/plans/evidence/2026-02-26-my-menu-final-regression/R-13-ex-01.md`
- 关联锚点: `#my-final-regression-r-13`
- 执行结果: `阻塞`
- 问题分级: `S0`
- 处理动作: `冻结保持|S0|owner:MY-19|截止:2026-02-26|状态:blocked|关联:#my-final-regression-r-13（仅占位验证，不进入实现）`

## 执行说明

- 本文件为可执行回归单，`执行结果` 仅允许回填 `通过/失败/阻塞/待执行`。
- 当 `执行结果` 为 `失败/阻塞` 时，必须按“执行记录约定”补充 `问题分级` 与 `处理动作`，并关联本项锚点。
- `证据位置` 对应截图、日志摘要、命令输出归档位置，命名建议沿用 `R-xx` 前缀并在台账中引用 `#my-final-regression-r-xx`。
