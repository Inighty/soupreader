import 'package:flutter/cupertino.dart';

import '../../../app/widgets/app_cupertino_page_scaffold.dart';

class SourceDebugTextView extends StatefulWidget {
  final String title;
  final String text;

  const SourceDebugTextView({
    super.key,
    required this.title,
    required this.text,
  });

  @override
  State<SourceDebugTextView> createState() => _SourceDebugTextViewState();
}

class _SourceDebugTextViewState extends State<SourceDebugTextView> {
  late final FocusNode _focusNode;

  @override
  void initState() {
    super.initState();
    _focusNode = FocusNode();
  }

  @override
  void dispose() {
    _focusNode.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return AppCupertinoPageScaffold(
      title: widget.title,
      trailing: CupertinoButton(
        padding: EdgeInsets.zero,
        onPressed: () => Navigator.of(context).pop(),
        child: const Text('关闭'),
        minimumSize: Size(30, 30),
      ),
      child: CupertinoScrollbar(
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(12),
          child: SelectableRegion(
            focusNode: _focusNode,
            selectionControls: cupertinoTextSelectionControls,
            child: Text(
              widget.text,
              style: const TextStyle(
                fontFamily: 'monospace',
                fontSize: 12.5,
                height: 1.25,
              ),
            ),
          ),
        ),
      ),
    );
  }
}
