{"done":false,"done_reason":"核心差异 D-03、D-04 仍未闭环（代码中尚未落地 legacy 对应键与页面交互），目标未完成。","goal_summary":"继续推进“我的”菜单迁移（排除 Web 服务运行态），按 D-03 -> D-04 串行补齐核心设置闭环，再回填同义清单与回归证据。","tasks":[{"id":"C16-T1","title":"补齐 D-03 主题底层键模型与持久化链路","priority":1,"prompt":"改动范围：`lib/core/models/app_settings.dart`、`lib/core/services/settings_service.dart`。对齐 legado `pref_config_theme.xml`，新增并接通 `launcherIcon`、`transparentStatusBar`、`immNavigationBar`、`barElevation`、`fontScale`、`backgroundImage`、`backgroundImageNight` 等主题底层键的默认值、fromJson/toJson、copyWith、save/get 方法。预期行为：设置值可写入 SharedPreferences，重启后可回显，且不破坏已完成的 `themeMode(0/1/2/3)` 单入口语义。验证方式：1) 检索模型与服务是否存在上述键；2) 运行与设置初始化相关测试确认无编译/初始化回归。","verify_cmd":"rg -n \"launcherIcon|transparentStatusBar|immNavigationBar|barElevation|fontScale|backgroundImageNight|backgroundImage\" lib/core/models/app_settings.dart lib/core/services/settings_service.dart && flutter test test/app_settings_test.dart","required_paths":["lib/core/models/app_settings.dart","lib/core/services/settings_service.dart","../legado/app/src/main/res/xml/pref_config_theme.xml"],"depends_on":[]},{"id":"C16-T2","title":"在主题设置页落地 D-03 底层项编辑入口","priority":2,"prompt":"改动范围：`lib/features/settings/views/theme_settings_view.dart`（必要时联动 `lib/features/settings/views/appearance_settings_view.dart`）。把当前“导航枢纽”补齐为可编辑页面：新增 `barElevation`、`fontScale`、`transparentStatusBar`、`immNavigationBar`、背景图（日/夜）等入口或开关，并调用 `SettingsService` 读写。预期行为：用户在“我的 -> 主题设置”即可完成 legacy 主题底层配置编辑，修改后立即回显；`themeMode` 仍只在“我的-主题模式”变更。验证方式：1) 关键条目文案/方法在页面中可检索；2) 主题页可编译并通过现有基础启动测试。","verify_cmd":"rg -n \"barElevation|fontScale|transparentStatusBar|immNavigationBar|背景|主题模式\" lib/features/settings/views/theme_settings_view.dart lib/features/settings/views/appearance_settings_view.dart && flutter test test/widget_test.dart --plain-name \"App launches correctly\"","required_paths":["lib/features/settings/views/theme_settings_view.dart","lib/features/settings/views/appearance_settings_view.dart","lib/core/services/settings_service.dart"],"depends_on":["C16-T1"]},{"id":"C16-T3","title":"补齐主题配置保存链路（日/夜主题保存）","priority":3,"prompt":"改动范围：`lib/features/settings/views/theme_settings_view.dart`、`lib/features/settings/views/theme_config_list_view.dart`、`lib/features/settings/services/theme_config_service.dart`。将 legacy `saveDayTheme`/`saveNightTheme` 语义落地：支持从当前设置保存为日间/夜间主题配置，并确保与背景图键协同；保留“主题应用不改 themeMode”约束。预期行为：可显式保存日/夜主题配置并在主题列表回显，应用主题不再篡改主题模式。验证方式：1) 检索保存动作与调用链存在；2) 主题列表相关测试或启动测试通过。","verify_cmd":"rg -n \"saveDayTheme|saveNightTheme|保存.*主题|backgroundImageNight|applyConfig\" lib/features/settings/views/theme_settings_view.dart lib/features/settings/views/theme_config_list_view.dart lib/features/settings/services/theme_config_service.dart && flutter test test/widget_test.dart --plain-name \"App launches correctly\"","required_paths":["lib/features/settings/views/theme_settings_view.dart","lib/features/settings/views/theme_config_list_view.dart","lib/features/settings/services/theme_config_service.dart","../legado/app/src/main/res/xml/pref_config_theme.xml"],"depends_on":["C16-T2"]},{"id":"C16-T4","title":"补齐 D-04 Other 非 Web 键模型与持久化","priority":4,"prompt":"改动范围：`lib/core/models/app_settings.dart`、`lib/core/services/settings_service.dart`。对齐 legado `pref_config_other.xml`，补齐缺失键：`Cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`updateToVariant`、`showMangaUi`，并仅保留 `webPort`、`webServiceWakeLock` 的配置锚点（不接运行态）。预期行为：非 Web 键完成可配置+持久化+回显；Web 相关键仅可存储/展示语义，不触发服务启停或端口重启。验证方式：检索键定义与 save/get 方法齐全，并通过设置模型测试。","verify_cmd":"rg -n \"Cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock\" lib/core/models/app_settings.dart lib/core/services/settings_service.dart && flutter test test/app_settings_test.dart","required_paths":["lib/core/models/app_settings.dart","lib/core/services/settings_service.dart","../legado/app/src/main/res/xml/pref_config_other.xml"],"depends_on":["C16-T3"]},{"id":"C16-T5","title":"补齐 Other 设置页缺失条目并固化 EX-01 边界","priority":5,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。新增并接线 D-04 缺失非 Web 设置项（含 `Cronet`、抗锯齿、媒体键相关、自动清理、漫画 UI、更新通道等），并对 `webPort`、`webServiceWakeLock` 保持“占位/只读说明”语义，禁止新增 WebService 启停与地址摘要流程。预期行为：Other 页面可编辑项与 legacy 非 Web 键同义，重进页面回显正确；EX-01 仍为 blocked。验证方式：1) 页面可检索到新增条目；2) Web 区仍显示未启用说明；3) 基础启动测试通过。","verify_cmd":"rg -n \"Cronet|抗锯齿|媒体按键|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|未启用\" lib/features/settings/views/other_settings_view.dart && flutter test test/widget_test.dart --plain-name \"App launches correctly\"","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/services/settings_service.dart","lib/core/models/app_settings.dart","docs/plans/2026-02-26-my-menu-parity-checklist.md"],"depends_on":["C16-T4"]},{"id":"C16-T6","title":"回填 D-03/D-04 状态与终回归证据文档","priority":6,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-id-diff.md`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/2026-02-26-my-menu-final-regression.md` 与对应 evidence 文件。完成 D-03、D-04 后把状态从“回补实现”更新为“已接通（待终验）”或等价状态；保持 `EX-01 blocked` 不变；补充主题设置/其它设置手工回归步骤与结果。预期行为：差异基线仅剩终验动作，不再把已落地项标记为待实现。验证方式：检索三份计划文档中 D-01~D-05、EX-01 的状态表达是否一致。","verify_cmd":"rg -n \"D-01|D-02|D-03|D-04|D-05|EX-01|A-已接通|blocked\" docs/plans/2026-02-26-my-menu-id-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-26-my-menu-final-regression.md","required_paths":["docs/plans/2026-02-26-my-menu-id-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-26-my-menu-final-regression.md","docs/plans/evidence/2026-02-26-my-menu-final-regression"],"depends_on":["C16-T5"]}],"notes":["上一轮 `C15-T1` 失败为执行层重试耗尽（rc=125），不是目标已完成信号；本轮继续按当前仓库真实状态推进。","按 AGENTS 串行约束执行：D-03（C16-T1~T3）完成前，D-04（C16-T4~T5）不得并行启动。","全程维持 `EX-01` 边界：不实现 Web 服务运行态（start/stop、地址摘要、端口改动触发重启）。"]}