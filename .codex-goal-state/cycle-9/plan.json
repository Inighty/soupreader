{"done":false,"done_reason":"目标未完成：核心四个 Tab 根页的大标题导航仅书架页部分落地，发现/订阅/我的仍未接入；同时书架页仍残留 `shadcn_ui` 组件，导航专项台账与证据也未回填收口。","goal_summary":"下一批先完成迁移级任务强制前置的差异清单复扫，再按 N-01~N-04 完成四个核心页的 Cupertino 大标题导航与 shadcn 残留清退，最后串行回填 N-VAL-01 导航专项证据。","tasks":[{"id":"R9-T01","title":"复扫并回填 UI 差异清单（本轮前置）","priority":1,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`。先重新扫描当前仓库并回填 N-01~N-04、N-VAL-01 的真实状态：书架页已接入 `useSliverNavigationBar` 但仍有 `shadcn_ui` 残留；发现/订阅/我的尚未接入大标题导航。预期行为：文档成为本轮唯一实现基线，状态与代码一致；若有无法等价点按 AGENTS 1.1.2 记录 `blocked` 四要素（原因/影响范围/替代方案/回补计划）。验证方式：检索台账中 N-01~N-04、N-VAL-01、blocked 字段均为最新结论。","verify_cmd":"bash -lc 'rg -n \"N-01|N-02|N-03|N-04|N-VAL-01|blocked|原因|影响范围|替代方案|回补计划|pending|done\" docs/plans/2026-02-27-ui-cupertino-diff.md'","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md"],"depends_on":[]},{"id":"R9-T02","title":"N-01 书架页清退 shadcn 并保持大标题导航语义","priority":2,"prompt":"改动范围：`lib/features/bookshelf/views/bookshelf_view.dart`。在保留现有 `useSliverNavigationBar: true`、`sliverScrollController`、回顶逻辑与菜单行为不变的前提下，移除 `ShadTheme/ShadButton/ShadCard/LucideIcons` 依赖，空态与列表卡片改为纯 Cupertino 组件与系统图标。预期行为：书架页不再依赖 `shadcn_ui`，标题折叠/展开与 Tab 重选回顶行为保持稳定，视觉与交互符合 AGENTS Cupertino 规范。验证方式：格式化后检索书架页必须保留 sliver 导航字段且不再出现任何 `Shad`/`Lucide` 符号。","verify_cmd":"bash -lc 'dart format --set-exit-if-changed lib/features/bookshelf/views/bookshelf_view.dart && rg -n \"useSliverNavigationBar:\\s*true|sliverScrollController|_buildBodySliver\" lib/features/bookshelf/views/bookshelf_view.dart && (rg -n \"shadcn_ui|\\bShad|LucideIcons\" lib/features/bookshelf/views/bookshelf_view.dart && exit 1 || true)'","required_paths":["lib/features/bookshelf/views/bookshelf_view.dart"],"depends_on":["R9-T01"]},{"id":"R9-T03","title":"N-02 发现页接入 Cupertino 大标题导航","priority":3,"prompt":"改动范围：`lib/features/discovery/views/discovery_view.dart`。将根页改为 sliver 大标题导航（`useSliverNavigationBar: true` + `sliverScrollController: _scrollController` + `sliverBodyBuilder`），并保持搜索、分组筛选、展开/收起、长按动作与 `compressSignal` 语义不变。预期行为：首屏 large title“发现”，滚动折叠/展开稳定；收到 `compressSignal` 时优先收起展开项，否则回顶且大标题恢复展开态。验证方式：格式化并检索 sliver 与 compress 关键字段。","verify_cmd":"bash -lc 'dart format --set-exit-if-changed lib/features/discovery/views/discovery_view.dart && rg -n \"useSliverNavigationBar:\\s*true|sliverScrollController|sliverBodyBuilder|compressSignal|_compressExplore\" lib/features/discovery/views/discovery_view.dart'","required_paths":["lib/features/discovery/views/discovery_view.dart"],"depends_on":["R9-T01"]},{"id":"R9-T04","title":"N-03 订阅页接入 Cupertino 大标题导航","priority":4,"prompt":"改动范围：`lib/features/rss/views/rss_subscription_view.dart`。将订阅根页切换到 sliver 大标题导航并补齐 `ScrollController` 接线，保持 trailing 三按钮、搜索框、规则订阅入口与列表交互语义不变。预期行为：large title“订阅”随滚动正常折叠/展开，无双滚动冲突；进入二级页面后侧滑返回能力不受影响。验证方式：格式化并检索 sliver 导航与滚动控制字段。","verify_cmd":"bash -lc 'dart format --set-exit-if-changed lib/features/rss/views/rss_subscription_view.dart && rg -n \"useSliverNavigationBar:\\s*true|sliverScrollController|sliverBodyBuilder|ScrollController\" lib/features/rss/views/rss_subscription_view.dart'","required_paths":["lib/features/rss/views/rss_subscription_view.dart"],"depends_on":["R9-T01"]},{"id":"R9-T05","title":"N-04 我的页接入 Cupertino 大标题导航","priority":5,"prompt":"改动范围：`lib/features/settings/views/settings_view.dart`。将“我的”根页迁移为 sliver 大标题导航，保持帮助按钮、菜单分组层级、Web 服务占位语义与全部入口 key（如 `my_menu_*`）不变。预期行为：首屏 large title“我的”，滚动折叠/展开稳定；菜单热区、跳转路径与退出语义保持当前行为。验证方式：格式化并检索 sliver 关键字段及 `my_menu_` key 保留情况。","verify_cmd":"bash -lc 'dart format --set-exit-if-changed lib/features/settings/views/settings_view.dart && rg -n \"useSliverNavigationBar:\\s*true|sliverScrollController|sliverBodyBuilder|my_menu_\" lib/features/settings/views/settings_view.dart'","required_paths":["lib/features/settings/views/settings_view.dart"],"depends_on":["R9-T01"]},{"id":"R9-T06","title":"N-VAL-01 导航专项证据回填与收口","priority":6,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`docs/plans/evidence/2026-02-26-my-menu-final-regression/`。在 N-01~N-04 完成后，串行回填四页证据：标题折叠/展开、滚动稳定性、根页与二级页返回手势、排版布局一致性；若存在未等价项按 AGENTS 1.1.2 标记 `blocked` 并补齐四要素。预期行为：N-VAL-01 成为可追溯的收口记录，台账状态与代码实现一致。验证方式：检索 N-VAL-01 与四页结论字段，并执行我的菜单冒烟脚本作为兜底。","verify_cmd":"bash -lc 'rg -n \"N-VAL-01|N-01|N-02|N-03|N-04|排版布局一致性|标题折叠|返回手势|blocked|原因|影响范围|替代方案|回补计划\" docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/evidence/2026-02-26-my-menu-final-regression && bash tool/my_menu_smoke.sh'","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/evidence/2026-02-26-my-menu-final-regression","tool/my_menu_smoke.sh"],"depends_on":["R9-T02","R9-T03","R9-T04","R9-T05"]}],"notes":["依赖关系按 AGENTS 串行约束设置：先差异清单（R9-T01），再并行实现 N-01~N-04，最后串行 N-VAL-01 收口。","本批验证全部使用定向检索/格式化/冒烟脚本，不使用 `flutter analyze`。"]}