{"done":false,"done_reason":"大目标尚未完成：核心页面已接入 Cupertino 大标题壳层，但导航专项证据仍为 `blocked`，且缺少“一键门禁 + 证据自动同步 + blocked 结构化校验”的收口工具链。","goal_summary":"下一批任务聚焦把 UI 收口流程工具化：先补脚本能力（总控门禁、证据同步、blocked 校验），再统一证据与台账字段，确保后续可在可交互环境快速解除 `N-VAL-01`。","tasks":[{"id":"C9-T01","title":"新增 UI 总控门禁脚本并串联 strict/release 两级校验","priority":1,"prompt":"改动范围：新增 `tool/ui_goal_gate.sh`，串联 `tool/ui_cupertino_guard.sh` 与 `tool/ui_nav_regression_guard.sh`。支持 `--strict`（默认）与 `--release` 两种入口：strict 走 `ui_nav_regression_guard --mode=strict`，release 走 `--mode=release`。预期行为：开发期可一条命令完成代码基线+证据结构校验；发布口径可一条命令判定是否仍存在 blocked/pending 等未收口状态。验证方式：1) `bash tool/ui_goal_gate.sh --strict` 当前应通过；2) 在证据仍为 blocked 时 `bash tool/ui_goal_gate.sh --release` 返回非 0 且输出失败原因。","verify_cmd":"bash tool/ui_goal_gate.sh --strict && (bash tool/ui_goal_gate.sh --release; test $? -ne 0)","required_paths":["tool/ui_goal_gate.sh","tool/ui_cupertino_guard.sh","tool/ui_nav_regression_guard.sh"],"depends_on":[]},{"id":"C9-T02","title":"新增导航证据命中摘要自动同步脚本","priority":2,"prompt":"改动范围：新增 `tool/ui_nav_evidence_sync.sh`。脚本从四个核心页面文件中抓取 `useSliverNavigationBar: true` 当前行号，自动回写 `R-N01~R-N04` 的“命中摘要”字段；字段缺失或格式异常时明确报错并返回非 0。预期行为：避免代码改动后证据文档行号漂移，降低手工回填成本。验证方式：运行同步脚本后，四份证据的“命中摘要”均为 `*_view.dart:<line>` 最新命中，且 strict 门禁仍通过。","verify_cmd":"bash tool/ui_nav_evidence_sync.sh && rg -n \"^- 命中摘要: `.*_view\\.dart:[0-9]+`$\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N0*.md && bash tool/ui_nav_regression_guard.sh --mode=strict","required_paths":["tool/ui_nav_evidence_sync.sh","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","lib/features/bookshelf/views/bookshelf_view.dart","lib/features/discovery/views/discovery_view.dart","lib/features/rss/views/rss_subscription_view.dart","lib/features/settings/views/settings_view.dart"],"depends_on":["C9-T01"]},{"id":"C9-T03","title":"增强导航证据守卫：强制校验排版结论与 blocked 四要素","priority":3,"prompt":"改动范围：修改 `tool/ui_nav_regression_guard.sh`。新增必填字段 `排版布局一致性`；当 `结果` 为 `blocked` 时，强制要求同文件存在且非空的 `原因/影响范围/替代方案/回补计划` 四要素（对应 AGENTS 1.1.2）。预期行为：证据不仅结构齐全，还能机检 blocked 记录是否合法，避免“只写 blocked 不写原因”的伪收口。验证方式：1) strict 模式可检查上述字段；2) release 模式继续禁止 blocked/pending。","verify_cmd":"bash tool/ui_nav_regression_guard.sh --mode=strict && (bash tool/ui_nav_regression_guard.sh --mode=release; test $? -ne 0)","required_paths":["tool/ui_nav_regression_guard.sh","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["C9-T02"]},{"id":"C9-T04","title":"统一四份导航证据字段为可机检格式","priority":4,"prompt":"改动范围：更新 `docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01~R-N04`。为每份文档补齐独立字段 `- 排版布局一致性:`，并将 blocked 四要素字段统一为单行可解析格式；保持现有 blocked 结论不变。预期行为：四份证据可稳定通过 strict 校验，并完整满足 AGENTS 对排版检查与 blocked 记录的约束。验证方式：1) 四份文档都含 `排版布局一致性` 字段；2) strict 门禁通过；3) release 仍按预期失败。","verify_cmd":"rg -n \"^- 排版布局一致性:\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N0*.md && bash tool/ui_nav_regression_guard.sh --mode=strict && (bash tool/ui_nav_regression_guard.sh --mode=release; test $? -ne 0)","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","tool/ui_nav_regression_guard.sh"],"depends_on":["C9-T03"]},{"id":"C9-T05","title":"同步台账口径：明确 strict/release 与 N-VAL-01 的关系","priority":5,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`PLANS.md`、`docs/plans/2026-02-26-my-menu-id-diff.md`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`。新增“门禁口径”说明：strict=结构达标，release=可发布收口；并统一引用 `bash tool/ui_goal_gate.sh --strict/--release`。预期行为：跨文档不再出现状态解释冲突，`N-VAL-01` 的 blocked 现状与后续解除路径可追踪。验证方式：关键字检索可同时命中 `ui_goal_gate.sh`、`strict`、`release`、`N-VAL-01`，且不存在互相矛盾描述。","verify_cmd":"rg -n \"ui_goal_gate\\.sh|strict|release|N-VAL-01\" PLANS.md docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/2026-02-26-my-menu-id-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md","required_paths":["PLANS.md","docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/2026-02-26-my-menu-id-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md","tool/ui_goal_gate.sh"],"depends_on":["C9-T01","C9-T04"]}],"notes":["当前仓库代码侧的 Cupertino 基线已基本稳定（`lib/` 下未检出 `material.dart`/`showGeneralDialog`/`shadcn_ui`），下一批应优先做收口链路工具化。","按 AGENTS 约束，本批验证均为定向脚本/检索命令，未使用 `flutter analyze`。"]}