{"done":false,"done_reason":"目标未完成：UI 代码主链已基本落地，但台账状态仍有不一致，且 N-VAL-01 仍处于 blocked 收口态，需先完成文档与守卫脚本收敛后再进入最终验收。","goal_summary":"围绕 AGENTS 约束完成 UI 迁移收口：先统一差异台账状态，再固化 blocked 证据校验与自动守卫，确保后续在可交互环境可直接执行最终手工回归。","tasks":[{"id":"C7-T01","title":"统一 UI 迁移差异清单状态（首项）","priority":1,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-id-diff.md`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`、`PLANS.md`。先按当前仓库代码与证据现状重写差异点清单：`D-03=done`、`D-04=done`、`N-01~N-04=done`、`N-VAL-01=blocked`、`EX-01=blocked`，并统一串行关系 `D-03 -> D-04`。预期行为：四份文档状态表述一致，不再出现同一条目在不同文档为 `in_progress/pending/done` 的冲突。验证方式：用 `rg` 定向检查关键状态词与依赖词，且确保不再命中过期表述（如 `D-04=in_progress`、`N-01~N-04=in_progress`、`N-VAL-01=pending`）。","verify_cmd":"rg -n \"D-03=done|D-04=done|N-01~N-04=done|N-VAL-01=blocked|EX-01=blocked|D-03 -> D-04\" docs/plans/2026-02-26-my-menu-id-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-27-ui-cupertino-diff.md PLANS.md && ! rg -n \"D-04=in_progress|N-01~N-04=in_progress|N-VAL-01=pending\" docs/plans/2026-02-26-my-menu-id-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-27-ui-cupertino-diff.md PLANS.md","required_paths":["docs/plans/2026-02-26-my-menu-id-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-27-ui-cupertino-diff.md","PLANS.md"],"depends_on":[]},{"id":"C7-T02","title":"补齐 N-VAL blocked 证据模板并消除格式漂移","priority":2,"prompt":"改动范围：`docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md`、`R-N02-discovery.md`、`R-N03-rss.md`、`R-N04-settings.md`。将四份导航证据统一为 AGENTS 1.1.2 blocked 口径：每份必须显式包含“结果: blocked + 原因 + 影响范围 + 替代方案 + 回补计划 + 处理动作”，并保持页面步骤与验证命令准确。预期行为：四份证据结构一致、语义一致，后续可直接在可交互环境回填通过结果。验证方式：逐文件 `rg` 检查 blocked 四要素与固定字段齐全。","verify_cmd":"for f in docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md; do rg -n \"^- 结果: `blocked`$|^- 原因:|^- 影响范围:|^- 替代方案:|^- 回补计划:|^- 处理动作:|^- 验证命令:|^- 命中摘要:\" \"$f\"; done","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["C7-T01"]},{"id":"C7-T03","title":"增强导航证据守卫脚本以支持 blocked 收口模式","priority":3,"prompt":"改动范围：`tool/ui_nav_regression_guard.sh`。新增 `--mode=blocked`（或等价命名）校验分支：当证据处于 blocked 收口时，不再因“待回补”语义误判失败，而是强制校验 blocked 四要素与关键字段完整；`--mode=strict` 继续用于通过态拦截占位词。预期行为：脚本可同时服务“blocked 阶段”和“最终通过阶段”两类流程。验证方式：1）`--mode=blocked` 对当前四份证据应通过；2）`--mode=strict` 对当前 blocked 证据应失败（用于防止误收口）。","verify_cmd":"bash tool/ui_nav_regression_guard.sh --mode=blocked && ! bash tool/ui_nav_regression_guard.sh --mode=strict","required_paths":["tool/ui_nav_regression_guard.sh","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["C7-T02"]},{"id":"C7-T04","title":"新增跨台账一致性守卫脚本（状态与依赖）","priority":4,"prompt":"改动范围：新增 `tool/ui_plan_consistency_guard.sh`（必要时微调 `tool/ui_cupertino_guard.sh`）。脚本检查四份主文档（my-menu id diff、parity checklist、ui cupertino diff、PLANS）是否同时满足统一状态与依赖：`D-03=done`、`D-04=done`、`N-01~N-04=done`、`N-VAL-01=blocked`、`EX-01=blocked`、`D-03 -> D-04`，并拦截已知过期状态词。预期行为：每次回填后可一键验证文档一致性，避免状态回退。验证方式：运行脚本返回 0，并打印每条规则 PASS。","verify_cmd":"bash tool/ui_plan_consistency_guard.sh","required_paths":["tool/ui_plan_consistency_guard.sh","docs/plans/2026-02-26-my-menu-id-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-27-ui-cupertino-diff.md","PLANS.md"],"depends_on":["C7-T01"]},{"id":"C7-T05","title":"将 UI 守卫链路接入现有冒烟脚本","priority":5,"prompt":"改动范围：`tool/my_menu_smoke.sh`。在不引入 `flutter analyze` 的前提下，把 `tool/ui_cupertino_guard.sh`、`tool/ui_plan_consistency_guard.sh`、`tool/ui_nav_regression_guard.sh --mode=blocked` 串联到现有冒烟流程，保持失败即退出与清晰错误输出。预期行为：执行一次冒烟脚本即可覆盖“Cupertino 约束 + 台账一致性 + blocked 证据结构”三层校验。验证方式：运行脚本并确认新增三段检查均执行且通过。","verify_cmd":"bash tool/my_menu_smoke.sh","required_paths":["tool/my_menu_smoke.sh","tool/ui_cupertino_guard.sh","tool/ui_plan_consistency_guard.sh","tool/ui_nav_regression_guard.sh"],"depends_on":["C7-T03","C7-T04"]}],"notes":["本批任务聚焦“收口可执行性”，不重复派发已落地的 UI 代码改造项。","`N-VAL-01` 当前为环境性 blocked，先完成文档与守卫自动化，下一轮可直接切换到可交互环境做手工回归回补。"]}