{"done":false,"done_reason":"大目标未完成：四个核心页虽已启用 Large Title，但当前仅书架/发现接入了 tab 重按信号；订阅/我的尚未实现“重按回顶”联动，且订阅空态动作仍是 `maybePop()`，与主导航根页语义不够一致。","goal_summary":"继续按 AGENTS 迁移口径收口主导航四核心页的 iOS Large Title 与回顶交互一致性（优先完成可编码闭环）。","tasks":[{"id":"C34-T1","title":"主导航补齐订阅/我的 tab 重按信号分发","priority":1,"prompt":"改动范围：`lib/main.dart`。先对照 legado 主导航重按语义（`MainActivity` 对应 tab reselect/compress 行为）后实现。新增 `rss`、`my` 两个 `ValueNotifier<int>` 与双击窗口计时字段，并在 `_onTabTap` 中对当前激活 tab 的二次点击发出信号（保持现有书架/发现逻辑不回退）。在 `tabBuilder` 里把新信号传给 `RssSubscriptionView` 与 `SettingsView` 构造参数。预期行为：四个核心页都能收到主导航重按事件；切换 tab 时不误触发。验证方式：1) `main.dart` 出现四个页面对应信号；2) `RssSubscriptionView/SettingsView` 构造调用含信号参数；3) `dart format` 通过。","verify_cmd":"rg -n \"_rss|_my|ValueNotifier<int>|_onTabTap\\(|RssSubscriptionView\\(|SettingsView\\(\" lib/main.dart && dart format --output=none --set-exit-if-changed lib/main.dart","required_paths":["lib/main.dart"],"depends_on":[]},{"id":"C34-T2","title":"订阅页接入重按回顶信号并保持 Large Title 折叠稳定","priority":2,"prompt":"改动范围：`lib/features/rss/views/rss_subscription_view.dart`。为页面新增可选 `ValueListenable<int>` 输入，参照书架/发现实现监听生命周期（`initState/didUpdateWidget/dispose`）并在收到新版本号时执行 `_scrollController.animateTo(0)`。保持 `useSliverNavigationBar: true` 与现有 `sliverBodyBuilder` 结构不变，不引入 Material 组件。预期行为：在主导航重按“订阅”时，页面回到顶部并恢复 large title 展开；普通浏览与筛选行为不变。验证方式：1) 文件存在信号监听与去重版本字段；2) 仍使用 `useSliverNavigationBar: true`；3) `dart format` 通过。","verify_cmd":"rg -n \"ValueListenable<int>|_lastExternal|_onExternal|animateTo\\(|useSliverNavigationBar:\\s*true\" lib/features/rss/views/rss_subscription_view.dart && dart format --output=none --set-exit-if-changed lib/features/rss/views/rss_subscription_view.dart","required_paths":["lib/features/rss/views/rss_subscription_view.dart"],"depends_on":["C34-T1"]},{"id":"C34-T3","title":"我的页接入重按回顶信号并绑定 sliverScrollController","priority":3,"prompt":"改动范围：`lib/features/settings/views/settings_view.dart`。新增可选 `ValueListenable<int>` 输入、`ScrollController`、外部信号监听与去重版本字段；在 `AppCupertinoPageScaffold` 传入 `sliverScrollController`，收到重按事件时滚动到顶部。保留现有菜单顺序、EX-01 占位逻辑与 Cupertino 组件体系。预期行为：重按“我的”tab 时列表回顶并触发 large title 展开，不影响现有入口跳转。验证方式：1) 页面具备 signal listener + `sliverScrollController`；2) 仍 `useSliverNavigationBar: true`；3) `dart format` 通过。","verify_cmd":"rg -n \"ValueListenable<int>|ScrollController|sliverScrollController|animateTo\\(|useSliverNavigationBar:\\s*true\" lib/features/settings/views/settings_view.dart && dart format --output=none --set-exit-if-changed lib/features/settings/views/settings_view.dart","required_paths":["lib/features/settings/views/settings_view.dart"],"depends_on":["C34-T1"]},{"id":"C34-T4","title":"修正订阅空态主动作，避免根页 `maybePop` 空操作","priority":4,"prompt":"改动范围：`lib/features/rss/views/rss_subscription_view.dart`。将“暂无启用订阅源”空态按钮从 `Navigator.maybePop()` 调整为直接进入订阅源管理链路（复用现有 `_openSourceSettings`），保留“没有匹配结果”场景继续清空筛选。预期行为：当订阅页作为根页面时，空态主动作可稳定引导到管理页，不出现点击无反馈。验证方式：1) noEnabled 分支不再调用 `maybePop()`；2) 动作绑定 `_openSourceSettings`；3) `dart format` 通过。","verify_cmd":"rg -n \"暂无启用订阅源|_openSourceSettings|maybePop\\(\" lib/features/rss/views/rss_subscription_view.dart && ! rg -n \"noEnabled\\s*\\?\\s*\\(\\)\\s*=>\\s*Navigator\\.of\\(context\\)\\.maybePop\\(\\)\" lib/features/rss/views/rss_subscription_view.dart && dart format --output=none --set-exit-if-changed lib/features/rss/views/rss_subscription_view.dart","required_paths":["lib/features/rss/views/rss_subscription_view.dart"],"depends_on":["C34-T2"]},{"id":"C34-T5","title":"四核心页导航一致性定向校验与最小代码修补","priority":5,"prompt":"改动范围：`lib/main.dart`、`lib/features/bookshelf/views/bookshelf_view.dart`、`lib/features/discovery/views/discovery_view.dart`、`lib/features/rss/views/rss_subscription_view.dart`、`lib/features/settings/views/settings_view.dart`。执行一次定向代码复核：四页都应保持 `useSliverNavigationBar: true`，都具备“tab 重按回顶/压缩”入口，且未引入 `showGeneralDialog`/`material.dart`。若复核中发现个别页缺监听、缺控制器或滚动行为不一致，直接最小修补。预期行为：四个核心页的 large title 与重按交互策略一致。验证方式：运行给定 `rg` 命令全部通过。","verify_cmd":"rg -n \"useSliverNavigationBar:\\s*true\" lib/features/bookshelf/views/bookshelf_view.dart lib/features/discovery/views/discovery_view.dart lib/features/rss/views/rss_subscription_view.dart lib/features/settings/views/settings_view.dart && rg -n \"reselectSignal|compressSignal|ValueListenable<int>|animateTo\\(\" lib/main.dart lib/features/bookshelf/views/bookshelf_view.dart lib/features/discovery/views/discovery_view.dart lib/features/rss/views/rss_subscription_view.dart lib/features/settings/views/settings_view.dart && ! rg -n \"showGeneralDialog|package:flutter/material.dart\" lib/main.dart lib/features/bookshelf/views/bookshelf_view.dart lib/features/discovery/views/discovery_view.dart lib/features/rss/views/rss_subscription_view.dart lib/features/settings/views/settings_view.dart","required_paths":["lib/main.dart","lib/features/bookshelf/views/bookshelf_view.dart","lib/features/discovery/views/discovery_view.dart","lib/features/rss/views/rss_subscription_view.dart","lib/features/settings/views/settings_view.dart"],"depends_on":["C34-T2","C34-T3","C34-T4"]}],"notes":["上一轮失败项 C33-T1 实际代码已落地（`other_settings_view.dart` 已显示 `webPort/webServiceWakeLock` 只读当前值），本轮无需重复派发该任务。","本批任务全部为 UI 代码闭环任务，避免先做文档收口导致状态与代码再次漂移。"]}