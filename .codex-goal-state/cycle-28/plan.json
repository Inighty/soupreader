{"done":false,"done_reason":"大目标未完成：`D-04`（其它设置）仍缺 `updateToVariant` 交互闭环，`N-VAL-01` 仍未完成证据收口，且多份台账状态仍是 `pending/待验证`。","goal_summary":"下一批先完成 D-04 的 UI 收口（变体选择 + Web 只读回显），再回填 D-04 与 N-VAL-01 文档证据并统一台账状态。","tasks":[{"id":"C28-T1","title":"在其它设置页补齐 updateToVariant 的 Cupertino 选择入口","priority":1,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`（必要时仅补充该文件内私有方法，不改其它模块行为）。先对照 legado 锚点 `../legado/app/src/main/res/xml/pref_config_other.xml:161-169` 与 `../legado/app/src/main/res/values/arrays.xml:170-174`。预期行为：在“非 Web 其它设置”分组新增 `updateToVariant` 条目；点击后使用 `showCupertinoModalPopup + CupertinoActionSheet` 提供 `default_version`、`beta_release_version`、`beta_releaseA_version` 三个选项；选择后调用 `SettingsService.saveUpdateToVariant` 持久化，取消不改动；列表 `additionalInfo` 用 `AppSettings.updateToVariantLabel(_appSettings.updateToVariant)` 立即回显当前值。验证方式：1) `rg` 命中条目文案、ActionSheet、三种值、保存调用与标签回显；2) `dart format --output=none --set-exit-if-changed` 校验文件格式。","verify_cmd":"rg -n \"updateToVariant|CupertinoActionSheet|CupertinoActionSheetAction|showCupertinoModalPopup|saveUpdateToVariant|default_version|beta_release_version|beta_releaseA_version|updateToVariantLabel\" lib/features/settings/views/other_settings_view.dart lib/core/models/app_settings.dart lib/core/services/settings_service.dart && dart format --output=none --set-exit-if-changed lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/models/app_settings.dart","lib/core/services/settings_service.dart"],"depends_on":[]},{"id":"C28-T2","title":"将 Web 服务分组改为只读显示当前配置值并保持 EX-01 边界","priority":2,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：保留“Web 服务（未启用）”不可操作语义，不新增任何运行态功能；将 `Web 端口` 与 `WebService 唤醒锁` 的 `additionalInfo` 改为只读展示 `_appSettings.webPort`、`_appSettings.webServiceWakeLock` 当前值（示例：`未启用（当前: 1122）` / `未启用（当前: 开/关）`）。验证方式：1) `rg` 命中 `_appSettings.webPort`、`_appSettings.webServiceWakeLock` 与未启用文案；2) 反向检索确认未引入 `WebService.start/stop`、`saveWebPort`、`saveWebServiceWakeLock`。","verify_cmd":"rg -n \"Web 服务（未启用）|_appSettings\\.webPort|_appSettings\\.webServiceWakeLock|未启用\" lib/features/settings/views/other_settings_view.dart && ! rg -n \"WebService\\.start|WebService\\.stop|saveWebPort|saveWebServiceWakeLock\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C28-T1"]},{"id":"C28-T3","title":"回填 D-04 11键清单与 R-07 证据，更新为实现后状态","priority":3,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md`、`docs/plans/2026-02-26-my-menu-id-diff.md`。预期行为：将 D-04 的 `updateToVariant` 从“未实现/待启动”更新为“已实现并可回显”；同步更新 D-04 状态（`in_progress` 或 `done`，按实际闭环情况）；11 键表述与代码一致；`EX-01` 继续 `blocked`，明确仅只读展示 `webPort/webServiceWakeLock`，不进入 WebService 运行态。验证方式：统一检索三份文档中的 D-04 状态、11键、variant 三值和 EX-01 边界是否一致。","verify_cmd":"rg -n \"D-04|updateToVariant|default_version|beta_release_version|beta_releaseA_version|cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|showMangaUi|webPort|webServiceWakeLock|EX-01|blocked|done|in_progress\" docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md docs/plans/2026-02-26-my-menu-id-diff.md","required_paths":["docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md","docs/plans/2026-02-26-my-menu-id-diff.md"],"depends_on":["C28-T2"]},{"id":"C28-T4","title":"完成 R-N01~R-N04 导航回归证据回填（去掉待验证占位）","priority":4,"prompt":"改动范围：`docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md`、`R-N02-discovery.md`、`R-N03-rss.md`、`R-N04-settings.md`。预期行为：将四份证据从“待验证/待回填”改为实际回归结论；每份都必须逐条给出 `N-AC-01`、`N-AC-02`、`N-AC-03` 和“排版布局一致性”结果；若某页未通过，按 AGENTS 1.1.2 记录 `blocked`（原因、影响范围、替代方案、回补计划）。验证方式：检索四份文件应存在四项验收结论字段，且不再仅有“待验证/待回填”。","verify_cmd":"rg -n \"N-AC-01|N-AC-02|N-AC-03|排版布局一致性|结果:|blocked|原因|影响范围|替代方案|回补计划|待验证|待回填\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":[]},{"id":"C28-T5","title":"同步总台账状态：收口 N-VAL-01 与 D-04 最新状态","priority":5,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`PLANS.md`。预期行为：根据 C28-T3/C28-T4 的实际结果更新 `D-04`、`N-01~N-04`、`N-VAL-01` 状态与依赖描述；若证据已齐全则将 `N-VAL-01` 收口为 `done`，否则保留 `in_progress/blocked` 并给出明确阻塞说明；保持 `EX-01=blocked` 不变。验证方式：检索两份总台账中的状态字段、依赖关系与收口说明一致且无互相冲突。","verify_cmd":"rg -n \"D-04|N-01~N-04|N-VAL-01|EX-01|blocked|pending|in_progress|done|收口|依赖\" docs/plans/2026-02-27-ui-cupertino-diff.md PLANS.md","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","PLANS.md"],"depends_on":["C28-T3","C28-T4"]},{"id":"C28-T6","title":"做一次 UI 迁移约束定向复扫并回填扫描结论","priority":6,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`（仅更新扫描结论与统计段）。预期行为：执行定向检索并回填最新统计，确保 `shadcn_ui`、`showGeneralDialog`、`package:flutter/material.dart` 在 `lib/` 下保持 0 命中，`useSliverNavigationBar: true` 仍覆盖 4 个核心页；若出现回归命中，记录为阻塞并标注影响文件。验证方式：运行同一组 `rg` 命令得到统计输出，并与文档中的数字一致。","verify_cmd":"rg -n \"shadcn_ui\" lib ; rg -n \"showGeneralDialog\" lib ; rg -n \"package:flutter/material.dart\" lib ; rg -n \"useSliverNavigationBar:\\s*true\" lib/features/bookshelf/views/bookshelf_view.dart lib/features/discovery/views/discovery_view.dart lib/features/rss/views/rss_subscription_view.dart lib/features/settings/views/settings_view.dart","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","lib/features/bookshelf/views/bookshelf_view.dart","lib/features/discovery/views/discovery_view.dart","lib/features/rss/views/rss_subscription_view.dart","lib/features/settings/views/settings_view.dart"],"depends_on":["C28-T5"]}],"notes":["上一轮 C27-T1 实际代码与文档已更新，但队列以 rc=125 失败；本轮从 C27-T2 开始续跑更稳妥。","任务已按同文件冲突最小化串行：`other_settings_view.dart` 相关先合并完成，再做文档与台账收口。","保持 AGENTS 强约束：仅 Cupertino 体系；`EX-01` 必须持续 `blocked`，不得实现 WebService 运行态。"]}