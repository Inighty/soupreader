{"done":false,"done_reason":"目标未完成：`D-04（其它设置 non-Web 键闭环）`仍未落地，当前仅模型层字段已补齐，`settings_service` 与 `other_settings_view` 仍缺保存接口与可操作 UI。","goal_summary":"按 AGENTS 迁移级约束继续推进 UI：先完成并固化 D-03 关闭证据，再串行落地 D-04（non-Web 可配置+持久化+回显），同时保持 EX-01（Web 仅只读展示，不进入运行态）。","tasks":[{"id":"C21-T1","title":"先回填 D-03 闭环状态并解锁 D-04 前置","priority":1,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`。预期行为：基于当前代码把 D-03 从“UI 未闭环”更新为与事实一致的状态（`done` 或精确 `in_progress`），并逐条回填 5 个 D-03 子项（白天/夜间背景图、白天/夜间模糊度、日夜主题保存）的“入口可操作 + 保存接口调用 + 页面回显”证据；仅当证据完整时解除 D-04 的 `blocked` 前置描述。验证方式：检索两份台账中的 `D-03`、`D-04`、`blocked`、5 个子项关键词与当前代码一致。","verify_cmd":"rg -n \"D-03|D-04|blocked|backgroundImage|backgroundImageNight|backgroundImageBlurring|backgroundImageNightBlurring|saveDayTheme|saveNightTheme|saveCurrentTheme\" docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-27-ui-cupertino-diff.md","required_paths":["docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-27-ui-cupertino-diff.md"],"depends_on":[]},{"id":"C21-T2","title":"补齐 SettingsService 的 D-04 non-Web 保存接口","priority":2,"prompt":"改动范围：`lib/core/services/settings_service.dart`。预期行为：新增并接通 9 个 non-Web 字段保存方法：`saveCronet`、`saveAntiAlias`、`saveMediaButtonOnExit`、`saveReadAloudByMediaButton`、`saveIgnoreAudioFocus`、`saveAutoClearExpired`、`saveShowAddToShelfAlert`、`saveUpdateToVariant`、`saveShowMangaUi`，全部统一走 `_saveAppSettingsPatch`；不得新增 `saveWebPort/saveWebServiceWakeLock`，不得接入 `WebService.start/stop` 或端口改动触发重启链路。验证方式：检索新增方法命中且无 Web 运行态接线。","verify_cmd":"rg -n \"saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi|_saveAppSettingsPatch\" lib/core/services/settings_service.dart && rg -n \"saveWebPort|saveWebServiceWakeLock|WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart","required_paths":["lib/core/services/settings_service.dart"],"depends_on":["C21-T1"]},{"id":"C21-T3","title":"在 OtherSettingsView 落地 D-04 非 Web 键可操作项（Cupertino）","priority":3,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：按 legado `pref_config_other` 语义补齐 9 个 non-Web 键的 UI 闭环：8 个布尔键使用 `CupertinoListTile + CupertinoSwitch`（`cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`showMangaUi`），`updateToVariant` 使用 Cupertino 选择器（保留当前值回显并通过 `saveUpdateToVariant` 持久化）；进入/返回页面后回显与 `AppSettings` 一致，不引入 Material 组件。验证方式：检索新增键、`CupertinoSwitch`、保存调用与 `updateToVariant` 显示逻辑。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/services/settings_service.dart","lib/core/models/app_settings.dart"],"depends_on":["C21-T2"]},{"id":"C21-T4","title":"Web 服务分组改为读取配置值的只读展示","priority":4,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：将“Web 服务（未启用）”分组从静态“未启用”文案改为读取 `AppSettings.webPort` 与 `AppSettings.webServiceWakeLock` 的只读展示（例如端口号、开关状态文本），并保持该分组不可点击/不可切换/不可编辑；持续保留“当前构建排除了 Web 服务”说明，严格遵守 EX-01。验证方式：检索字段读取、只读文案与无可执行动作代码路径。","verify_cmd":"rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|当前构建排除了 Web 服务|不可操作|onTap: null|onChanged: null\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/models/app_settings.dart"],"depends_on":["C21-T3"]},{"id":"C21-T5","title":"按迁移级要求对齐 Other 设置项顺序与分组语义","priority":5,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`。预期行为：对照 legado `pref_config_other.xml` 与 `OtherConfigFragment.kt`，核对并修正 D-04 新增项在页面中的分组、顺序、文案语义与热区行为，确保加载/返回状态与布局层级同义；若存在无法等价项，按 AGENTS 1.1.2 记录 `blocked`（原因、影响范围、替代方案、回补计划），不得口头跳过。验证方式：检索 D-04 映射表与页面键顺序描述是否一致，并手工回归“切换-返回-重进”回显。","verify_cmd":"rg -n \"D-04|pref_config_other|OtherConfigFragment|cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|blocked\" docs/plans/2026-02-26-my-menu-parity-checklist.md lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","docs/plans/2026-02-26-my-menu-parity-checklist.md"],"depends_on":["C21-T4"]},{"id":"C21-T6","title":"回填 D-04 与 EX-01 验证证据并更新台账结论","priority":6,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`、`docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md`。预期行为：将本轮 D-04 的实现结果、手工回归步骤与结论写入证据文件；同步更新两份台账中的 D-04 状态（`done` 或精确 `in_progress`）及 EX-01 边界确认（仅只读展示，不含运行态）；若仍有缺口，必须显式列出未完成项与阻塞原因。验证方式：检索证据文件与台账中的 D-04/EX-01 结论、9 个 non-Web 键、`webPort/webServiceWakeLock` 描述一致。","verify_cmd":"rg -n \"D-04|EX-01|cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|只读|不进入运行态\" docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md","required_paths":["docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md"],"depends_on":["C21-T5"]}],"notes":["上一轮 `C20-T1` 执行失败（rc=125），但当前仓库显示 `app_settings.dart` 对应字段已存在；本轮不重复下发模型层任务。","本批按 AGENTS 串行约束执行：先 D-03 状态与证据收口，再推进 D-04，实现与台账回填保持同轮一致。","验证命令均为定向检索与手工回归路径，不包含 `flutter analyze`（遵循 AGENTS 提交前单次执行约束）。"]}