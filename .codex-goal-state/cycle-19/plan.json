{"done":false,"done_reason":"目标未完成：D-03 仍缺“外观与主题底层”摘要闭环，D-04 的 AppSettings 字段、SettingsService 保存接口与 OtherSettingsView 非 Web 配置入口尚未落地。","goal_summary":"下一批任务按 AGENTS 的串行依赖推进：先完成 D-03 收口，再完成 D-04 的模型/服务/UI 与 Web 区只读展示。","tasks":[{"id":"C19-T1","title":"补齐主题设置摘要中的背景图与模糊度并保证返回即刷新","priority":1,"prompt":"改动范围：`lib/features/settings/views/theme_settings_view.dart`。预期行为：将“外观与主题底层”摘要从仅展示模式/图标/状态栏信息，扩展为同时展示白天与夜间背景图状态（已设置/未设置）及对应模糊度（`backgroundImageBlurring`、`backgroundImageNightBlurring`）；从 `AppearanceSettingsView` 返回后摘要需立即反映最新设置，不出现旧值残留。验证方式：1) 运行 `rg -n \"backgroundImage|backgroundImageNight|backgroundImageBlurring|backgroundImageNightBlurring|外观与主题底层|_appearanceSummary\" lib/features/settings/views/theme_settings_view.dart`；2) 手工在外观页修改背景图与模糊度，返回主题设置页确认摘要即时变化。","verify_cmd":"rg -n \"backgroundImage|backgroundImageNight|backgroundImageBlurring|backgroundImageNightBlurring|外观与主题底层|_appearanceSummary\" lib/features/settings/views/theme_settings_view.dart","required_paths":["lib/features/settings/views/theme_settings_view.dart"],"depends_on":[]},{"id":"C19-T2","title":"扩展 AppSettings 支持 D-04 非 Web 与 Web 只读字段","priority":2,"prompt":"改动范围：`lib/core/models/app_settings.dart`。预期行为：新增并完整接入字段 `cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`updateToVariant`、`showMangaUi`，并补充 `webPort`、`webServiceWakeLock`（仅用于读取/展示）；同时完成构造默认值、`fromJson` 兼容解析、`toJson` 序列化与 `copyWith`，确保旧配置可读且不崩溃。验证方式：运行 `rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|fromJson|toJson|copyWith\" lib/core/models/app_settings.dart`。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|fromJson|toJson|copyWith\" lib/core/models/app_settings.dart","required_paths":["lib/core/models/app_settings.dart"],"depends_on":["C19-T1"]},{"id":"C19-T3","title":"扩展 SettingsService：新增 D-04 非 Web 保存接口并保持 Web 只读边界","priority":3,"prompt":"改动范围：`lib/core/services/settings_service.dart`。预期行为：为 C19-T2 的 9 个 non-Web 字段新增保存方法（如 `saveCronet`、`saveAntiAlias` 等）并统一接入 `_saveAppSettingsPatch`；`webPort`、`webServiceWakeLock` 仅通过 `appSettings` 读取，不新增可操作保存接口，不接入任何 Web 运行态启停逻辑。验证方式：1) 运行 `rg -n \"saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi|_saveAppSettingsPatch|webPort|webServiceWakeLock\" lib/core/services/settings_service.dart`；2) 运行 `rg -n \"WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart` 确认无运行态接线。","verify_cmd":"rg -n \"saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi|_saveAppSettingsPatch|webPort|webServiceWakeLock\" lib/core/services/settings_service.dart && rg -n \"WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart","required_paths":["lib/core/services/settings_service.dart"],"depends_on":["C19-T2"]},{"id":"C19-T4","title":"OtherSettingsView 落地 D-04 非 Web 配置入口（Cupertino）","priority":4,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：新增 9 个 non-Web 开关项（`cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`updateToVariant`、`showMangaUi`），使用 `CupertinoSwitch` 并绑定 C19-T3 的保存接口；列表进入/返回后状态回显一致，分组文案和交互保持现有 iOS 风格，不引入 Material 组件。验证方式：1) 运行 `rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart`；2) 手工逐项切换后返回页面确认状态保持。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C19-T3"]},{"id":"C19-T5","title":"OtherSettingsView 的 Web 分组改为读取配置的只读展示","priority":5,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：将“Web 服务（未启用）”分组中的 `webPort`、`webServiceWakeLock` 改为读取 `AppSettings` 当前值进行只读展示（不可点击、不可切换、不可编辑），并保留“当前构建不启用 Web 服务”语义；严格遵守 EX-01，不新增任何 Web 启停入口。验证方式：1) 运行 `rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|当前构建排除了 Web 服务|不可操作|未启用\" lib/features/settings/views/other_settings_view.dart`；2) 手工点击该分组确认无可执行动作，且能看到配置值展示。","verify_cmd":"rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|当前构建排除了 Web 服务|不可操作|未启用\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C19-T4"]}],"notes":["上一轮 C18-T1 代码已在 `theme_settings_view.dart` 可见（保存白天/夜间主题入口与 `saveCurrentTheme` 调用），本轮不重复下发该改造任务。","本批保持串行依赖 `D-03 -> D-04`：先完成主题摘要闭环（C19-T1），再推进模型/服务/UI（C19-T2~C19-T5）。","验证命令均为定向 `rg` + 手工回归路径，不使用 `flutter analyze`。"]}