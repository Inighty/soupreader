{"done":false,"done_reason":"目标尚未完成：核心 UI 代码迁移已基本落地，但 `N-VAL-01` 证据文件仍是“待验证/待回填”，且台账状态未完成最终收口。","goal_summary":"下一批任务聚焦“收口自动化 + 证据回填 + 台账状态对齐”，先把 UI 约束检查脚本补齐，再完成四个核心页回归证据与计划文档同步，形成可重复执行的验收闭环。","tasks":[{"id":"R5-T01","title":"补齐 Cupertino UI 差异自动检查脚本","priority":1,"prompt":"改动范围：`tool/ui_cupertino_guard.sh`（新建）与必要注释。实现一个可执行脚本，固定检查 `lib/` 下 `shadcn_ui`、`showGeneralDialog`、`package:flutter/material.dart` 均为 0 命中，并校验 4 个核心页（书架/发现/订阅/我的）都含 `useSliverNavigationBar: true`。预期行为：脚本在约束满足时退出码为 0，任一约束不满足时退出码为 1 并打印明确失败项。验证方式：执行脚本并看到每项 PASS/FAIL 与最终汇总。","verify_cmd":"cd /home/server/soupreader && bash tool/ui_cupertino_guard.sh","required_paths":["tool/ui_cupertino_guard.sh"],"depends_on":[]},{"id":"R5-T02","title":"回填 N-VAL-01 四页回归证据为终态","priority":2,"prompt":"改动范围：`docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md`、`R-N02-discovery.md`、`R-N03-rss.md`、`R-N04-settings.md`。将每个文件的 `结果` 从“待验证”改为“通过”或“blocked”；若为 blocked，必须补齐“原因/影响范围/替代方案/回补计划”；并在“处理动作”写明真实回归结论，不保留“待回填/未回归”占位词。预期行为：四份证据文件满足 AGENTS 的收口记录要求，可被脚本严格校验通过。验证方式：运行现有导航证据守卫脚本严格模式，确保无占位词。","verify_cmd":"cd /home/server/soupreader && bash tool/ui_nav_regression_guard.sh --mode=strict","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["R5-T01"]},{"id":"R5-T03","title":"同步 UI 差异台账与总计划状态收口","priority":3,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`PLANS.md`。根据 `R5-T02` 的证据结果，将 `N-VAL-01` 从 `pending` 更新为终态（通常为 `done`），并同步调整“当前唯一未完成项”等过期描述；保留 `EX-01 blocked` 边界不变，不新增 WebService 运行态能力。预期行为：台账状态、总计划状态与证据文件一致，不再出现状态冲突。验证方式：用 `rg` 定向检查 `N-VAL-01` 与“唯一未完成项”描述是否已更新一致。","verify_cmd":"cd /home/server/soupreader && rg -n \"N-VAL-01|唯一未完成项|pending|done|blocked\" docs/plans/2026-02-27-ui-cupertino-diff.md PLANS.md","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","PLANS.md"],"depends_on":["R5-T02"]},{"id":"R5-T04","title":"增强导航证据守卫脚本的结果语义校验","priority":4,"prompt":"改动范围：`tool/ui_nav_regression_guard.sh`。在现有字段/占位词检查基础上，新增“结果字段取值白名单”校验（仅允许 `通过` 或 `blocked`），并在 `结果=blocked` 时强制检查文件内存在“原因/影响范围/替代方案/回补计划”四项。预期行为：脚本可阻止不完整 blocked 记录进入收口，降低文档状态漂移风险。验证方式：先运行严格模式确认当前证据通过，再用 `--mode=strict` 输出中看到新增语义校验路径。","verify_cmd":"cd /home/server/soupreader && bash tool/ui_nav_regression_guard.sh --mode=strict","required_paths":["tool/ui_nav_regression_guard.sh"],"depends_on":["R5-T02"]},{"id":"R5-T05","title":"增加一键收口检查入口","priority":5,"prompt":"改动范围：`tool/ui_final_regression_check.sh`（新建）。封装一键执行：先跑 `tool/ui_cupertino_guard.sh`，再跑 `tool/ui_nav_regression_guard.sh --mode=strict`，最后输出统一通过/失败摘要并返回对应退出码。预期行为：后续轮次可用单命令复验 UI 收口状态，减少人工漏检。验证方式：执行新脚本并确认两个子检查都被调用、失败时能正确中断。","verify_cmd":"cd /home/server/soupreader && bash tool/ui_final_regression_check.sh","required_paths":["tool/ui_final_regression_check.sh","tool/ui_cupertino_guard.sh","tool/ui_nav_regression_guard.sh"],"depends_on":["R5-T04","R5-T03"]}],"notes":["当前仓库代码层面 D-03/D-04 与核心页大标题接入已存在，下一批应避免重复开发，重点做收口与防回归自动化。","验证命令全部为定向脚本/rg 检查，未使用 `flutter analyze`（符合“非最终提交流程不跑 analyze”约束）。"]}