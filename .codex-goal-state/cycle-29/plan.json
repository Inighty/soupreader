{"done":false,"done_reason":"大目标未完成：当前仍存在 D-04 与 N-VAL-01 收口缺口（`other_settings_view.dart` 的 Web 边界回显未按最新口径落地，导航回归证据仍为待回填，台账状态未同步）。","goal_summary":"下一批先完成“迁移差异清单复扫”前置，再收口其它设置页剩余 UI 语义（含 variant 与 Web 边界只读回显），最后回填导航证据与总台账状态。","tasks":[{"id":"C29-T1","title":"先做迁移差异点清单复扫并固化当前缺口","priority":1,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`。预期行为：按 AGENTS 迁移规则先完成差异清单复扫（不改业务代码），把当前真实状态写清楚：`D-04` 的剩余 UI 缺口、`N-VAL-01` 证据待回填、`EX-01=blocked` 不变；删除与现状冲突的“待启动/未实现”旧描述，形成本轮唯一可执行基线。验证方式：1) `rg` 检查两份台账中的 `D-04/N-VAL-01/EX-01` 状态与描述一致；2) 检查仍保留串行依赖 `D-03 -> D-04`。","verify_cmd":"rg -n \"D-03 -> D-04|D-04|N-VAL-01|EX-01|blocked|pending|in_progress|done|待启动|待回填\" docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md"],"depends_on":[]},{"id":"C29-T2","title":"对齐 legado 的 updateToVariant 取值并补齐官方版选项","priority":2,"prompt":"改动范围：`lib/core/models/app_settings.dart`、`lib/features/settings/views/other_settings_view.dart`（必要时只读对照 `../legado/app/src/main/res/xml/pref_config_other.xml` 与 `../legado/app/src/main/res/values/arrays.xml`，不改其它模块）。预期行为：`检查更新查找版本(updateToVariant)` 选项与 legado 同义，包含 `default_version`、`official_version`、`beta_release_version`、`beta_releaseA_version`；模型校验集合与标签映射同步支持 `official_version`；选择后继续走 `saveUpdateToVariant` 持久化并在列表 `additionalInfo` 正确回显。验证方式：1) `rg` 命中四个 variant 值、校验集合、标签映射、ActionSheet 四个选项；2) `dart format --output=none --set-exit-if-changed` 校验改动文件格式。","verify_cmd":"rg -n \"default_version|official_version|beta_release_version|beta_releaseA_version|validUpdateToVariants|updateToVariantLabel|saveUpdateToVariant|CupertinoActionSheet\" lib/core/models/app_settings.dart lib/features/settings/views/other_settings_view.dart lib/core/services/settings_service.dart && dart format --output=none --set-exit-if-changed lib/core/models/app_settings.dart lib/features/settings/views/other_settings_view.dart","required_paths":["lib/core/models/app_settings.dart","lib/features/settings/views/other_settings_view.dart","lib/core/services/settings_service.dart"],"depends_on":["C29-T1"]},{"id":"C29-T3","title":"保持 EX-01 边界下补齐 Web 键只读当前值回显","priority":3,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：继续保持“Web 服务（未启用）”不可操作与 `EX-01 blocked` 边界，不接入任何 WebService 运行态；将 `Web 端口`、`WebService 唤醒锁` 的 `additionalInfo` 改为只读展示当前配置值（例如 `未启用（当前: 1122）`、`未启用（当前: 开/关）`），确保用户可见语义完整。验证方式：1) `rg` 命中 `_appSettings.webPort`、`_appSettings.webServiceWakeLock` 与未启用只读文案；2) 反向检索确保未引入 `WebService.start/stop`、`saveWebPort`、`saveWebServiceWakeLock`。","verify_cmd":"rg -n \"Web 服务（未启用）|_appSettings\\.webPort|_appSettings\\.webServiceWakeLock|未启用（当前\" lib/features/settings/views/other_settings_view.dart && ! rg -n \"WebService\\.start|WebService\\.stop|saveWebPort|saveWebServiceWakeLock\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C29-T2"]},{"id":"C29-T4","title":"回填 D-04 文档证据并更新 11 键状态为收口后口径","priority":4,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md`、`docs/plans/2026-02-26-my-menu-id-diff.md`。预期行为：把 D-04 中 `updateToVariant` 与 Web 边界只读回显改动同步到文档，11 键状态与代码一致；若代码闭环完成则将 D-04 更新为 `done`，否则明确剩余缺口与 `in_progress` 原因；`EX-01=blocked` 仍必须保留。验证方式：统一检索三份文档中 D-04、四个 variant 值、Web 边界键、EX-01 状态是否一致。","verify_cmd":"rg -n \"D-04|updateToVariant|default_version|official_version|beta_release_version|beta_releaseA_version|webPort|webServiceWakeLock|EX-01|blocked|in_progress|done|11 键|cronet|antiAlias|showMangaUi\" docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md docs/plans/2026-02-26-my-menu-id-diff.md","required_paths":["docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md","docs/plans/2026-02-26-my-menu-id-diff.md"],"depends_on":["C29-T3"]},{"id":"C29-T5","title":"完成 R-N01 到 R-N04 导航收口证据回填","priority":5,"prompt":"改动范围：`docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md`、`R-N02-discovery.md`、`R-N03-rss.md`、`R-N04-settings.md`。预期行为：将四份证据从“待验证/待回填”改为可审计结论，逐条填写 `N-AC-01`、`N-AC-02`、`N-AC-03` 与“排版布局一致性”；若任一项未通过，按 AGENTS 1.1.2 写 `blocked` 四要素（原因、影响范围、替代方案、回补计划）。验证方式：检索四份文件必须出现四项验收结论字段，且不再仅有待回填占位。","verify_cmd":"rg -n \"N-AC-01|N-AC-02|N-AC-03|排版布局一致性|结果:|blocked|原因|影响范围|替代方案|回补计划|待验证|待回填\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["C29-T1"]},{"id":"C29-T6","title":"同步总台账与计划页状态并执行定向复扫收口","priority":6,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`、`PLANS.md`。预期行为：依据 C29-T4/C29-T5 实际结果同步 `D-04`、`N-01~N-04`、`N-VAL-01` 状态与依赖；如证据齐全则将 `N-VAL-01` 收口为 `done`，否则明确 `in_progress/blocked` 原因；同时回填定向扫描统计，确保 `lib/` 下 `shadcn_ui`、`showGeneralDialog`、`package:flutter/material.dart` 维持 0 命中且四个核心页仍为 `useSliverNavigationBar: true`。验证方式：执行统一 `rg` 复扫并核对两份台账数字与状态一致。","verify_cmd":"rg -n \"D-04|N-01~N-04|N-VAL-01|EX-01|blocked|pending|in_progress|done|收口|依赖\" docs/plans/2026-02-27-ui-cupertino-diff.md PLANS.md && rg -n \"shadcn_ui\" lib && rg -n \"showGeneralDialog\" lib && rg -n \"package:flutter/material.dart\" lib && rg -n \"useSliverNavigationBar:\\s*true\" lib/features/bookshelf/views/bookshelf_view.dart lib/features/discovery/views/discovery_view.dart lib/features/rss/views/rss_subscription_view.dart lib/features/settings/views/settings_view.dart","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","PLANS.md","lib/features/bookshelf/views/bookshelf_view.dart","lib/features/discovery/views/discovery_view.dart","lib/features/rss/views/rss_subscription_view.dart","lib/features/settings/views/settings_view.dart"],"depends_on":["C29-T4","C29-T5"]}],"notes":["上一轮失败点主要是队列执行层 rc=125，不是目标已完成；当前代码已包含 `updateToVariant` 基础入口，但文档与收口状态明显落后于代码。","按 AGENTS 要求，本批第一项先做“差异点清单”再推进实现/回填；`EX-01` 全程保持 `blocked`，不得进入 WebService 运行态能力。"]}