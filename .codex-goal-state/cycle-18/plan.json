{"done":false,"done_reason":"目标未完成：主题设置链路仍缺“保存白天/夜间主题”UI闭环，D-04 非 Web 配置键与 Other 页面入口尚未落地。","goal_summary":"下一批任务按 AGENTS 的核心优先与串行依赖推进：先收口 D-03 主题保存入口，再完成 D-04 配置模型/服务/UI 与 Web 区只读语义。","tasks":[{"id":"C18-T1","title":"主题设置页接入保存白天/夜间主题入口","priority":1,"prompt":"改动范围：`lib/features/settings/views/theme_settings_view.dart`。预期行为：在“主题设置”页新增“保存白天主题”“保存夜间主题”两个入口；点击后使用 `CupertinoAlertDialog + CupertinoTextField` 输入名称，调用 `ThemeConfigService.saveCurrentTheme` 保存当前主题快照；成功后给出 iOS 风格成功提示，取消/空名/非法输入给出兜底提示；不改变现有“主题模式”入口语义。验证方式：1) 运行 `rg -n \"保存白天主题|保存夜间主题|ThemeConfigService|saveCurrentTheme|showCupertinoDialog\" lib/features/settings/views/theme_settings_view.dart`；2) 手工在页面分别保存白天/夜间主题后进入主题列表确认新增条目。","verify_cmd":"rg -n \"保存白天主题|保存夜间主题|ThemeConfigService|saveCurrentTheme|showCupertinoDialog\" lib/features/settings/views/theme_settings_view.dart","required_paths":["lib/features/settings/views/theme_settings_view.dart"],"depends_on":[]},{"id":"C18-T2","title":"补齐主题设置页摘要中的背景图与模糊度回显","priority":2,"prompt":"改动范围：`lib/features/settings/views/theme_settings_view.dart`。预期行为：`外观与主题底层` 的摘要补充白天/夜间背景图状态（已设置/未设置）与对应模糊度关键值，且从 `AppearanceSettingsView` 返回时可即时刷新；摘要文案保持单行可读，不出现明显破版。验证方式：1) 运行 `rg -n \"backgroundImage|backgroundImageNight|backgroundImageBlurring|backgroundImageNightBlurring|外观与主题底层\" lib/features/settings/views/theme_settings_view.dart`；2) 手工修改背景图与模糊度后返回主题设置页，确认摘要立即变化。","verify_cmd":"rg -n \"backgroundImage|backgroundImageNight|backgroundImageBlurring|backgroundImageNightBlurring|外观与主题底层\" lib/features/settings/views/theme_settings_view.dart","required_paths":["lib/features/settings/views/theme_settings_view.dart"],"depends_on":["C18-T1"]},{"id":"C18-T3","title":"扩展 AppSettings：补齐 D-04 非 Web 键与 Web 只读键","priority":3,"prompt":"改动范围：`lib/core/models/app_settings.dart`。预期行为：新增并接入字段 `cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`updateToVariant`、`showMangaUi`，同时补充只读展示所需 `webPort`、`webServiceWakeLock`；完成默认值、`fromJson` 兼容解析、`toJson`、`copyWith` 全链路，不破坏旧配置读取。验证方式：运行 `rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|fromJson|toJson|copyWith\" lib/core/models/app_settings.dart`。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|fromJson|toJson|copyWith\" lib/core/models/app_settings.dart","required_paths":["lib/core/models/app_settings.dart"],"depends_on":["C18-T2"]},{"id":"C18-T4","title":"扩展 SettingsService：新增 D-04 保存接口并保持 Web 只读边界","priority":4,"prompt":"改动范围：`lib/core/services/settings_service.dart`。预期行为：为 C18-T3 的 9 个 non-Web 字段新增保存接口并接入 `_saveAppSettingsPatch`（如 `saveCronet` 等）；`webPort`、`webServiceWakeLock` 仅参与读取/持久化兼容，不新增可操作保存入口，不接入任何 `WebService.start/stop` 逻辑。验证方式：1) 运行 `rg -n \"saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi|_saveAppSettingsPatch|webPort|webServiceWakeLock\" lib/core/services/settings_service.dart`；2) 运行 `rg -n \"WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart` 确认无运行态接线。","verify_cmd":"rg -n \"saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi|_saveAppSettingsPatch|webPort|webServiceWakeLock\" lib/core/services/settings_service.dart && rg -n \"WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart","required_paths":["lib/core/services/settings_service.dart"],"depends_on":["C18-T3"]},{"id":"C18-T5","title":"OtherSettingsView 落地 D-04 非 Web 配置入口","priority":5,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：为 9 个 non-Web 字段提供 Cupertino 风格入口（优先使用 `CupertinoSwitch`），并绑定 C18-T4 的保存接口；页面重进后状态回显一致，语义与现有分组风格一致，不引入 Material 组件。验证方式：1) 运行 `rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart`；2) 手工逐项开关并返回页面确认状态保持。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveUpdateToVariant|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C18-T4"]},{"id":"C18-T6","title":"OtherSettingsView 的 Web 区改为读取配置的只读展示","priority":6,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：在现有“Web 服务（未启用）”分组中把 `webPort` 与 `webServiceWakeLock` 以只读信息展示（不可点击、不可切换、不可编辑），并明确“当前构建不启用 Web 服务”；严格保持 EX-01 边界，不新增任何 Web 运行态操作入口。验证方式：1) 运行 `rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|不可操作|未启用\" lib/features/settings/views/other_settings_view.dart`；2) 手工点击该分组确认无可执行动作。","verify_cmd":"rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|不可操作|未启用\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart"],"depends_on":["C18-T5"]}],"notes":["上一轮失败点 C17-T1 已在代码中可见（`ThemeConfigService.saveCurrentTheme` 与 `ThemeConfigEntry.isNightTheme` 已存在），本轮不重复该任务。","本批保持 AGENTS 串行依赖：先 D-03 UI 闭环（C18-T1~T2），再 D-04 模型/服务/UI（C18-T3~T6）。","验证命令均为定向 `rg` 与手工回归路径，不包含 `flutter analyze`。"]}