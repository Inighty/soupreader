{"done":false,"done_reason":"大目标未完成：当前 `N-VAL-01` 仍为 `blocked`，且导航证据链路缺少自动同步与更严格的结构化校验，无法形成稳定收口流程。","goal_summary":"下一批先补齐导航证据工具链（自动回写 + 严格校验 + 总控门禁串联），再统一证据文档与台账口径，确保 UI 迁移在可交互环境回补前具备可重复、可机检的收口基线。","tasks":[{"id":"C10-T01","title":"新增导航证据命中摘要自动回写脚本","priority":1,"prompt":"改动范围：新增 `tool/ui_nav_evidence_sync.sh`，读取四个核心页面文件中 `useSliverNavigationBar: true` 的实际行号，并回写到 `docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01~R-N04` 的 `- 命中摘要:` 字段。预期行为：当代码行号漂移时，执行一次脚本即可同步四份证据；若目标字段缺失、重复或源文件未命中，脚本返回非 0 并输出明确错误。验证方式：1) `bash tool/ui_nav_evidence_sync.sh` 返回 0；2) `rg` 能命中四份证据的标准化 `命中摘要` 行。","verify_cmd":"bash tool/ui_nav_evidence_sync.sh && rg -n \"^- 命中摘要: `.*_view\\.dart:[0-9]+`$\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N0*.md","required_paths":["tool/ui_nav_evidence_sync.sh","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","lib/features/bookshelf/views/bookshelf_view.dart","lib/features/discovery/views/discovery_view.dart","lib/features/rss/views/rss_subscription_view.dart","lib/features/settings/views/settings_view.dart"],"depends_on":[]},{"id":"C10-T02","title":"强化导航证据门禁校验规则","priority":2,"prompt":"改动范围：修改 `tool/ui_nav_regression_guard.sh`。预期行为：在现有字段校验基础上新增必填字段 `排版布局一致性`；当 `- 结果:` 为 `blocked` 时，强制要求同文件存在且非空的 `原因/影响范围/替代方案/回补计划` 四要素；`strict` 模式负责结构与占位词校验，`release` 模式继续禁止 `blocked/pending/active` 等未收口结果。验证方式：1) 脚本内可检索到新增字段与 blocked 四要素逻辑；2) 现有证据在 strict 下通过；3) release 仍因 blocked 返回非 0。","verify_cmd":"bash -lc 'rg -n \"排版布局一致性|原因|影响范围|替代方案|回补计划\" tool/ui_nav_regression_guard.sh && bash tool/ui_nav_regression_guard.sh --mode=strict && (bash tool/ui_nav_regression_guard.sh --mode=release; test $? -ne 0)'","required_paths":["tool/ui_nav_regression_guard.sh","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md"],"depends_on":["C10-T01"]},{"id":"C10-T03","title":"统一四份导航证据为可机检格式","priority":3,"prompt":"改动范围：更新 `R-N01~R-N04` 四份证据文档。预期行为：每份文档补齐独立单行字段 `- 排版布局一致性:`；保持 `结果=blocked` 现状时，四要素 `原因/影响范围/替代方案/回补计划` 统一为单行可解析格式，避免散落在段落中导致门禁误判；文档中的 `命中摘要` 由同步脚本维护。验证方式：1) 四份文档均含新增字段；2) strict 校验通过；3) release 仍按 blocked 预期失败。","verify_cmd":"bash -lc 'rg -n \"^- 排版布局一致性:\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N0*.md && bash tool/ui_nav_regression_guard.sh --mode=strict && (bash tool/ui_nav_regression_guard.sh --mode=release; test $? -ne 0)'","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","tool/ui_nav_regression_guard.sh","tool/ui_nav_evidence_sync.sh"],"depends_on":["C10-T02"]},{"id":"C10-T04","title":"增强 UI 总控门禁串联自动同步步骤","priority":4,"prompt":"改动范围：修改 `tool/ui_goal_gate.sh`。预期行为：`--strict`（默认）与 `--release` 两种模式在执行证据校验前先调用 `tool/ui_nav_evidence_sync.sh`，保证行号回写与门禁校验同一入口完成；任一子步骤失败即整体失败，并输出失败环节。验证方式：1) `bash tool/ui_goal_gate.sh --strict` 可通过；2) `bash tool/ui_goal_gate.sh --release` 在证据仍为 blocked 时返回非 0。","verify_cmd":"bash tool/ui_goal_gate.sh --strict && (bash tool/ui_goal_gate.sh --release; test $? -ne 0)","required_paths":["tool/ui_goal_gate.sh","tool/ui_nav_evidence_sync.sh","tool/ui_cupertino_guard.sh","tool/ui_nav_regression_guard.sh"],"depends_on":["C10-T01","C10-T03"]},{"id":"C10-T05","title":"同步台账门禁口径与命令入口","priority":5,"prompt":"改动范围：`PLANS.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`、`docs/plans/2026-02-26-my-menu-id-diff.md`、`docs/plans/2026-02-26-my-menu-parity-checklist.md`。预期行为：统一写明门禁口径 `strict=结构达标`、`release=发布收口`，并固定引用 `bash tool/ui_goal_gate.sh --strict/--release`；明确 `N-VAL-01` 在当前日期（2026-02-27）仍为 `blocked`，后续仅可通过可交互环境回补解除。验证方式：四份文档均能检索到 `ui_goal_gate.sh`、`strict`、`release`、`N-VAL-01` 且描述一致无冲突。","verify_cmd":"bash -lc 'rg -n \"ui_goal_gate\\.sh|strict|release|N-VAL-01\" PLANS.md docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/2026-02-26-my-menu-id-diff.md docs/plans/2026-02-26-my-menu-parity-checklist.md'","required_paths":["PLANS.md","docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/2026-02-26-my-menu-id-diff.md","docs/plans/2026-02-26-my-menu-parity-checklist.md","tool/ui_goal_gate.sh"],"depends_on":["C10-T04"]}],"notes":["当前仓库中 `D-03`、`D-04` 代码链路已基本闭环，本批不再重复安排相同页面保存接口接线任务。","本批任务均为可直接编码落地项，验证命令以脚本与 `rg` 定向检查为主，未使用 `flutter analyze`。","`EX-01` 仍属需求边界内的长期 blocked 占位项，本轮不纳入实现任务。"]}