{"done":false,"done_reason":"目标未完成：`D-04（其它设置 non-Web 键闭环）`与 `N-VAL-01（四个核心页导航回归收口）`仍处于未收口状态。","goal_summary":"下一批优先完成 D-04 的可操作 UI 与持久化闭环（严格保持 EX-01 边界不接入 WebService 运行态），随后回填 N-VAL-01 导航专项证据并更新台账状态。","tasks":[{"id":"C22-T1","title":"补齐 D-04 non-Web 设置项保存接口","priority":1,"prompt":"改动范围：`lib/core/services/settings_service.dart`。预期行为：新增并接通 `saveCronet`、`saveAntiAlias`、`saveMediaButtonOnExit`、`saveReadAloudByMediaButton`、`saveIgnoreAudioFocus`、`saveAutoClearExpired`、`saveShowAddToShelfAlert`、`saveUpdateToVariant`、`saveShowMangaUi`，全部统一通过 `_saveAppSettingsPatch` 写入 `AppSettings`；禁止新增 `saveWebPort/saveWebServiceWakeLock`，禁止任何 `WebService` 运行态调用。验证方式：检索新增保存方法命中且无 Web 运行态接线。","verify_cmd":"rg -n \"Future<void> save(Cronet|AntiAlias|MediaButtonOnExit|ReadAloudByMediaButton|IgnoreAudioFocus|AutoClearExpired|ShowAddToShelfAlert|UpdateToVariant|ShowMangaUi)\\(\" lib/core/services/settings_service.dart && rg -n \"_saveAppSettingsPatch\" lib/core/services/settings_service.dart && rg -n \"saveWebPort|saveWebServiceWakeLock|WebService\\.start|WebService\\.stop|restart.*web|webPort.*restart\" lib/core/services/settings_service.dart","required_paths":["lib/core/services/settings_service.dart"],"depends_on":[]},{"id":"C22-T2","title":"在 OtherSettingsView 落地 8 个 non-Web 开关项","priority":2,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：按 `pref_config_other` 语义补齐并接通 8 个布尔项（`cronet`、`antiAlias`、`mediaButtonOnExit`、`readAloudByMediaButton`、`ignoreAudioFocus`、`autoClearExpired`、`showAddToShelfAlert`、`showMangaUi`），使用 `CupertinoListTile + CupertinoSwitch`，支持点击行与开关两种触发，返回重进后值与 `AppSettings` 回显一致；不得引入 Material 组件。验证方式：检索 8 个键、`CupertinoSwitch` 与对应 `save*` 调用全部存在。","verify_cmd":"rg -n \"cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|showMangaUi|CupertinoSwitch|saveCronet|saveAntiAlias|saveMediaButtonOnExit|saveReadAloudByMediaButton|saveIgnoreAudioFocus|saveAutoClearExpired|saveShowAddToShelfAlert|saveShowMangaUi\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/services/settings_service.dart","lib/core/models/app_settings.dart"],"depends_on":["C22-T1"]},{"id":"C22-T3","title":"为 updateToVariant 增加 Cupertino 选择与持久化","priority":3,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：新增 `updateToVariant` 的可操作入口（Cupertino 风格 ActionSheet/选择器），展示当前值并可切换后调用 `saveUpdateToVariant` 持久化；取消操作不改值，确认操作立即回显；文案保持“非 Web 其它设置”语义。验证方式：检索 `updateToVariant` 的展示文案、选择器逻辑与 `saveUpdateToVariant` 调用链。","verify_cmd":"rg -n \"updateToVariant|saveUpdateToVariant|CupertinoActionSheet|CupertinoPicker|showCupertinoModalPopup|showCupertinoDialog\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/services/settings_service.dart","lib/core/models/app_settings.dart"],"depends_on":["C22-T1"]},{"id":"C22-T4","title":"Web 服务分组改为读取配置的只读展示","priority":4,"prompt":"改动范围：`lib/features/settings/views/other_settings_view.dart`。预期行为：保留 `EX-01` 边界，将“Web 服务（未启用）”分组从静态文案改为读取并展示 `webPort` 与 `webServiceWakeLock` 当前配置值（只读），持续标注“当前构建排除了 Web 服务”；分组不可点击、不可切换、不可编辑。验证方式：检索字段读取与只读文案存在，且无 `onTap/onChanged` 可操作行为。","verify_cmd":"rg -n \"Web 服务（未启用）|webPort|webServiceWakeLock|当前构建排除了 Web 服务|只读|未启用\" lib/features/settings/views/other_settings_view.dart && rg -n \"Web 服务（未启用）.*onTap|webServiceWakeLock.*onChanged|webPort.*onTap|saveWebPort|saveWebServiceWakeLock\" lib/features/settings/views/other_settings_view.dart","required_paths":["lib/features/settings/views/other_settings_view.dart","lib/core/models/app_settings.dart"],"depends_on":["C22-T2","C22-T3"]},{"id":"C22-T5","title":"回填 D-04 台账与其它设置回归证据","priority":5,"prompt":"改动范围：`docs/plans/2026-02-26-my-menu-parity-checklist.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`、`docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md`。预期行为：根据实际代码把 D-04 状态更新为精确状态（`done` 或 `in_progress`），逐条记录 9 个 non-Web 键的“入口可操作 + 保存调用 + 回显结果”，并明确 EX-01 仍为只读边界；若有未完成项必须标记 `blocked` 并写明原因/影响/替代/回补。验证方式：检索 D-04、EX-01、9 个键与状态描述在三份文档中一致。","verify_cmd":"rg -n \"D-04|EX-01|cronet|antiAlias|mediaButtonOnExit|readAloudByMediaButton|ignoreAudioFocus|autoClearExpired|showAddToShelfAlert|updateToVariant|showMangaUi|webPort|webServiceWakeLock|blocked|只读\" docs/plans/2026-02-26-my-menu-parity-checklist.md docs/plans/2026-02-27-ui-cupertino-diff.md docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md","required_paths":["docs/plans/2026-02-26-my-menu-parity-checklist.md","docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/evidence/2026-02-26-my-menu-final-regression/R-07-other-settings.md"],"depends_on":["C22-T4"]},{"id":"C22-T6","title":"执行 N-VAL-01 收口并回填四页导航证据","priority":6,"prompt":"改动范围：`docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md`、`R-N02-discovery.md`、`R-N03-rss.md`、`R-N04-settings.md`、`docs/plans/2026-02-27-ui-cupertino-diff.md`。预期行为：按 `N-AC-01~03` 对四个核心页回填结果（large title 折叠/展开、滚动稳定、根页不误退、二级页可侧滑返回、排版布局一致性）；将证据文件从“待验证/待回填”更新为实际结论，并同步更新台账中 `N-01~N-04` 与 `N-VAL-01` 状态。验证方式：检索四份证据中的“结果/处理动作”已更新且台账状态与证据一致。","verify_cmd":"rg -n \"结果: `待验证`|状态:待回填|未回归\" docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md ; rg -n \"N-01~N-04|N-VAL-01|in_progress|pending|done\" docs/plans/2026-02-27-ui-cupertino-diff.md","required_paths":["docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N01-bookshelf.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N02-discovery.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N03-rss.md","docs/plans/evidence/2026-02-27-ui-nav-final-regression/R-N04-settings.md","docs/plans/2026-02-27-ui-cupertino-diff.md"],"depends_on":["C22-T5"]}],"notes":["上一轮 `C21-T1` 执行失败（rc=125）但台账已显示 `D-03=done`、`D-04=pending`；本轮不重复下发 D-03 任务。","当前代码现状显示：`AppSettings` 字段已具备，但 `settings_service.dart` 尚未提供 D-04 的 9 个 non-Web 保存接口，`other_settings_view.dart` 也未完整接通对应持久化。","本批验证命令均为定向检索与证据一致性校验，未使用 `flutter analyze`。"]}