{"done":false,"done_reason":"UI 迁移主链 N-01~N-04 仍未全部完成，且 N-VAL-01 受阻塞未收口。","goal_summary":"围绕 AGENTS 的 Cupertino 强约束，先做一次差异基线复扫，再并行完成书架/发现/订阅/我的四页的大标题导航与 shadcn 清退，最后回填台账与手工回归证据。","tasks":[{"id":"C12-T01","title":"复扫并冻结 UI 差异基线","priority":1,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md`。先执行定向检索（`shadcn_ui`、`ShadTheme|ShadButton|ShadCard`、`showGeneralDialog`、`useSliverNavigationBar`、`CupertinoSliverNavigationBar`），把最新命中数和命中文件回填到台账。预期行为：台账中的统计与当前代码完全一致，后续实现任务都基于这份冻结基线。验证方式：运行检索命令并逐项对照台账数字/文件路径是否一致。","verify_cmd":"rg -n \"shadcn_ui|ShadTheme\\.of\\(|ShadButton\\(|ShadCard\\(\" lib && rg -n \"showGeneralDialog\" lib && rg -n \"useSliverNavigationBar|CupertinoSliverNavigationBar\" lib","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md"],"depends_on":[]},{"id":"C12-T02","title":"N-01 书架页清退 shadcn 并保持现有交互","priority":2,"prompt":"改动范围：`lib/features/bookshelf/views/bookshelf_view.dart`。移除 `shadcn_ui` 依赖及 `ShadTheme/ShadButton/ShadCard/LucideIcons` 使用，空态和列表卡片改为 Cupertino 等价实现（`Container`/`CupertinoButton`/`CupertinoColors`/系统图标），保持现有文案、点击行为（导入本地、打开书籍、长按菜单）与状态展示（在读标记、未读角标、更新时间）不变。预期行为：书架页继续使用大标题导航，且该文件不再包含任何 shadcn 组件。验证方式：代码检索确认零残留，并跑书架编译测试。","verify_cmd":"rg -n \"shadcn_ui|ShadTheme|ShadButton|ShadCard|LucideIcons\" lib/features/bookshelf/views/bookshelf_view.dart && flutter test test/bookshelf_view_compile_test.dart","required_paths":["lib/features/bookshelf/views/bookshelf_view.dart","test/bookshelf_view_compile_test.dart"],"depends_on":["C12-T01"]},{"id":"C12-T03","title":"N-02 发现页接入 Cupertino 大标题滚动链路","priority":3,"prompt":"改动范围：`lib/features/discovery/views/discovery_view.dart`。把页面从普通 `child: Column + ListView` 结构改为 `useSliverNavigationBar: true` 并接入 `sliverScrollController`；将顶部搜索区、统计信息、列表/空态拆成同一主滚动容器下的 sliver 结构，保证大标题折叠由主滚动驱动。预期行为：首屏大标题、上滑折叠、回顶展开稳定，无闪烁；现有分组筛选、展开书源、长按菜单、删除/编辑等行为不变。验证方式：检索确认该页已启用 sliver 导航参数，并跑发现页编译测试。","verify_cmd":"rg -n \"useSliverNavigationBar:\\s*true|sliverBodyBuilder|sliverScrollController\" lib/features/discovery/views/discovery_view.dart && flutter test test/discovery_view_compile_test.dart","required_paths":["lib/features/discovery/views/discovery_view.dart","test/discovery_view_compile_test.dart"],"depends_on":["C12-T01"]},{"id":"C12-T04","title":"N-03 订阅页接入 Cupertino 大标题滚动链路","priority":4,"prompt":"改动范围：`lib/features/rss/views/rss_subscription_view.dart`。改为 `useSliverNavigationBar: true`，将搜索框、统计行、规则订阅入口、订阅列表/空态统一到 sliver 主滚动链路，避免内外双滚动导致导航栏不折叠。预期行为：订阅页大标题折叠/展开稳定，现有收藏、分组菜单、源设置、列表点击与长按操作保持不变。验证方式：检索确认 sliver 参数生效，并跑 RSS 相关编译与菜单测试。","verify_cmd":"rg -n \"useSliverNavigationBar:\\s*true|sliverBodyBuilder|sliverScrollController\" lib/features/rss/views/rss_subscription_view.dart && flutter test test/rss_subscription_view_compile_test.dart test/rss_subscription_view_group_menu_test.dart","required_paths":["lib/features/rss/views/rss_subscription_view.dart","test/rss_subscription_view_compile_test.dart","test/rss_subscription_view_group_menu_test.dart"],"depends_on":["C12-T01"]},{"id":"C12-T05","title":"N-04 我的页接入 Cupertino 大标题滚动链路","priority":5,"prompt":"改动范围：`lib/features/settings/views/settings_view.dart`。将页面改为 `useSliverNavigationBar: true`，把三段 `CupertinoListSection` 和底部间距迁移为 sliver 结构（可使用 `SliverToBoxAdapter` 包裹现有 section），确保大标题折叠由主滚动驱动。预期行为：我的页保留现有菜单顺序、文案与跳转行为，侧滑返回语义保持；大标题滚动折叠符合 iOS 习惯。验证方式：检索确认 sliver 参数开启，并跑主应用启动用例确保主 tab 可正常加载。","verify_cmd":"rg -n \"useSliverNavigationBar:\\s*true|sliverBodyBuilder|sliverScrollController\" lib/features/settings/views/settings_view.dart && flutter test test/widget_test.dart --plain-name \"App launches correctly\"","required_paths":["lib/features/settings/views/settings_view.dart","test/widget_test.dart"],"depends_on":["C12-T01"]},{"id":"C12-T06","title":"N-VAL-01 回填迁移台账与手工回归证据","priority":6,"prompt":"改动范围：`docs/plans/2026-02-27-ui-cupertino-diff.md` 与 `docs/plans/evidence/`（新增本轮回归记录）。在 N-01~N-04 完成后，逐项回填 `N-AC-01~N-AC-03` 与“排版布局一致性”结果，更新 `N-01~N-04`、`N-VAL-01`、`EX-NAV-02` 状态（若仍有差异需保留 blocked 并写明原因/影响/替代/回补）。预期行为：文档状态与代码一致，且有可追溯的手工回归记录。验证方式：检查台账状态字段、证据文件存在，并复扫确认 `shadcn_ui` 在 `lib/` 归零。","verify_cmd":"test -f docs/plans/2026-02-27-ui-cupertino-diff.md && rg -n \"N-01|N-02|N-03|N-04|N-VAL-01|EX-NAV-02|排版布局一致性\" docs/plans/2026-02-27-ui-cupertino-diff.md && rg -n \"shadcn_ui|ShadTheme\\.of\\(|ShadButton\\(|ShadCard\\(\" lib","required_paths":["docs/plans/2026-02-27-ui-cupertino-diff.md","docs/plans/evidence"],"depends_on":["C12-T02","C12-T03","C12-T04","C12-T05"]}],"notes":["上一轮 `done.tsv` 为空且 `failed.tsv` 显示重试耗尽，本轮先用 C12-T01 重新冻结基线可降低并行任务漂移风险。","遵循 AGENTS：不新增/改造测试用例，仅使用现有测试与定向检索命令做过程验证；不使用 `flutter analyze` 作为过程命令。"]}